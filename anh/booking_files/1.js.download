(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1682:function(e,t,r){"use strict";var n,o,i=r(1),s=r(14),a=r(8),c=r(38),u=r(53),l=r(9),f=r(5),d=r(55),m=r(58),p=r(71),v=r(93),y=r(36),b=r(25),h=r(0),g=r(19),C=r(73),O=r(1723),S=r.n(O);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),1===s)t.children=n;else if(s>1){for(var a=new Array(s),c=0;c<s;c++)a[c]=arguments[c+3];t.children=a}if(t&&i)for(var u in i)void 0===t[u]&&(t[u]=i[u]);else t||(t=i||{});return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!==I(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===I(t)?t:String(t)}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var o=k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return B(this,r)}}function B(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=withStyles(S.a)(n=bindRedux([c.a,v.a],[f,l,y,b])(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(s,Component);var t,r,n,o=j(s);function s(){var e;w(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={selection:"all",dismissEditsInProgress:!1},e}return t=s,(r=[{key:"render",value:function(){var e=this,t=this.props.reservations,r=this.state.dismissEditsInProgress;return N(d.a,{dialog:!0,ariaLabelledBy:"dismiss-change-header"},void 0,N("h2",{className:"".concat(S.a.heading," app_modalTitle"),id:"dismiss-change-header"},void 0,N(FormattedMessage,{id:"cart.text.dismissChanges",defaultMessage:"##cart.text.dismissChanges##"})),t.length>1&&N("div",{className:S.a.reservationList},void 0,N("p",{},void 0,N(FormattedMessage,{id:"cart.text.selectReservation",defaultMessage:"##cart.text.selectReservation##"})),N("div",{},void 0,N(p.a,{id:"rez_dismiss_all",checked:"all"===this.state.selection,onChange:function(){return e.setState({selection:"all"})},type:"radio"}),N("label",{htmlFor:"rez_dismiss_all"},void 0,N("span",{className:"app_radioBox"}),N(FormattedMessage,{id:"cart.text.all",defaultMessage:"##cart.text.all##"}))),t.map((function(t){return N("div",{},t.Id,N(p.a,{id:"rez_dismiss_".concat(t.Id),checked:e.state.selection===t.Id,onChange:function(r){return e.setState({selection:r.target.checked&&t.Id})},type:"radio"}),N("label",{htmlFor:"rez_dismiss_".concat(t.Id)},void 0,N("span",{className:"app_radioBox"}),N("span",{dangerouslySetInnerHTML:{__html:i.O(t.RoomName)}}),t.Status===h.td.PENDING_MODIFY&&N("span",{},void 0," - ",t.CrsConfirmationNumber)))}))),N(m.a,{},void 0,N(a.a,{className:"btn",colorClassName:"secondary",sizeClassName:"sm",onClick:function(){return e.props.actions.setModalMsg(!1)}},void 0,N(FormattedMessage,{id:"editItineraryModal.button.cancel",defaultMessage:"##editItineraryModal.button.cancel##"})),N(a.a,{className:"btn",colorClassName:"primary",sizeClassName:"sm",onClick:function(){return e.dismissEditAndNavigateBack()},processing:r,enableSpinner:!0},void 0,N(FormattedMessage,{id:"cart.button.dismissEdits",defaultMessage:"##cart.button.dismissEdits##"}))))}},{key:"dimissBookedReservation",value:function(e){var t=this.props,r=t.reservations,n=t.actions,o=t.currentUrlParams,i=_.get(o,[h.Gc.SBE_AR]);if(e&&e.Status===h.td.BOOKED){var s={HotelId:e.Hotel,ChainId:e.ChainId,CrsConfirmationNumber:e.CrsConfirmationNumber,ReservationId:e.Id,Status:e.Status};return n.removeReservation(s).then((function(){var t=r.findIndex((function(t){return t.CrsConfirmationNumber===e.CrsConfirmationNumber})),o=r.find((function(t){return t.CrsConfirmationNumber!==e.CrsConfirmationNumber})),a=_.get(o,"CrsConfirmationNumber"),c=_.get(o,"Id"),u=i?Object(C.a)(atob(i)):"";return n.removeReservationCriteriaFromUrl(t),n.setActiveReservationId(c),u===e.Id&&a&&n.updateCurrentUrlParams(P({},h.Gc.SBE_AR,Object(C.b)(btoa(a)))),n.resetConfirmItineraryResults(),n.resetAdditionalGuests(s.ReservationId)}))}}},{key:"dismissEditAndNavigateBack",value:function(){var e=this,t=this.props,r=t.reservations,n=t.actions,o=t.currentUrlParams,i=t.isSIPActivated,s=r.find((function(t){return t.Id===e.state.selection}))||r[0];return s&&s.Status===h.td.BOOKED?(n.setModalMsg(!1),this.dimissBookedReservation(s)):"all"===this.state.selection?this.setState({dismissEditsInProgress:i},(function(){var t=i?_.reduce(r,(function(e,t){return e.push(n.getReservationForConfirmationView({hotelId:t.Hotel,chainId:t.ChainId,confirmationNumber:t.CrsConfirmationNumber,status:h.td.CONFIRMED,ignorePendingChanges:!0})),e}),[]):[];return Promise.all(t).then((function(){var t;n.navigate(h.B.CONFIRM),n.resetAllPendingModifyReservations(),_.forEach(r,(function(t){_.isEqual(_.get(t,"Status"),h.td.BOOKED)&&e.dimissBookedReservation(t)})),n.updateCurrentUrlParams((P(t={},h.Gc.SBE_PM,""),P(t,h.Gc.SBE_AR,""),t)),n.setModalMsg(!1)}))})):s&&s.Status===h.td.PENDING_MODIFY?this.setState({dismissEditsInProgress:i},(function(){var e=r.find((function(e){return e.CrsConfirmationNumber!==s.CrsConfirmationNumber})),t=_.get(e,"CrsConfirmationNumber"),a=_.get(e,"Id"),c=_.get(o,[h.Gc.SBE_AR]),u=_.get(o,[h.Gc.SBE_PM]),l=c?Object(C.a)(atob(c)):"",f=i?n.getReservationForCheckoutView({hotelId:s.Hotel,chainId:s.ChainId,confirmationNumber:s.CrsConfirmationNumber,status:h.td.CONFIRMED},{isSIPActivated:i}):Promise.resolve();return n.deletePendingModifyReservation(s.Id),f.then((function(){if(n.setActiveReservationId(a),l===s.Id&&t&&n.updateCurrentUrlParams(P({},h.Gc.SBE_AR,Object(C.b)(btoa(t)))),u){var e=Object(g.o)(u,s.CrsConfirmationNumber);n.updateCurrentUrlParams(P({},h.Gc.SBE_PM,e))}n.setModalMsg(!1)}))})):void 0}}])&&R(t.prototype,r),n&&R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}())||n)||n;x.defaultProps={selectorProps:{appSelector:["currentUrlParams"],sipSelector:["isSIPActivated"]}};var D,A,F=r(1725),G=r.n(F);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t,r,n){A||(A="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var s=new Array(i),a=0;a<i;a++)s[a]=arguments[a+3];t.children=s}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:A,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===T(i)?i:String(i)),n)}var o,i}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var o=K(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return W(this,r)}}function W(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"a",(function(){return $}));var $=withStyles(G.a)(D=bindRedux([c.a,u.a],[f,l])(D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(c,Component);var t,r,n,o=H(c);function c(){return Y(this,c),o.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.activeReservations,n=t.confirmItineraryRequested,o=t.shouldDisplayInvalidAddOnWarning,c=t.shouldDisplayRemovedOffersWarning,u=r.filter((function(e){return e.Status===h.td.PENDING_MODIFY})).length>0,l=this.getMessages();return U("div",{className:G.a.container},void 0,!n&&u&&U(s.a,{messages:l,messageType:o||c?h.tc.WARNING:h.tc.INFO,needsBox:!0},void 0,U(a.a,{className:"btn",colorClassName:"secondary",sizeClassName:"sm",onClick:function(){return e.showDismissChangesMessage()}},void 0,Object(i.Y)("cart.button.dismissEdits"))))}},{key:"showDismissChangesMessage",value:function(){var e=this.props.activeReservations.filter((function(e){return e.Status===h.td.PENDING_MODIFY||e.Status===h.td.BOOKED}));this.props.actions.setModalMsg(U(x,{reservations:e}))}},{key:"getMessages",value:function(){var e=this.props,t=e.shouldDisplayInvalidAddOnWarning,r=e.shouldDisplayRemovedOffersWarning;return t||r?[Object(i.Y)("cart.text.weRemovedTheExtras"),Object(i.Y)("cart.text.addItemsAgainOrDismissEdits")]:Object(i.Y)("cart.text.editingReservation")}}])&&z(t.prototype,r),n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}())||D)||D},1723:function(e,t,r){var n=r(1724),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1724:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".dismiss-edits-reservation-selection_reservationList{display:block;margin-top:1rem}.dismiss-edits-reservation-selection_reservationList p{margin-bottom:1rem}.dismiss-edits-reservation-selection_heading{margin-bottom:1rem}\n",""]),n.locals={reservationList:"dismiss-edits-reservation-selection_reservationList",heading:"dismiss-edits-reservation-selection_heading"},e.exports=n},1725:function(e,t,r){var n=r(1726),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1726:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".dismiss-edits-message_container{margin-bottom:1rem}\n",""]),n.locals={container:"dismiss-edits-message_container"},e.exports=n}}]);