(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1681:function(e,t,r){"use strict";var n=r(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,Component);var t,r,o,l=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=l.call(this,e)).isMobileSize=function(){return window.innerWidth<=n.oe.TABLET_VIEW},t.isTabletSize=function(){return n.oe.TABLET_VIEW<window.innerWidth&&window.innerWidth<=n.oe.DESKTOP_VIEW},t.state={isMobileView:e.deviceTypeInfo.isMobile||t.isMobileSize(),isTabletView:e.deviceTypeInfo.isTablet||t.isTabletSize()},t.handleResize=t.handleResize.bind(d(t)),t}return t=c,(r=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){var e=this;_.cond([[function(){return!1},function(){}],[function(){return window.innerWidth<=n.oe.TABLET_VIEW},function(){return e.setState({isMobileView:!0,isTabletView:!1})}],[function(){return window.innerWidth>n.oe.TABLET_VIEW&&window.innerWidth<=n.oe.DESKTOP_VIEW},function(){return e.setState({isMobileView:!1,isTabletView:!0})}],[function(){return!0},function(){return e.setState({isMobileView:!1,isTabletView:!1})}]])()}},{key:"render",value:function(){return this.props.children(this.state.isMobileView,this.state.isTabletView)}}])&&i(t.prototype,r),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(),p=bindRedux([function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{deviceTypeInfo:_.get(e,"app.deviceTypeInfo","")}}],[])(u);t.a=p},1741:function(e,t,r){var n=r(1742),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1742:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-policies_container{border:1px solid /@border.color.style1@/;background:/@background.style1@/;border-radius:/@border.radius@/;padding:1rem;margin-bottom:1rem}.guest-policies_container h2{margin-bottom:1rem}.guest-policies_hotelDetails{display:block}.guest-policies_checkIn,.guest-policies_checkOut{display:inline-block;vertical-align:top;margin-bottom:1rem}.guest-policies_checkIn b,.guest-policies_checkOut b{display:block}html[dir=ltr] .guest-policies_checkIn{margin-right:3rem}html[dir=rtl] .guest-policies_checkIn{margin-left:3rem}.guest-policies_perRoom{margin-bottom:1.5rem}.guest-policies_perRoom h3{margin-bottom:0.5rem}.guest-policies_perRoom:last-child{margin-bottom:0}.guest-policies_additionalPolicy,.guest-policies_cancelPolicy,.guest-policies_childrenPolicy,.guest-policies_guaranteePolicy,.guest-policies_transactionFeeDisclaimer,.guest-policies_commissionPolicy{margin-bottom:0.5rem}.guest-policies_commissionRate{display:block}.guest-policies_policiesModalHeading{margin-bottom:1rem}.guest-policies_fullPolicyLink{margin-top:1.5rem}\n",""]),n.locals={container:"guest-policies_container",hotelDetails:"guest-policies_hotelDetails",checkIn:"guest-policies_checkIn",checkOut:"guest-policies_checkOut",perRoom:"guest-policies_perRoom",additionalPolicy:"guest-policies_additionalPolicy",cancelPolicy:"guest-policies_cancelPolicy",childrenPolicy:"guest-policies_childrenPolicy",guaranteePolicy:"guest-policies_guaranteePolicy",transactionFeeDisclaimer:"guest-policies_transactionFeeDisclaimer",commissionPolicy:"guest-policies_commissionPolicy",commissionRate:"guest-policies_commissionRate",policiesModalHeading:"guest-policies_policiesModalHeading",fullPolicyLink:"guest-policies_fullPolicyLink"},e.exports=n},1745:function(e,t,r){var n=r(1746),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1746:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".add-coupon-to-reservations_container{border:1px solid /@border.color.style1@/;background:/@background.style1@/;border-radius:/@border.radius@/;padding:1rem;margin-bottom:1rem}.add-coupon-to-reservations_container h2{margin-bottom:1rem}.add-coupon-to-reservations_couponField form{display:flex;align-items:flex-start;width:calc(60% - 1rem)}@media (max-width: 767px){.add-coupon-to-reservations_couponField form{display:block;width:100%}}.add-coupon-to-reservations_couponField form .button_btn,.add-coupon-to-reservations_couponField form .input-field_container{flex-grow:1}@media (min-width: 768px){.add-coupon-to-reservations_couponField form .input-field_container input{border-top-left-radius:/@input.borderRadius@/;border-bottom-left-radius:/@input.borderRadius@/;border-top-right-radius:0;border-bottom-right-radius:0}html[dir=rtl] .add-coupon-to-reservations_couponField form .input-field_container input{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:/@input.borderRadius@/;border-bottom-right-radius:/@input.borderRadius@/}}@media (max-width: 767px){.add-coupon-to-reservations_couponField form .input-field_container input{border-top-left-radius:/@input.borderRadius@/;border-bottom-left-radius:0;border-top-right-radius:/@input.borderRadius@/;border-bottom-right-radius:0}html[dir=rtl] .add-coupon-to-reservations_couponField form .input-field_container input{border-top-left-radius:/@input.borderRadius@/;border-bottom-left-radius:0;border-top-right-radius:/@input.borderRadius@/;border-bottom-right-radius:0}}.add-coupon-to-reservations_couponField form .input-field_container[data-error] .input-field_message{display:none}.add-coupon-to-reservations_couponField form .button_btn{padding-top:0;padding-bottom:0;height:/@input.height@/}@media (min-width: 768px){.add-coupon-to-reservations_couponField form .button_btn{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:/@input.borderRadius@/;border-bottom-right-radius:/@input.borderRadius@/}html[dir=rtl] .add-coupon-to-reservations_couponField form .button_btn{border-top-left-radius:/@input.borderRadius@/;border-bottom-left-radius:/@input.borderRadius@/;border-top-right-radius:0;border-bottom-right-radius:0}}@media (max-width: 767px){.add-coupon-to-reservations_couponField form .button_btn{border-top-left-radius:0;border-bottom-left-radius:/@input.borderRadius@/;border-top-right-radius:0;border-bottom-right-radius:/@input.borderRadius@/;width:100%}html[dir=rtl] .add-coupon-to-reservations_couponField form .button_btn{border-top-left-radius:0;border-bottom-left-radius:/@input.borderRadius@/;border-top-right-radius:0;border-bottom-right-radius:/@input.borderRadius@/}}.add-coupon-to-reservations_couponField .message_container{margin-top:1rem}.add-coupon-to-reservations_selectRoom{width:calc(60% - 1rem);display:inline-block;margin:0 0 1rem}@media (max-width: 1024px){.add-coupon-to-reservations_selectRoom{width:100%}}.add-coupon-to-reservations_couponApplied{margin-bottom:1rem}.add-coupon-to-reservations_couponInfo{border:1px solid /@message.success.color@/;border-radius:/@border.radius@/;padding:1rem;display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.add-coupon-to-reservations_couponInfo button::after{font-size:1.5rem}.add-coupon-to-reservations_couponInfo .message_inline .message_content p{display:block}.add-coupon-to-reservations_couponInfo section{margin-bottom:0}.add-coupon-to-reservations_notice{text-align:right;font-style:italic;color:/@font.colorLight@/}html[dir=rtl] .add-coupon-to-reservations_notice{text-align:left}\n",""]),n.locals={container:"add-coupon-to-reservations_container",couponField:"add-coupon-to-reservations_couponField",selectRoom:"add-coupon-to-reservations_selectRoom",couponApplied:"add-coupon-to-reservations_couponApplied",couponInfo:"add-coupon-to-reservations_couponInfo",notice:"add-coupon-to-reservations_notice"},e.exports=n},1747:function(e,t,r){var n=r(1748),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1748:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".additional-guest-fields_container{background:/@background.style2@/;border-radius:/@border.radius@/;padding:1rem 1rem 0;margin-top:0.5rem}.additional-guest-fields_container h4{margin-bottom:0.5rem}.additional-guest-fields_emailAddressField,.additional-guest-fields_firstNameField,.additional-guest-fields_lastNameField{width:calc(45% - 1.75rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .additional-guest-fields_emailAddressField,html[dir=rtl] .additional-guest-fields_firstNameField,html[dir=rtl] .additional-guest-fields_lastNameField{margin:0 0 1rem 1rem}@media (max-width: 767px){.additional-guest-fields_emailAddressField,.additional-guest-fields_firstNameField,.additional-guest-fields_lastNameField{width:calc(100% - 2.5rem)}}.additional-guest-fields_emailAddressField{width:calc(88% - 1.75rem)}@media (max-width: 767px){.additional-guest-fields_emailAddressField{width:calc(100% - 2.5rem)}}.additional-guest-fields_removeButton{display:inline-block;vertical-align:top;line-height:/@input.height@/;margin-bottom:1rem}\n",""]),n.locals={container:"additional-guest-fields_container",emailAddressField:"additional-guest-fields_emailAddressField",firstNameField:"additional-guest-fields_firstNameField",lastNameField:"additional-guest-fields_lastNameField",removeButton:"additional-guest-fields_removeButton"},e.exports=n},1749:function(e,t,r){var n=r(1750),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1750:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".additional-guests_container{display:block}.additional-guests_addGuestsButton{margin-top:0.5rem;padding:1rem;background:/@background.style2@/;border-radius:/@border.radius@/}\n",""]),n.locals={container:"additional-guests_container",addGuestsButton:"additional-guests_addGuestsButton"},e.exports=n},1751:function(e,t,r){var n=r(1752),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1752:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-loyalty-fields_container{padding:1rem 1rem 0;background:/@background.style2@/;border-radius:/@border.radius@/;margin:1rem 0 -0.5rem}.guest-loyalty-fields_programNumber,.guest-loyalty-fields_selectProgramField{width:calc(50% - 1.75rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .guest-loyalty-fields_programNumber,html[dir=rtl] .guest-loyalty-fields_selectProgramField{margin:0 0 1rem 1rem}@media (max-width: 767px){.guest-loyalty-fields_programNumber,.guest-loyalty-fields_selectProgramField{width:calc(100% - 2.5rem)}}.guest-loyalty-fields_removeButton{width:1.5rem;display:inline-block;vertical-align:top;line-height:/@input.height@/;margin-bottom:1rem}\n",""]),n.locals={container:"guest-loyalty-fields_container",programNumber:"guest-loyalty-fields_programNumber",selectProgramField:"guest-loyalty-fields_selectProgramField",removeButton:"guest-loyalty-fields_removeButton"},e.exports=n},1753:function(e,t,r){var n=r(1754),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1754:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-loyalty_addLoyaltyButton{margin-top:1rem;padding:1rem;background:/@background.style2@/;border-radius:/@border.radius@/}\n",""]),n.locals={addLoyaltyButton:"guest-loyalty_addLoyaltyButton"},e.exports=n},1755:function(e,t,r){var n=r(1756),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1756:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-password_container h3{margin-bottom:1rem}.guest-password_passwordInstructions{color:/@font.colorLight@/;font-size:0.85rem;margin:0.5rem 0 1rem}.guest-password_createPasswordField,.guest-password_passwordConfirmField{width:calc(50% - 1rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .guest-password_createPasswordField,html[dir=rtl] .guest-password_passwordConfirmField{margin:0 0 1rem 1rem}@media (max-width: 767px){.guest-password_createPasswordField,.guest-password_passwordConfirmField{width:100%;margin:0 0 1rem}}.guest-password_createPasswordField{margin-bottom:0}.guest-password_createAccountCheckbox{margin-bottom:1rem}\n",""]),n.locals={container:"guest-password_container",passwordInstructions:"guest-password_passwordInstructions",createPasswordField:"guest-password_createPasswordField",passwordConfirmField:"guest-password_passwordConfirmField",createAccountCheckbox:"guest-password_createAccountCheckbox"},e.exports=n},1757:function(e,t,r){var n=r(1758),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1758:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-profile-preferences_container p{margin-bottom:1rem}.guest-profile-preferences_checkboxSection{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:flex-start;align-items:stretch;margin-top:1rem}@media (max-width: 767px){.guest-profile-preferences_checkboxSection{display:block}}.guest-profile-preferences_checkboxSection li{list-style:none;margin:0 0 0 0;flex:50%}html[dir=rtl] .guest-profile-preferences_checkboxSection li{margin:0 0 0 0}.guest-profile-preferences_checkboxSectionButton{margin-bottom:1rem}.guest-profile-preferences_commentArea{display:block;margin-top:1rem}\n",""]),n.locals={container:"guest-profile-preferences_container",checkboxSection:"guest-profile-preferences_checkboxSection",checkboxSectionButton:"guest-profile-preferences_checkboxSectionButton",commentArea:"guest-profile-preferences_commentArea"},e.exports=n},1759:function(e,t,r){var n=r(1760),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1760:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".address-details_addressInfo{margin-top:2rem}@media (min-width: 768px){html[dir=ltr] .address-details_addressInfo{margin-right:-1rem}html[dir=rtl] .address-details_addressInfo{margin-left:-1rem}}.address-details_addressInfo h3{margin:0 0 1rem}.address-details_addressFields{display:block}.address-details_addressField1,.address-details_addressField2,.address-details_cityField,.address-details_countryField,.address-details_searchAddressField,.address-details_stateProvinceField,.address-details_zipPostalCodeField{width:calc(50% - 1rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .address-details_addressField1,html[dir=rtl] .address-details_addressField2,html[dir=rtl] .address-details_cityField,html[dir=rtl] .address-details_countryField,html[dir=rtl] .address-details_searchAddressField,html[dir=rtl] .address-details_stateProvinceField,html[dir=rtl] .address-details_zipPostalCodeField{margin:0 0 1rem 1rem}@media (max-width: 767px){.address-details_addressField1,.address-details_addressField2,.address-details_cityField,.address-details_countryField,.address-details_searchAddressField,.address-details_stateProvinceField,.address-details_zipPostalCodeField{width:100%;margin:0 0 1rem}}.address-details_stateProvinceField,.address-details_zipPostalCodeField{width:calc(25% - 1rem)}@media (max-width: 767px){.address-details_stateProvinceField,.address-details_zipPostalCodeField{width:100%}}.address-details_cityField+.sr-only{display:inline-block}\n",""]),n.locals={addressInfo:"address-details_addressInfo",addressFields:"address-details_addressFields",addressField1:"address-details_addressField1",addressField2:"address-details_addressField2",cityField:"address-details_cityField",countryField:"address-details_countryField",searchAddressField:"address-details_searchAddressField",stateProvinceField:"address-details_stateProvinceField",zipPostalCodeField:"address-details_zipPostalCodeField"},e.exports=n},1761:function(e,t,r){var n=r(1762),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1762:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".travel-documents-details_travelDocuments{margin-top:2rem}@media (min-width: 768px){html[dir=ltr] .travel-documents-details_travelDocuments{margin-right:-1rem}html[dir=rtl] .travel-documents-details_travelDocuments{margin-left:-1rem}}.travel-documents-details_travelDocuments h3{margin:0 0 1rem}.travel-documents-details_travelDocuments p:last-child{margin-bottom:1rem}.travel-documents-details_travelDocumentNumber,.travel-documents-details_travelDocumentType{width:calc(50% - 1rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .travel-documents-details_travelDocumentNumber,html[dir=rtl] .travel-documents-details_travelDocumentType{margin:0 0 1rem 1rem}@media (max-width: 767px){.travel-documents-details_travelDocumentNumber,.travel-documents-details_travelDocumentType{width:100%;margin:0 0 1rem}}\n",""]),n.locals={travelDocuments:"travel-documents-details_travelDocuments",travelDocumentNumber:"travel-documents-details_travelDocumentNumber",travelDocumentType:"travel-documents-details_travelDocumentType"},e.exports=n},1763:function(e,t,r){var n=r(1764),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1764:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".billing-address-not-editable_billingAddress{width:calc(50% - 2.3em);background:/@background.style2@/;padding:1rem;margin:0 0 0 2.3em}html[dir=rtl] .billing-address-not-editable_billingAddress{margin:0 2.3em 0 0}@media (max-width: 767px){.billing-address-not-editable_billingAddress{width:100%;margin:0 0 1rem}}.billing-address-not-editable_name{font-weight:/@font.bold@/}.billing-address-not-editable_address,.billing-address-not-editable_cityPostalCode{display:block}\n",""]),n.locals={billingAddress:"billing-address-not-editable_billingAddress",name:"billing-address-not-editable_name",address:"billing-address-not-editable_address",cityPostalCode:"billing-address-not-editable_cityPostalCode"},e.exports=n},1765:function(e,t,r){var n=r(1766),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1766:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".billing-address-details_container h3{margin:0 0 1rem}.billing-address-details_container p{margin-bottom:1rem}.billing-address-details_addressFieldGroup{display:block}.billing-address-details_copyVATAddress{display:block}.billing-address-details_addressField1,.billing-address-details_addressField2,.billing-address-details_cityField,.billing-address-details_companyName,.billing-address-details_countryField,.billing-address-details_emailAddress,.billing-address-details_faxNumberField,.billing-address-details_phoneNumberField,.billing-address-details_searchAddressField,.billing-address-details_stateProvinceField,.billing-address-details_vatNumber,.billing-address-details_zipPostalCodeField{width:calc(50% - 1rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .billing-address-details_addressField1,html[dir=rtl] .billing-address-details_addressField2,html[dir=rtl] .billing-address-details_cityField,html[dir=rtl] .billing-address-details_companyName,html[dir=rtl] .billing-address-details_countryField,html[dir=rtl] .billing-address-details_emailAddress,html[dir=rtl] .billing-address-details_faxNumberField,html[dir=rtl] .billing-address-details_phoneNumberField,html[dir=rtl] .billing-address-details_searchAddressField,html[dir=rtl] .billing-address-details_stateProvinceField,html[dir=rtl] .billing-address-details_vatNumber,html[dir=rtl] .billing-address-details_zipPostalCodeField{margin:0 0 1rem 1rem}@media (max-width: 767px){.billing-address-details_addressField1,.billing-address-details_addressField2,.billing-address-details_cityField,.billing-address-details_companyName,.billing-address-details_countryField,.billing-address-details_emailAddress,.billing-address-details_faxNumberField,.billing-address-details_phoneNumberField,.billing-address-details_searchAddressField,.billing-address-details_stateProvinceField,.billing-address-details_vatNumber,.billing-address-details_zipPostalCodeField{width:100%;margin:0 0 1rem}}.billing-address-details_stateProvinceField,.billing-address-details_zipPostalCodeField{width:calc(25% - 1rem);vertical-align:top}@media (max-width: 767px){.billing-address-details_stateProvinceField,.billing-address-details_zipPostalCodeField{width:100%}}\n",""]),n.locals={container:"billing-address-details_container",addressFieldGroup:"billing-address-details_addressFieldGroup",copyVATAddress:"billing-address-details_copyVATAddress",addressField1:"billing-address-details_addressField1",addressField2:"billing-address-details_addressField2",cityField:"billing-address-details_cityField",companyName:"billing-address-details_companyName",countryField:"billing-address-details_countryField",emailAddress:"billing-address-details_emailAddress",faxNumberField:"billing-address-details_faxNumberField",phoneNumberField:"billing-address-details_phoneNumberField",searchAddressField:"billing-address-details_searchAddressField",stateProvinceField:"billing-address-details_stateProvinceField",vatNumber:"billing-address-details_vatNumber",zipPostalCodeField:"billing-address-details_zipPostalCodeField"},e.exports=n},1767:function(e,t,r){var n=r(1768),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1768:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".payment-schedule-selection_tabOptions{display:flex;margin:0 1rem 1rem 0}html[dir=rtl] .payment-schedule-selection_tabOptions{margin:0 0 1rem 1rem}@media (max-width: 767px){.payment-schedule-selection_tabOptions{justify-content:space-between;margin:0 0 1rem}}.payment-schedule-selection_tabButton{cursor:pointer;font-size:1rem;color:inherit;background:/@background.style1@/;border:1px solid /@border.color.style2@/;border-bottom-width:2px;flex-basis:25%}@media (min-width: 768px){.payment-schedule-selection_tabButton{padding:1rem}}@media (max-width: 767px){.payment-schedule-selection_tabButton{padding:1rem 0.5rem;flex-grow:1}}.payment-schedule-selection_tabButton:first-child{border-top-left-radius:/@button.primary.borderRadius@/;border-bottom-left-radius:/@button.primary.borderRadius@/;border-top-right-radius:0;border-bottom-right-radius:0}html[dir=rtl] .payment-schedule-selection_tabButton:first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:/@button.primary.borderRadius@/;border-bottom-right-radius:/@button.primary.borderRadius@/}.payment-schedule-selection_tabButton:last-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:/@button.primary.borderRadius@/;border-bottom-right-radius:/@button.primary.borderRadius@/}html[dir=rtl] .payment-schedule-selection_tabButton:last-child{border-top-left-radius:/@button.primary.borderRadius@/;border-bottom-left-radius:/@button.primary.borderRadius@/;border-top-right-radius:0;border-bottom-right-radius:0}.payment-schedule-selection_tabButton.payment-schedule-selection_selected{background:/@background.style3@/;border-color:/@background.style3@/;color:/@font.colorAlternate@/;font-weight:/@font.bold@/}.payment-schedule-selection_tabButton:focus{outline:0;box-shadow:0 0 0 2px /@background.style1@/,0 0 0 6px /@font.colorLight@/;z-index:1}.payment-schedule-selection_tabContent{position:relative;min-height:3rem}.payment-schedule-selection_tabContent>p{margin-bottom:1rem}.payment-schedule-selection_tabSpinnerBackground{position:absolute;background:/@background.style1@/;opacity:0.8;top:0;bottom:0;right:0;left:0;z-index:3}.payment-schedule-selection_payNowAmount{color:/@message.success.color@/;font-weight:/@font.bold@/}\n",""]),n.locals={tabOptions:"payment-schedule-selection_tabOptions",tabButton:"payment-schedule-selection_tabButton",selected:"payment-schedule-selection_selected",tabContent:"payment-schedule-selection_tabContent",tabSpinnerBackground:"payment-schedule-selection_tabSpinnerBackground",payNowAmount:"payment-schedule-selection_payNowAmount"},e.exports=n},1769:function(e,t,r){var n=r(1770),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1770:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".payment-radio-button_container{border-bottom:1px solid /@border.color.style2@/}.payment-radio-button_container:last-child{border-bottom:0}.payment-radio-button_header{padding:1rem}.payment-radio-button_header label{margin:0;font-weight:/@font.bold@/}.payment-radio-button_content{background:linear-gradient(to bottom, rgba(0,0,0,0.1) 0, rgba(0,0,0,0) 1rem),linear-gradient(to top, rgba(0,0,0,0.1) 0, rgba(0,0,0,0) 1rem);border-top:1px solid /@border.color.style2@/;padding:1rem}.payment-radio-button_content:empty{display:none}\n",""]),n.locals={container:"payment-radio-button_container",header:"payment-radio-button_header",content:"payment-radio-button_content"},e.exports=n},1771:function(e,t,r){var n=r(1772),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1772:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".payment-cvv-field_cvvField{width:calc(40% - 1rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top;position:relative}html[dir=rtl] .payment-cvv-field_cvvField{margin:0 0 1rem 1rem}@media (max-width: 767px){.payment-cvv-field_cvvField{width:100%;margin:0 0 1rem}}.payment-cvv-field_cvvField.payment-cvv-field_cvvFieldSavedCC{width:calc(100% - 1rem)}@media (max-width: 767px){.payment-cvv-field_cvvField.payment-cvv-field_cvvFieldSavedCC{width:100%;margin:0 0 1rem}}.payment-cvv-field_cvvField.payment-cvv-field_cvvFieldInModal .payment-cvv-field_cvvInfo{display:none}.payment-cvv-field_cvvInfo,.payment-cvv-field_cvvInfo:active,.payment-cvv-field_cvvInfo:focus,.payment-cvv-field_cvvInfo:hover{position:absolute;z-index:2;top:0;line-height:/@input.height@/;color:/@input.color@/;border-bottom:0}html[dir=ltr] .payment-cvv-field_cvvInfo,html[dir=ltr] .payment-cvv-field_cvvInfo:active,html[dir=ltr] .payment-cvv-field_cvvInfo:focus,html[dir=ltr] .payment-cvv-field_cvvInfo:hover{right:10px}html[dir=rtl] .payment-cvv-field_cvvInfo,html[dir=rtl] .payment-cvv-field_cvvInfo:active,html[dir=rtl] .payment-cvv-field_cvvInfo:focus,html[dir=rtl] .payment-cvv-field_cvvInfo:hover{left:10px}.payment-cvv-field_cvvInfo:focus,.payment-cvv-field_cvvInfo:active:focus,.payment-cvv-field_cvvInfo:focus:focus,.payment-cvv-field_cvvInfo:hover:focus{outline:1px dotted /@input.color@/}.payment-cvv-field_cvvInfo>span::after,.payment-cvv-field_cvvInfo:active>span::after,.payment-cvv-field_cvvInfo:focus>span::after,.payment-cvv-field_cvvInfo:hover>span::after{display:inline-block;line-height:1em;font-family:'spark-icon-line';font-size:1em;vertical-align:baseline;font-weight:normal;content:\"\\F188\"}html[dir=ltr] .payment-cvv-field_cvvInfo>span::after,html[dir=ltr] .payment-cvv-field_cvvInfo:active>span::after,html[dir=ltr] .payment-cvv-field_cvvInfo:focus>span::after,html[dir=ltr] .payment-cvv-field_cvvInfo:hover>span::after{margin-left:.25em}html[dir=rtl] .payment-cvv-field_cvvInfo>span::after,html[dir=rtl] .payment-cvv-field_cvvInfo:active>span::after,html[dir=rtl] .payment-cvv-field_cvvInfo:focus>span::after,html[dir=rtl] .payment-cvv-field_cvvInfo:hover>span::after{margin-right:.25em}.payment-cvv-field_cvvInfo>span::after,.payment-cvv-field_cvvInfo:active>span::after,.payment-cvv-field_cvvInfo:focus>span::after,.payment-cvv-field_cvvInfo:hover>span::after{font-size:18px;font-weight:normal;text-decoration:none}\n",""]),n.locals={cvvField:"payment-cvv-field_cvvField",cvvFieldSavedCC:"payment-cvv-field_cvvFieldSavedCC",cvvFieldInModal:"payment-cvv-field_cvvFieldInModal",cvvInfo:"payment-cvv-field_cvvInfo"},e.exports=n},1773:function(e,t,r){var n=r(1774),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1774:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-payment-create_paymentSelection{width:calc(50% + 0.5rem)}@media (max-width: 767px){.guest-payment-create_paymentSelection{width:100%}}.guest-payment-create_ccimageContainer{margin:0 1rem .5rem 0;display:flex;align-items:center;flex-wrap:wrap}html[dir=rtl] .guest-payment-create_ccimageContainer{margin:0 0 .5rem 1rem}.guest-payment-create_ccimageContainer img{height:auto;width:45px;display:inline-block;margin:0 .85rem .5rem 0}html[dir=rtl] .guest-payment-create_ccimageContainer img{margin:0 0 .5rem .85rem}.guest-payment-create_cardNumberField,.guest-payment-create_installmentContainer,.guest-payment-create_nameField{width:calc(100% - 1rem);display:block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .guest-payment-create_cardNumberField,html[dir=rtl] .guest-payment-create_installmentContainer,html[dir=rtl] .guest-payment-create_nameField{margin:0 0 1rem 1rem}@media (max-width: 767px){.guest-payment-create_cardNumberField,.guest-payment-create_installmentContainer,.guest-payment-create_nameField{width:100%;margin:0 0 1rem}}.guest-payment-create_ccard{color:/@input.color@/;line-height:/@input.height@/}.guest-payment-create_ccard::before{display:inline-block;line-height:1em;font-family:'spark-icon-fill';font-size:1em;vertical-align:baseline;font-weight:normal;content:\"\\F126\"}html[dir=ltr] .guest-payment-create_ccard::before{margin-right:.25em}html[dir=rtl] .guest-payment-create_ccard::before{margin-left:.25em}.guest-payment-create_ccard::before{font-size:24px}.guest-payment-create_selectedCard{position:absolute;z-index:2;top:0;line-height:/@input.height@/}html[dir=ltr] .guest-payment-create_selectedCard{left:10px}html[dir=rtl] .guest-payment-create_selectedCard{right:10px}.guest-payment-create_selectedCard img{width:24px;height:auto}.guest-payment-create_expDateField{width:calc(60% - 1rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .guest-payment-create_expDateField{margin:0 0 1rem 1rem}@media (max-width: 767px){.guest-payment-create_expDateField{width:100%;margin:0 0 1rem}}.guest-payment-create_surchargeMessage{width:calc(100% - 1rem);vertical-align:top}@media (max-width: 767px){.guest-payment-create_surchargeMessage{width:100%}}.guest-payment-create_icon{position:absolute;z-index:2;top:50%;color:/@input.color@/;border-bottom:0;transform:translateY(-50%)}html[dir=ltr] .guest-payment-create_icon{right:10px}html[dir=rtl] .guest-payment-create_icon{left:10px}.guest-payment-create_icon .guest-payment-create_iconSuccess{color:/@message.success.color@/}.guest-payment-create_icon .guest-payment-create_iconSuccess::after{display:inline-block;line-height:1em;font-family:'spark-icon-fill';font-size:1em;vertical-align:baseline;font-weight:normal;content:\"\\F178\"}html[dir=ltr] .guest-payment-create_icon .guest-payment-create_iconSuccess::after{margin-left:.25em}html[dir=rtl] .guest-payment-create_icon .guest-payment-create_iconSuccess::after{margin-right:.25em}.guest-payment-create_icon .guest-payment-create_iconSuccess::after{font-size:24px;font-weight:normal;text-decoration:none}.guest-payment-create_paymentInstallments{display:block}.guest-payment-create_paymentInstallmentsSelectionMessage{width:calc(100% - 1rem)}@media (max-width: 767px){.guest-payment-create_paymentInstallmentsSelectionMessage{width:100%}}.guest-payment-create_installmentContainer ul li{border:1px solid /@border.color.style2@/;border-radius:/@border.radius@/;list-style:none;margin:0 0 0.5rem}.guest-payment-create_installmentContainer ul li:last-child{margin:0}.guest-payment-create_installmentContainer ul li label{margin:0.75rem}.guest-payment-create_payInstallDescription{padding:1rem 0 0;font-size:/@font.smallerSize@/}.guest-payment-create_payInstallDescription .guest-payment-create_payInstallSuccess{color:/@message.success.color@/;font-weight:/@font.bold@/}\n",""]),n.locals={paymentSelection:"guest-payment-create_paymentSelection",ccimageContainer:"guest-payment-create_ccimageContainer",cardNumberField:"guest-payment-create_cardNumberField",installmentContainer:"guest-payment-create_installmentContainer",nameField:"guest-payment-create_nameField",ccard:"guest-payment-create_ccard",selectedCard:"guest-payment-create_selectedCard",expDateField:"guest-payment-create_expDateField",surchargeMessage:"guest-payment-create_surchargeMessage",icon:"guest-payment-create_icon",iconSuccess:"guest-payment-create_iconSuccess",paymentInstallments:"guest-payment-create_paymentInstallments",paymentInstallmentsSelectionMessage:"guest-payment-create_paymentInstallmentsSelectionMessage",payInstallDescription:"guest-payment-create_payInstallDescription",payInstallSuccess:"guest-payment-create_payInstallSuccess"},e.exports=n},1775:function(e,t,r){var n=r(1776),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1776:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,'@media (min-width: 768px){html[dir=ltr] .payment-select-fop_creditCardsContainer{margin-right:-1rem}html[dir=rtl] .payment-select-fop_creditCardsContainer{margin-left:-1rem}}.payment-select-fop_savedCardsContainer{width:50%;padding:0 .5rem 1rem 0}html[dir=rtl] .payment-select-fop_savedCardsContainer{padding:0 0 1rem .5rem}@media (max-width: 767px){.payment-select-fop_savedCardsContainer{width:100%;padding:0 0 1rem}}.payment-select-fop_savedCardsButton{background:/@background.style1@/;color:inherit;font-family:inherit;padding:1rem 3rem 1rem 1rem;font-size:1rem;display:block;text-align:left;border-radius:/@border.radius@/;border:1px solid /@border.color.style2@/;width:100%;z-index:1;position:relative;cursor:pointer}html[dir=rtl] .payment-select-fop_savedCardsButton{text-align:right}.payment-select-fop_savedCardsButton .payment-select-fop_savedCCDetails{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.payment-select-fop_savedCardsButton.payment-select-fop_dataError{border-color:/@message.error.color@/}.payment-select-fop_savedCardsButton .payment-select-fop_caret{position:absolute;top:50%;transform:translateY(-50%)}html[dir=ltr] .payment-select-fop_savedCardsButton .payment-select-fop_caret{right:1rem}html[dir=rtl] .payment-select-fop_savedCardsButton .payment-select-fop_caret{left:1rem}.payment-select-fop_savedCardsButton .payment-select-fop_caret::after{display:inline-block;line-height:1em;font-family:\'spark-icon-fill\';font-size:1em;vertical-align:baseline;font-weight:normal;content:"\\F10F"}html[dir=ltr] .payment-select-fop_savedCardsButton .payment-select-fop_caret::after{margin-left:.25em}html[dir=rtl] .payment-select-fop_savedCardsButton .payment-select-fop_caret::after{margin-right:.25em}.payment-select-fop_savedCardsButton .payment-select-fop_caret::after{font-size:1.4rem}.payment-select-fop_savedCardsButton .payment-select-fop_caretUp::after{display:inline-block;line-height:1em;font-family:\'spark-icon-fill\';font-size:1em;vertical-align:baseline;font-weight:normal;content:"\\F112"}html[dir=ltr] .payment-select-fop_savedCardsButton .payment-select-fop_caretUp::after{margin-left:.25em}html[dir=rtl] .payment-select-fop_savedCardsButton .payment-select-fop_caretUp::after{margin-right:.25em}.payment-select-fop_savedCardsButton .payment-select-fop_caretUp::after{font-size:1.4rem}.payment-select-fop_savedCardsButton:focus{outline:3px solid /@font.colorLight@/}.payment-select-fop_savedCardsButton[aria-expanded="true"]{border-bottom-left-radius:0;border-bottom-right-radius:0}.payment-select-fop_dropdownWrapper{border:1px solid /@border.color.style2@/;border-top:0;background:linear-gradient(to bottom, rgba(0,0,0,0.1) 0, rgba(0,0,0,0) 1rem);border-radius:/@border.radius@/;border-top-left-radius:0;border-top-right-radius:0;padding:0.5rem 0}.payment-select-fop_dropdownWrapper hr{margin:0.5rem 1rem}.payment-select-fop_dropdownSubtitle{padding:0.5rem 1rem;font-size:/@font.smallerSize@/;text-transform:uppercase}.payment-select-fop_dropdown{list-style:none;margin:0;width:100%}.payment-select-fop_dropdown>li{display:block;position:relative;cursor:pointer;padding:0.5rem 1rem;margin:0 0 0 0}html[dir=rtl] .payment-select-fop_dropdown>li{margin:0 0 0 0}.payment-select-fop_dropdown>li.payment-select-fop_savedCreditCard{display:flex;align-items:center;justify-content:space-between}.payment-select-fop_dropdown>li.payment-select-fop_savedCreditCard .payment-select-fop_savedCCDetails{display:flex;align-items:flex-start;justify-content:flex-start}.payment-select-fop_dropdown>li.payment-select-fop_savedCreditCard .payment-select-fop_savedCCDetails .payment-select-fop_savedCCExpDate,.payment-select-fop_dropdown>li.payment-select-fop_savedCreditCard .payment-select-fop_savedCCDetails .payment-select-fop_savedCCName,.payment-select-fop_dropdown>li.payment-select-fop_savedCreditCard .payment-select-fop_savedCCDetails .payment-select-fop_savedCCNumber{display:inline-block}.payment-select-fop_dropdown>li[data-selected=true]::after{display:inline-block;line-height:1em;font-family:\'spark-icon-fill\';font-size:1em;vertical-align:baseline;font-weight:normal;content:"\\F178"}html[dir=ltr] .payment-select-fop_dropdown>li[data-selected=true]::after{margin-left:.25em}html[dir=rtl] .payment-select-fop_dropdown>li[data-selected=true]::after{margin-right:.25em}.payment-select-fop_dropdown>li[data-selected=true]::after{color:/@message.success.color@/;position:absolute;z-index:2;top:50%;transform:translateY(-50%);font-size:24px;font-weight:normal}html[dir=ltr] .payment-select-fop_dropdown>li[data-selected=true]::after{right:1rem}html[dir=rtl] .payment-select-fop_dropdown>li[data-selected=true]::after{left:1rem}.payment-select-fop_dropdown>li:hover{background:/@background.style2@/;color:/@font.color@/}.payment-select-fop_dropdown>li:focus:not(.payment-select-fop_amexWallet){background:/@background.style2@/;color:/@font.color@/;font-weight:/@font.bold@/;outline:3px solid /@font.colorLight@/;outline-offset:-3px}.payment-select-fop_dropdown>li.payment-select-fop_amexWallet:focus{outline:none}.payment-select-fop_ccImage{width:38px;height:auto;display:inline-block;vertical-align:middle}html[dir=ltr] .payment-select-fop_ccImage{margin-right:.5rem}html[dir=rtl] .payment-select-fop_ccImage{margin-left:.5rem}.payment-select-fop_savedCCNumber::before{display:inline-block;line-height:1em;font-family:\'spark-icon-fill\';font-size:1em;vertical-align:baseline;font-weight:normal;content:"\\F144"}html[dir=ltr] .payment-select-fop_savedCCNumber::before{margin-right:.25em}html[dir=rtl] .payment-select-fop_savedCCNumber::before{margin-left:.25em}.payment-select-fop_selectedIcon{color:/@message.success.color@/}.payment-select-fop_selectedIcon::after{display:inline-block;line-height:1em;font-family:\'spark-icon-fill\';font-size:1em;vertical-align:baseline;font-weight:normal;content:"\\F178"}html[dir=ltr] .payment-select-fop_selectedIcon::after{margin-left:.25em}html[dir=rtl] .payment-select-fop_selectedIcon::after{margin-right:.25em}.payment-select-fop_selectedIcon::after{font-size:24px;font-weight:normal}.payment-select-fop_newDebitCreditCard::before{display:inline-block;line-height:1em;font-family:\'spark-icon-fill\';font-size:1em;vertical-align:baseline;font-weight:normal;content:"\\F126"}html[dir=ltr] .payment-select-fop_newDebitCreditCard::before{margin-right:.25em}html[dir=rtl] .payment-select-fop_newDebitCreditCard::before{margin-left:.25em}.payment-select-fop_newDebitCreditCard::before{font-size:34px;vertical-align:middle}.payment-select-fop_paymentRadioButtonsWrapper{border:1px solid /@border.color.style2@/;border-radius:/@border.radius@/}.payment-select-fop_altPaymentWarning{width:100%;margin:0 1rem 0 0}\n',""]),n.locals={creditCardsContainer:"payment-select-fop_creditCardsContainer",savedCardsContainer:"payment-select-fop_savedCardsContainer",savedCardsButton:"payment-select-fop_savedCardsButton",savedCCDetails:"payment-select-fop_savedCCDetails",dataError:"payment-select-fop_dataError",caret:"payment-select-fop_caret",caretUp:"payment-select-fop_caretUp",dropdownWrapper:"payment-select-fop_dropdownWrapper",dropdownSubtitle:"payment-select-fop_dropdownSubtitle",dropdown:"payment-select-fop_dropdown",savedCreditCard:"payment-select-fop_savedCreditCard",savedCCExpDate:"payment-select-fop_savedCCExpDate",savedCCName:"payment-select-fop_savedCCName",savedCCNumber:"payment-select-fop_savedCCNumber",amexWallet:"payment-select-fop_amexWallet",ccImage:"payment-select-fop_ccImage",selectedIcon:"payment-select-fop_selectedIcon",newDebitCreditCard:"payment-select-fop_newDebitCreditCard",paymentRadioButtonsWrapper:"payment-select-fop_paymentRadioButtonsWrapper",altPaymentWarning:"payment-select-fop_altPaymentWarning"},e.exports=n},1777:function(e,t,r){var n=r(1778),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1778:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-payment_container>h2{margin-bottom:1rem}.guest-payment_payNowAmount{color:/@message.success.color@/;font-weight:/@font.bold@/}\n",""]),n.locals={container:"guest-payment_container",payNowAmount:"guest-payment_payNowAmount"},e.exports=n},1779:function(e,t,r){var n=r(1780),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1780:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".transportation-info_container{margin-top:1rem;padding:1rem 1rem 0;background:/@background.style2@/;border-radius:/@border.radius@/}.transportation-info_container p{font-size:/@font.smallerSize@/;margin:0 0 1rem}.transportation-info_arrivalContainerHeader{display:flex;justify-content:space-between;margin:0 1rem 1rem 0}html[dir=rtl] .transportation-info_arrivalContainerHeader{margin:0 0 1rem 1rem}@media (max-width: 767px){.transportation-info_arrivalContainerHeader{margin:1rem 0}}html[dir=ltr] .transportation-info_arrivalContainerHeader>:first-child{margin-right:1rem}html[dir=rtl] .transportation-info_arrivalContainerHeader>:first-child{margin-left:1rem}.transportation-info_departureContainerHeader{margin:.5rem 1rem 1rem 0}html[dir=rtl] .transportation-info_departureContainerHeader{margin:.5rem 0 1rem 1rem}.transportation-info_arrivalAirlineField,.transportation-info_arrivalFlightNoField,.transportation-info_arrivalTerminal,.transportation-info_arrivalTimeField,.transportation-info_arrivalTrainNoField,.transportation-info_departureAirlineField,.transportation-info_departureFlightNoField,.transportation-info_departureTerminal,.transportation-info_departureTimeField,.transportation-info_departureTrainNoField,.transportation-info_arrivalTransportationTypeField,.transportation-info_departureTransportationTypeField{width:calc(50% - 1rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .transportation-info_arrivalAirlineField,html[dir=rtl] .transportation-info_arrivalFlightNoField,html[dir=rtl] .transportation-info_arrivalTerminal,html[dir=rtl] .transportation-info_arrivalTimeField,html[dir=rtl] .transportation-info_arrivalTrainNoField,html[dir=rtl] .transportation-info_departureAirlineField,html[dir=rtl] .transportation-info_departureFlightNoField,html[dir=rtl] .transportation-info_departureTerminal,html[dir=rtl] .transportation-info_departureTimeField,html[dir=rtl] .transportation-info_departureTrainNoField,html[dir=rtl] .transportation-info_arrivalTransportationTypeField,html[dir=rtl] .transportation-info_departureTransportationTypeField{margin:0 0 1rem 1rem}@media (max-width: 767px){.transportation-info_arrivalAirlineField,.transportation-info_arrivalFlightNoField,.transportation-info_arrivalTerminal,.transportation-info_arrivalTimeField,.transportation-info_arrivalTrainNoField,.transportation-info_departureAirlineField,.transportation-info_departureFlightNoField,.transportation-info_departureTerminal,.transportation-info_departureTimeField,.transportation-info_departureTrainNoField,.transportation-info_arrivalTransportationTypeField,.transportation-info_departureTransportationTypeField{width:100%;margin:0 0 1rem}}.transportation-info_arrivalAirlineField:empty,.transportation-info_arrivalFlightNoField:empty,.transportation-info_arrivalTerminal:empty,.transportation-info_arrivalTimeField:empty,.transportation-info_arrivalTrainNoField:empty,.transportation-info_departureAirlineField:empty,.transportation-info_departureFlightNoField:empty,.transportation-info_departureTerminal:empty,.transportation-info_departureTimeField:empty,.transportation-info_departureTrainNoField:empty,.transportation-info_arrivalTransportationTypeField:empty,.transportation-info_departureTransportationTypeField:empty{display:none}\n",""]),n.locals={container:"transportation-info_container",arrivalContainerHeader:"transportation-info_arrivalContainerHeader",departureContainerHeader:"transportation-info_departureContainerHeader",arrivalAirlineField:"transportation-info_arrivalAirlineField",arrivalFlightNoField:"transportation-info_arrivalFlightNoField",arrivalTerminal:"transportation-info_arrivalTerminal",arrivalTimeField:"transportation-info_arrivalTimeField",arrivalTrainNoField:"transportation-info_arrivalTrainNoField",departureAirlineField:"transportation-info_departureAirlineField",departureFlightNoField:"transportation-info_departureFlightNoField",departureTerminal:"transportation-info_departureTerminal",departureTimeField:"transportation-info_departureTimeField",departureTrainNoField:"transportation-info_departureTrainNoField",arrivalTransportationTypeField:"transportation-info_arrivalTransportationTypeField",departureTransportationTypeField:"transportation-info_departureTransportationTypeField"},e.exports=n},1781:function(e,t,r){var n=r(1782),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1782:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".marketing-consent_container{margin-top:1rem}.marketing-consent_content{display:flex;margin-top:1rem}@media (max-width: 767px){.marketing-consent_content{display:block}}html[dir=ltr] .marketing-consent_buttonWrapper{margin-right:1rem}html[dir=rtl] .marketing-consent_buttonWrapper{margin-left:1rem}@media (max-width: 767px){.marketing-consent_buttonWrapper{margin-bottom:1rem}}.marketing-consent_check::before{display:inline-block;line-height:1em;font-family:'spark-icon-fill';font-size:1em;vertical-align:baseline;font-weight:normal;content:\"\\F121\"}html[dir=ltr] .marketing-consent_check::before{margin-right:.25em}html[dir=rtl] .marketing-consent_check::before{margin-left:.25em}html[dir=ltr] .marketing-consent_check{margin-right:.5rem}html[dir=rtl] .marketing-consent_check{margin-left:.5rem}.marketing-consent_subscribed{display:flex;color:/@message.success.color@/;font-weight:/@font.bold@/}\n",""]),n.locals={container:"marketing-consent_container",content:"marketing-consent_content",buttonWrapper:"marketing-consent_buttonWrapper",check:"marketing-consent_check",subscribed:"marketing-consent_subscribed"},e.exports=n},1783:function(e,t,r){var n=r(1784),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1784:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-info_container h2,.guest-info_container h3,.guest-info_container h4{margin:0 0 1rem}.guest-info_container hr{margin:1.5rem 0}@media (min-width: 768px){html[dir=ltr] .guest-info_contactInfo{margin-right:-1rem}html[dir=rtl] .guest-info_contactInfo{margin-left:-1rem}}.guest-info_legend{width:100%}@media (min-width: 768px){html[dir=ltr] .guest-info_legend{padding-right:1rem}html[dir=rtl] .guest-info_legend{padding-left:1rem}}.guest-info_legend .guest-info_legendContent{display:flex;justify-content:space-between}.guest-info_collapsable{border:1px solid /@border.color.style1@/;padding:1rem;margin-bottom:1rem;border-radius:/@border.radius@/}.guest-info_collapsibleHeader::after{display:inline-block;line-height:1em;font-family:'spark-icon-fill';font-size:1em;vertical-align:baseline;font-weight:normal;content:\"\\F10F\"}html[dir=ltr] .guest-info_collapsibleHeader::after{margin-left:.25em}html[dir=rtl] .guest-info_collapsibleHeader::after{margin-right:.25em}.guest-info_expandedHeader::after{display:inline-block;line-height:1em;font-family:'spark-icon-fill';font-size:1em;vertical-align:baseline;font-weight:normal;content:\"\\F112\"}html[dir=ltr] .guest-info_expandedHeader::after{margin-left:.25em}html[dir=rtl] .guest-info_expandedHeader::after{margin-right:.25em}.guest-info_collapsibleHeader,.guest-info_expandedHeader{cursor:pointer;position:relative}.guest-info_collapsibleHeader:after,.guest-info_expandedHeader:after{position:absolute;top:50%;transform:translate(0, -50%);line-height:3.4rem;font-size:1.4rem;padding:0 1rem}html[dir=ltr] .guest-info_collapsibleHeader:after,html[dir=ltr] .guest-info_expandedHeader:after{right:-1rem}html[dir=rtl] .guest-info_collapsibleHeader:after,html[dir=rtl] .guest-info_expandedHeader:after{left:-1rem}.guest-info_prefixNameGroup{width:calc(50% - 1rem);display:inline-block;margin:0 1rem 1rem 0}html[dir=rtl] .guest-info_prefixNameGroup{margin:0 0 1rem 1rem}@media (max-width: 767px){.guest-info_prefixNameGroup{width:100%;display:block;margin:0 0 1rem}}.guest-info_emailAddressFieldGroup,.guest-info_lastNameField,.guest-info_middleInitialField,.guest-info_mobilePhoneNumberField,.guest-info_phoneNumberField,.guest-info_suffixField{width:calc(50% - 1rem);display:inline-block;margin:0 1rem 1rem 0;vertical-align:top}html[dir=rtl] .guest-info_emailAddressFieldGroup,html[dir=rtl] .guest-info_lastNameField,html[dir=rtl] .guest-info_middleInitialField,html[dir=rtl] .guest-info_mobilePhoneNumberField,html[dir=rtl] .guest-info_phoneNumberField,html[dir=rtl] .guest-info_suffixField{margin:0 0 1rem 1rem}@media (max-width: 767px){.guest-info_emailAddressFieldGroup,.guest-info_lastNameField,.guest-info_middleInitialField,.guest-info_mobilePhoneNumberField,.guest-info_phoneNumberField,.guest-info_suffixField{width:100%;margin:0 0 1rem}}.guest-info_prefixField{width:35%;display:inline-block;vertical-align:top}html[dir=ltr] .guest-info_prefixField .select_input{border-top-right-radius:0;border-bottom-right-radius:0}html[dir=rtl] .guest-info_prefixField .select_input{border-top-left-radius:0;border-bottom-left-radius:0}html[dir=ltr] .guest-info_prefixField .select_input{border-right-width:0}html[dir=rtl] .guest-info_prefixField .select_input{border-left-width:0}.guest-info_firstNameField:not(:first-child){width:65%;display:inline-block;vertical-align:top}html[dir=ltr] .guest-info_firstNameField:not(:first-child) input{border-top-left-radius:0;border-bottom-left-radius:0}html[dir=rtl] .guest-info_firstNameField:not(:first-child) input{border-top-right-radius:0;border-bottom-right-radius:0}.guest-info_middleInitialField,.guest-info_suffixField{width:calc(25% - 1rem)}@media (max-width: 767px){.guest-info_middleInitialField,.guest-info_suffixField{width:100%}}.guest-info_emailAddressFieldGroup{margin-bottom:0}.guest-info_emailConfirmationMessage{color:/@font.colorLight@/;font-size:0.85rem;margin-top:0.5rem}.guest-info_addGuestSection{display:block}.guest-info_additionalDetails h2{margin-bottom:0.5rem}.guest-info_loyaltyProgram,.guest-info_specialRequests,.guest-info_transportation{margin-top:1rem;clear:both;border:1px solid /@border.color.style2@/;padding:1rem;border-radius:/@border.radius@/}.guest-info_loyaltyProgram h3,.guest-info_loyaltyProgram h4,.guest-info_specialRequests h3,.guest-info_specialRequests h4,.guest-info_transportation h3,.guest-info_transportation h4{margin:0}.guest-info_addAdditionalGuestDetails .guest-info_additionalGuest{font-size:0.85rem;margin-top:0.5rem}.guest-info_applyToAllRooms{margin-top:1rem}\n",""]),n.locals={container:"guest-info_container",contactInfo:"guest-info_contactInfo",legend:"guest-info_legend",legendContent:"guest-info_legendContent",collapsable:"guest-info_collapsable",collapsibleHeader:"guest-info_collapsibleHeader",expandedHeader:"guest-info_expandedHeader",prefixNameGroup:"guest-info_prefixNameGroup",emailAddressFieldGroup:"guest-info_emailAddressFieldGroup",lastNameField:"guest-info_lastNameField",middleInitialField:"guest-info_middleInitialField",mobilePhoneNumberField:"guest-info_mobilePhoneNumberField",phoneNumberField:"guest-info_phoneNumberField",suffixField:"guest-info_suffixField",prefixField:"guest-info_prefixField",firstNameField:"guest-info_firstNameField",emailConfirmationMessage:"guest-info_emailConfirmationMessage",addGuestSection:"guest-info_addGuestSection",additionalDetails:"guest-info_additionalDetails",loyaltyProgram:"guest-info_loyaltyProgram",specialRequests:"guest-info_specialRequests",transportation:"guest-info_transportation",addAdditionalGuestDetails:"guest-info_addAdditionalGuestDetails",additionalGuest:"guest-info_additionalGuest",applyToAllRooms:"guest-info_applyToAllRooms"},e.exports=n},1785:function(e,t,r){var n=r(1786),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1786:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".room-accordion_container{border:1px solid /@border.color.style1@/;background:/@background.style1@/;border-radius:/@border.radius@/;margin-bottom:1rem;padding:1rem}.room-accordion_header .room-accordion_image img{border-radius:/@border.radius@/;width:100%;height:auto}.room-accordion_header .room-accordion_roomInfo{position:relative}html[dir=ltr] .room-accordion_header .room-accordion_roomInfo{padding-right:2rem}html[dir=rtl] .room-accordion_header .room-accordion_roomInfo{padding-left:2rem}.room-accordion_header .room-accordion_roomInfo button{position:absolute;top:0;bottom:0;left:0;right:0;width:100%}.room-accordion_header .room-accordion_roomInfo button span::after{position:absolute;top:1rem;font-size:1.4rem}html[dir=ltr] .room-accordion_header .room-accordion_roomInfo button span::after{right:.5rem}html[dir=rtl] .room-accordion_header .room-accordion_roomInfo button span::after{left:.5rem}.room-accordion_header .room-accordion_roomName{font-weight:/@font.bold@/}.room-accordion_header .room-accordion_rateName .room-accordion_reservationDates{font-weight:/@font.thin@/}.room-accordion_body{animation:room-accordion_fadeIn 0.5s}@keyframes room-accordion_fadeIn{from{opacity:0}to{opacity:1}}.room-accordion_hidden{display:none}\n",""]),n.locals={container:"room-accordion_container",header:"room-accordion_header",image:"room-accordion_image",roomInfo:"room-accordion_roomInfo",roomName:"room-accordion_roomName",rateName:"room-accordion_rateName",reservationDates:"room-accordion_reservationDates",body:"room-accordion_body",fadeIn:"room-accordion_fadeIn",hidden:"room-accordion_hidden"},e.exports=n},1795:function(e,t,r){var n=r(1796),o=r(17),i="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return i},t._getCss=function(){return""+n},t._insertCss=function(e){return o(i,e)}},1796:function(e,t,r){var n=r(16)((function(e){return e[1]}));n.push([e.i,".guest-info-container_section{padding-bottom:2rem}.guest-info-container_notAvailable{background:/@background.style2@/;border:1px solid /@border.color.style1@/;border-radius:/@border.radius@/;padding:1rem;margin-bottom:1rem}.guest-info-container_notAvailable h2{margin-bottom:1rem}.guest-info-container_signInButtonWrapper{margin-bottom:1rem}@media (max-width: 767px){.guest-info-container_bottomContinue{display:none}}\n",""]),n.locals={section:"guest-info-container_section",notAvailable:"guest-info-container_notAvailable",signInButtonWrapper:"guest-info-container_signInButtonWrapper",bottomContinue:"guest-info-container_bottomContinue"},e.exports=n},1948:function(e,t,r){"use strict";r.r(t);var n,o,i=r(616),a=r(4),s=r.n(a),l=r(8),d=r(1646),c=r(1),u=r(38),p=r(111),m=r(49),f=r(5),y=r(12),g=r(55),v=r(615),h=r(1685),b=r(378),C=r(1686),P=r(145),O=r(605),I=r(218),w=r(260),S=r(608),N=r(242),A=r(80),T=r(1741),D=r.n(T);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t,r,n){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=n;else if(a>1){for(var s=new Array(a),l=0;l<a;l++)s[l]=arguments[l+3];t.children=s}if(t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});return{$$typeof:o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===k(i)?i:String(i)),n)}var o,i}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var o=V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L,B,H,G,z=withStyles(D.a)(n=bindRedux([u.a,A.a,p.a,m.a,b.a],f)(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(i,Component);var t,r,n,o=M(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={emailOptInChecked:e.optIn,policyCheckBoxChecked:!1},t.createPolicyStatuses=t.createPolicyStatuses.bind(x(t)),t}return t=i,(r=[{key:"componentDidMount",value:function(){this.createPolicyStatuses()}},{key:"createPolicyStatuses",value:function(){var e={EmailOptInChecked:this.emailOptInChecked||!1,PoliciesAcknowledged:this.policiesAcknowledged||!1};this.props.getPolicyStatuses(e)}},{key:"renderPolicies",value:function(){var e=this.props,t=e.configData,r=e.currentUrlParams,n=e.displayLocale,o=e.selectedCurrency,i=void 0===o?{}:o,a=e.hotelAndChainLevelDetails,s=a.HotelLocalTime,l=a.HotelTimeZone,u=e.reservations,p=e.hotelDetails,m=_.get(r,"agencyid"),f=_.get(t,"showRoomCategories"),y=_.get(t,"showIcons.guarantee.instantHold");return u.map((function(e,r){var o=e.BookingDues,a=e.BookingPolicy,u=e.RoomName,g=_.get(a,"DepositFee.DueType"),v=_.get(o,"Deposit.Amount")+Object(P.c)(e),b=_.get(e,"CommissionPolicy",{}),A=f?_.get(e,"extrasFromShopping.roomCategoryName"):"",T=Object(O.b)({roomNumber:r+1,RoomName:u,roomCategoryName:A}),k=y&&Object(I.f)(a),R=_.get(e,"BookingDate",{}),E=_.find(R,(function(e){return"OriginatingChannel"===_.get(e,"Type","")})),M=_.find(R,(function(e){return"EntryChannel"===_.get(e,"Type","")})),j=_.get(E,"Value",""),x=_.get(M,"Value",""),V=_.get(t,"isStoredStatusEnabled",!1)?x:j;return F("div",{className:D.a.perRoom},r,F("h3",{className:"app_subheading1"},void 0,React.createElement(FormattedMessage,T)),F("div",{className:D.a.guaranteePolicy},void 0,F("h4",{className:"app_subheading2"},void 0,F(FormattedMessage,{id:"productDetailView.sectionHeader.guaranteePolicy",defaultMessage:"##productDetailView.sectionHeader.guaranteePolicy##"})),F(w.a,{condition:k},void 0,F(S.a,{bold:!0,highlighted:!0,icon:"check",label:"productIcons.label.instantHold"})),F("span",{dangerouslySetInnerHTML:{__html:Object(c.O)(_.get(a,"Description"))}})," ",Boolean(t.displayProductDepositAmount&&g&&!/none/i.test(g))&&F(d.a,{arrive:e.StartDate,bookingDate:V,guaranteeDueDate:_.get(e.BookingDues,"Deposit.DueDate"),currencyCode:e.CurrencyCode,dueType:a.DepositFee.DueType,guaranteeAmount:v,hotelDetails:p})),F(C.a,{styles:D.a,reservation:e}),F(h.a,{displayInstantHoldMessage:y,displayLocale:n,displayProductCancelAmount:t.displayProductCancelAmount,hotelLocalTime:s,hotelTimeZone:l,reservation:e,styles:D.a}),!_.isEmpty(b)&&!_.isEmpty(m)&&F("div",{className:D.a.commissionPolicy},void 0,F("h4",{className:"app_subheading2"},void 0,F(FormattedMessage,{id:"commissionPolicy.sectionHeader.commissionPolicyForTravelAgents"})),F(N.a,{commissionPolicy:b,travelIndustryId:m,originalCurrency:e.CurrencyCode,displayCurrency:i,styles:D.a})))}))}},{key:"renderFullPolicyModal",value:function(){var e=this.props,t=e.configData,r=e.workflowMessage,n=_.get(r,"ChildrenPolicy"),o=_.get(t,"enableDayUse",!1);return F(g.a,{showCloseBtn:!1,dialog:!0,ariaLabelledBy:"guest-policies-header"},void 0,F("h2",{className:"app_modalTitle ".concat(D.a.policiesModalHeading),id:"guest-policies-header"},void 0,F(FormattedMessage,{id:"guestPolicies.title.policies",defaultMessage:"##guestPolicies.title.policies##"})),F(v.a,{hotelDetails:e.hotelDetails,styles:D.a,selectedLanguage:e.selectedLanguage,isSingleDayUse:o}),this.renderPolicies(),t.displayAdditionalPolicy&&F("div",{className:D.a.additionalPolicy},void 0,F("h4",{className:"app_subheading2"},void 0,F(FormattedMessage,{id:"additionalPolicy.sectionHeader.additionalPolicy",defaultMessage:"##additionalPolicy.sectionHeader.additionalPolicy##"})),F(y.b,{id:"additionalPolicy.text.policyDescription",defaultMessage:"##additionalPolicy.text.policyDescription##"})),t.displayChildrenPolicy&&n&&F("div",{className:D.a.childrenPolicy},void 0,F("h4",{className:"app_subheading2"},void 0,F(FormattedMessage,{id:"childrenPolicy.sectionHeader.childrenPolicy",defaultMessage:"##childrenPolicy.sectionHeader.childrenPolicy##"})),F("span",{dangerouslySetInnerHTML:{__html:Object(c.O)(n)}})))}},{key:"render",value:function(){var e=this,t=this.props,r=t.configData.displayAdditionalPolicy||t.configData.displayChildrenPolicy&&_.get(t.workflowMessage,"ChildrenPolicy"),n=_.get(t.configData,"enableDayUse",!1);return F("section",{className:D.a.container},void 0,F("h2",{className:"app_heading1"},void 0,F(FormattedMessage,{id:"checkoutPolicies.header.policies",defaultMessage:"##checkoutPolicies.header.policies##"})),F(v.a,{hotelDetails:t.hotelDetails,styles:D.a,selectedLanguage:t.selectedLanguage,isSingleDayUse:n}),this.renderPolicies(),r&&F("div",{className:D.a.fullPolicyLink},void 0,F(l.a,{className:"link",onClick:function(){return e.props.actions.setModalMsg(e.renderFullPolicyModal())}},void 0,F(FormattedMessage,{id:"guestPolicies.link.viewFullPolicy",defaultMessage:"##guestPolicies.link.viewFullPolicy##"}))))}}])&&R(t.prototype,r),n&&R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||n)||n,U=r(1687),q=r(14),K=r(607),W=r(25),$=r(9),Y=r(171),X=r(245),Z=r(30),J=r(134),Q=r(296),ee=r(52),te=r(93),re=r(77),ne=r(47),oe=r(156),ie=r(53),ae=r(379),se=r(110),le=r(1688),de=r(22),ce=r(76),ue=r(1682),pe=r(381),me=r(34),fe=r.n(me),ye=r(54),ge=r(32),ve=r(107),he=r(158),be=r(0),_e=r(2),Ce=r(1745),Pe=r.n(Ce);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t,r,n){G||(G="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:G,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return(t=De(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,De(n.key),n)}}function De(e){var t=function(e,t){if("object"!==Oe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oe(t)?t:String(t)}function ke(e,t){return(ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ee(e);if(t){var o=Ee(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Re(this,r)}}function Re(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=(L=withStyles(Pe.a),B=bindRedux([ie.a,J.a,re.a],[$]),L(H=injectIntl(H=B(H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(i,Component);var t,r,n,o=Fe(i);function i(){var e;Ae(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={coupon:"",selectedReservation:1===_.size(e.props.reservations)?_.get(e.props.reservations,"[0].Id"):"",formToggled:Object(he.a)(e.props.reservations,_.get(e.props.loggedInUserProfile,"loyaltyCoupon")),addAnotherCouponToggled:!1},e._handleAddButton=function(){var t=e.state.formToggled?null:{formToggled:!0};e.props.actions.clearUpdateReservationResults(),e.setState(Se(Se({},t),{},{addAnotherCouponToggled:!0}))},e._getSelectLabel=function(t){var r=e.state.selectedReservation,n=e.props.intl.formatMessage,o=_.get(t,"[".concat(r,"]"),"");return o?Ie("span",{dangerouslySetInnerHTML:{__html:o}}):n({id:"coupons.text.selectARoom"})},e._renderAddCouponForm=function(){var t=e.state,r=t.coupon,n=t.selectedReservation,o=e.props.intl.formatMessage,i=e.props,a=i.reservations,s=i.updateReservation,d=_.size(a)>1,c=e._getRoomSelectionOptions(),u=Object(he.d)(s),p=Object(he.e)(u),m=r?"coupons.button.apply":"coupons.button.cancel",f=e._getSelectLabel(c),y=_.get(be.pc,"COUPON");return Ie("div",{},void 0,d&&Ie("div",{className:Pe.a.selectRoom},void 0,Ie(ve.a,{isDifferentKeyValue:!0,selected:n,options:c,onChange:function(t){return e.setState({selectedReservation:t.key})},label:f,id:"coupons-select-room"})),Ie("div",{className:Pe.a.couponField},void 0,Ie("form",{onSubmit:function(t){return e._onSubmit(t)}},void 0,Ie(ge.a,{error:p,value:r,onChange:function(t){return e._handleChange(t)},label:o({id:"coupons.label.couponCode"}),maxLength:y}),Ie(l.a,{className:"btn",disabled:!n&&!!r,colorClassName:"secondary",sizeClassName:"md",type:"submit"},void 0,Ie(FormattedMessage,{id:m}))),Ie(_e.a,{condition:p},void 0,Ie(q.a,{messageType:"error",isInline:!0,messages:[o({id:"coupons.text.thisCouponDoesNotApplyToThisRoom"})]}))))},e._renderAddAnotherCouponToggle=function(){return Ie(l.a,{className:"link",disabled:!_.size(e._getRoomSelectionOptions()),onClick:e._handleAddButton},void 0,Ie(FormattedMessage,{id:"coupons.button.addAnotherCoupon"}))},e}return t=i,(r=[{key:"componentDidUpdate",value:function(e){if(this.state.formToggled){var t=Object(he.a)(e.reservations,_.get(this.props.loggedInUserProfile,"loyaltyCoupon")),r=Object(he.a)(this.props.reservations,_.get(this.props.loggedInUserProfile,"loyaltyCoupon"));t&&!r&&this.setState({formToggled:!1,addAnotherCouponToggled:!1})}}},{key:"render",value:function(){var e=this.props.updateReservationInProgress;return Ie("div",{className:Pe.a.container},void 0,Ie(_e.a,{condition:this.state.formToggled},void 0,Ie(Fragment,{},void 0,Ie("h2",{className:"app_heading1"},void 0,Ie(FormattedMessage,{id:"coupons.button.addCoupon"})),this._renderAddedCoupons(),Ie(_e.a,{condition:e},void 0,Ie(ye.a,{})),Ie(_e.a,{condition:!e&&!0},void 0,Ie(Fragment,{},void 0,Ie(_e.a,{condition:this.state.addAnotherCouponToggled},void 0,this._renderAddCouponForm()),Ie(_e.a,{condition:!this.state.addAnotherCouponToggled},void 0,this._renderAddAnotherCouponToggle()))))),Ie(_e.a,{condition:!this.state.formToggled},void 0,Ie(l.a,{className:"link",onClick:this._handleAddButton},void 0,Ie(FormattedMessage,{id:"coupons.button.addCoupon"}))))}},{key:"_renderAddedCoupons",value:function(){var e=this,t=this.props.intl.formatMessage,r=_.get(this.props,"loggedInUserProfile.loyaltyCoupon"),n=Object(he.a)(this.props.reservations,_.get(this.props.loggedInUserProfile,"loyaltyCoupon")),o=this.props.reservations.reduce((function(e,t){var n=_.get(t,"couponList",[]).map((function(e){var t=_.get(e,"CouponOffer.Code");if(t!==r)return t}));return _.isEmpty(n)||e.push(t),e}),[]);return _.isEmpty(o)?null:Ie("div",{className:Pe.a.couponApplied},void 0,o.map((function(n){var o=e.props.reservations.findIndex((function(e){return e.Id===n.Id}))+1,i=_.get(n,"couponList"),a=_.get(n,"RoomName",""),s=_.get(n,"RateName","");return i.map((function(i,d){var u=_.get(i,"CouponOffer.Code"),p=Ie(Fragment,{},void 0,Ie(FormattedMessage,{id:"coupons.text.couponApplied"}),": ",u),m=Ie(Fragment,{},void 0,Ie(FormattedMessage,{id:"coupons.label.roomNumberRoomName",values:{roomNumber:o}}),Ie("span",{dangerouslySetInnerHTML:{__html:"".concat(Object(c.O)(a),", ").concat(Object(c.O)(s))}}));if(u!==r)return Ie("div",{className:Pe.a.couponInfo,"data-coupon":u,"data-room-number":o},"coupon-".concat(n.Id,"-").concat(d),Ie(q.a,{messageType:"success",isInline:!0,messages:[p,m]}),Ie(l.a,{onClick:function(){return e._onCouponRemove(n.Id,i)},className:"link",iconClassName:"removeAfter",ariaLabel:t({id:"coupons.ariaLabel.removeCoupon"})}))}))})),Ie(_e.a,{condition:n},void 0,Ie("p",{className:Pe.a.notice},void 0,Ie(FormattedMessage,{id:"coupons.text.seeSummaryForDiscountedAmount"}))))}},{key:"_getRoomSelectionOptions",value:function(){var e=this.props,t=e.reservations,r=e.intl,n=void 0===r?{}:r;return Object(he.c)(t,n.formatMessage)}},{key:"_handleChange",value:function(e){this.setState({coupon:e})}},{key:"_onSubmit",value:function(e){var t=this,r=this.props,n=r.actions.onCouponAdd,o=r.reservations,i=r.addOnsInCart,a=r.activeProfilesForBookingViews,s=r.loggedInUserProfile,l=this.state,d=l.coupon,c=l.selectedReservation;return e.preventDefault(),d?n({reservation:o.find((function(e){return e.Id===c})),coupon:d,activeAddOns:i,activeProfilesForBookingViews:a}).then((function(){var e=Object(he.d)(t.props.updateReservation);Object(he.e)(e)||t.setState({addAnotherCouponToggled:!1,coupon:""})})):Object(he.a)(o,_.get(s,"loyaltyCoupon"))?this.setState({addAnotherCouponToggled:!1}):this.setState({addAnotherCouponToggled:!1,formToggled:!1})}},{key:"_onCouponRemove",value:function(e,t){var r=this,n=this.props,o=n.reservations,i=n.addOnsInCart,a=n.activeProfilesForBookingViews,s=n.loggedInUserProfile;(0,n.actions.onCouponRemove)(Object.assign({},o.find((function(t){return t.Id===e}))),i,a,t),_.defer((function(){Object(he.a)(o,_.get(s,"loyaltyCoupon"))||r.setState({formToggled:!1})}))}}])&&Te(t.prototype,r),n&&Te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||H)||H)||H);Me.defaultProps={actions:{clearUpdateReservationResults:_.noop}};var je,xe,Ve=Me,Le=r(3),Be=r.n(Le),He=r(432),Ge=r(1747),ze=r.n(Ge);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t,r,n){xe||(xe="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:xe,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Ue(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ue(i)?i:String(i)),n)}var o,i}function $e(e,t){return($e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Xe(this,r)}}function Xe(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je,Qe,et=withStyles(ze.a)(je=injectIntl(je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}(i,React.PureComponent);var t,r,n,o=Ye(i);function i(){var e;Ke(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={emailAddressOptionalError:!1,emailAddress:_.get(e.props,"guest.emailAddress","")},e._onFirstNameChange=function(t){e.props.onFirstNameChange({firstName:t,index:e.props.index,reservationId:e.props.reservationId})},e._onLastNameChange=function(t){e.props.onLastNameChange({lastName:t,index:e.props.index,reservationId:e.props.reservationId})},e._onEmailChange=function(t){e.setState({emailAddress:t})},e._onEmailAddressBlur=function(){var t=e.state.emailAddress,r=e.props,n=r.index,o=r.reservationId,i=He.a.pattern({regex:be.vb},t),a=Boolean(i.isError&&t);e.setState({emailAddressOptionalError:a},(function(){e.props.onEmailAddressChange({emailAddress:t,index:n,reservationId:o,error:a})}))},e._onRemoveGuest=function(t){t.preventDefault();var r=e.props,n=r.index,o=r.reservationId;e.props.onRemoveGuest({index:n,reservationId:o})},e}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.guest,r=e.index,n=e.intl.formatMessage,o=e.enableAdditionalGuestEmailAddresses,i=e.disabled,a=defineMessages({firstName:{id:"additionalGuestFields.placeHolder.firstName",defaultMessage:"##additionalGuestFields.placeHolder.firstName##"},lastName:{id:"additionalGuestFields.placeHolder.lastName",defaultMessage:"##additionalGuestFields.placeHolder.lastName##"},emailAddress:{id:"additionalGuestFields.placeHolder.emailAddress",defaultMessage:"##additionalGuestFields.placeHolder.emailAddress##"}}),s=qe(FormattedMessage,{id:"additionalGuestFields.error.emailFormatError",defaultMessage:"##additionalGuestFields.error.emailFormatError##"});return qe("div",{className:ze.a.container},void 0,qe("h4",{className:"app_subheading2"},void 0,qe(FormattedMessage,{id:"additionalGuestFields.label.guest",defaultMessage:"##additionalGuestFields.label.guest##"})," ",r+1),qe(ge.a,{className:ze.a.firstNameField,label:n(a.firstName),maxLength:40,type:"text",name:"FirstName",value:t.firstName,onChange:this._onFirstNameChange,disabled:i}),qe(ge.a,{className:ze.a.lastNameField,label:n(a.lastName),maxLength:40,type:"text",name:"LastName",value:t.lastName,onChange:this._onLastNameChange,disabled:i}),o&&qe(ge.a,{className:ze.a.emailAddressField,label:n(a.emailAddress),maxLength:40,type:"text",name:"EmailAddress",value:this.state.emailAddress,onChange:this._onEmailChange,onBlur:this._onEmailAddressBlur,error:this.state.emailAddressOptionalError&&s,disabled:i}),qe("div",{className:ze.a.removeButton},void 0,qe(l.a,{onClick:this._onRemoveGuest,className:"link",iconClassName:"remove",disabled:i},void 0,qe(FormattedMessage,{id:"guestInfo.button.removeButton",defaultMessage:"##guestInfo.button.removeButton##"}))))}}])&&We(t.prototype,r),n&&We(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||je)||je,tt=r(1749),rt=r.n(tt);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t,r,n){Qe||(Qe="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Qe,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==nt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===nt(i)?i:String(i)),n)}var o,i}function st(e,t){return(st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ct(e);if(t){var o=ct(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return dt(this,r)}}function dt(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ut,pt,mt=withStyles(rt.a)(Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(i,Component);var t,r,n,o=lt(i);function i(){return it(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"componentDidMount",value:function(){var e=this.getGuestInfo(),t=e.maxGuestAllow,r=e.additionalGuests;t>0&&!r.length&&this.addAdultInfo(this.props.reservationId,this.props.optionalType)}},{key:"getGuestInfo",value:function(){var e=_.get(this.props,"additionalGuestInfo[".concat(this.props.reservationId,"]"),{});return{maxGuestAllow:_.get(e,"maxGuestAllow"),additionalGuests:_.get(e,"guests",[])}}},{key:"addAdultInfo",value:function(e){this.props.addNewGuest&&this.props.addNewGuest(this.props.reservationId,e)}},{key:"renderButton",value:function(e,t){var r=this;return ot(l.a,{className:"link",iconClassName:"add",onClick:function(){return r.addAdultInfo(t)}},t,ot(e,{}))}},{key:"renderMessage",value:function(e){switch(e){case"CHILD":return function(){return ot(FormattedMessage,{id:"additionalGuests.label.addAnChild"})};case"ADULT":return function(){return ot(FormattedMessage,{id:"additionalGuests.label.addAnAdult"})};case"GUEST":return function(){return ot(FormattedMessage,{id:"additionalGuests.label.addAGuest"})}}}},{key:"renderOptionalType",value:function(){var e=[];return"ADULT"===this.props.optionalType?(e.push(this.renderButton(this.renderMessage("CHILD"),"CHILD")),e.push(this.renderButton(this.renderMessage("ADULT"),"ADULT"))):e.push(this.renderButton(this.renderMessage("GUEST"),"GUEST")),ot("div",{className:rt.a.addGuestsButton},void 0,e)}},{key:"render",value:function(){var e=this.props,t=e.reservationId,r=e.disabled,n=e.onFirstNameChange,o=e.onLastNameChange,i=e.onEmailAddressChange,a=e.onRemoveGuest,s=e.enableAdditionalGuestEmailAddresses,l=this.getGuestInfo(),d=l.maxGuestAllow,c=l.additionalGuests;return ot(Fragment,{},void 0,d>0&&ot("div",{className:rt.a.container},void 0,c.map((function(e,l){return ot(et,{reservationId:t,guest:e,index:l,onFirstNameChange:function(e){return n(e)},onLastNameChange:function(e){return o(e)},onEmailAddressChange:function(e){return i(e)},onRemoveGuest:function(e){return a(e)},enableAdditionalGuestEmailAddresses:s,disabled:r},l)})),Boolean(c&&d!==c.length)&&this.renderOptionalType()))}}])&&at(t.prototype,r),n&&at(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||Je,ft=r(1751),yt=r.n(ft);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t,r,n){pt||(pt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:pt,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==gt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===gt(i)?i:String(i)),n)}var o,i}function _t(e,t){return(_t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ot(e);if(t){var o=Ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Pt(this,r)}}function Pt(e,t){if(t&&("object"===gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var It,wt=withStyles(yt.a)(ut=injectIntl(ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_t(e,t)}(i,Component);var t,r,n,o=Ct(i);function i(){var e;ht(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r)))._onRemoveLoyalty=function(t){t.preventDefault(),e.props.onRemoveLoyalty&&e.props.onRemoveLoyalty({index:e.props.index,key:"loyaltyProgramNumber".concat(e.props.index),value:""})},e._onLoyaltyProgramSelectWrapperClick=function(e){return e.stopPropagation()},e}return t=i,(r=[{key:"_onLoyaltyProgramChange",value:function(e){this.props.onLoyaltyProgramChange&&this.props.onLoyaltyProgramChange({ProgramID:e.key,index:this.props.index})}},{key:"_onLoyaltyNumberChange",value:function(e){this.props.onLoyaltyNumberChange&&this.props.onLoyaltyNumberChange({MembershipID:e,index:this.props.index})}},{key:"render",value:function(){var e=this,t=this.props,r=t.intl.formatMessage,n=t.loyalty,o=t.index,i=t.loyaltyProgramListOptions,a=t.disabled,s=void 0!==a&&a,d=t.loyaltyNumberError,c=t.update,u=t.defaultDisplayValue,p=t.isDefault,m=t.roomNumber,f=defineMessages({loyaltyProgram:{id:"guestLoyalty.placeholder.loyaltyNumber",defaultMessage:"##guestLoyalty.textArea.loyaltyNumber##"},program:{id:"guestLoyalty.placeholder.program",defaultMessage:"##guestLoyalty.textArea.program##"}}),y=_.get(be.pc,"LOYALTY_FIELD"),g=s||!_.get(n,"ProgramID",""),v=!!_.get(n,"ProgramID",!1),h=!g&&v&&!p;return vt("div",{className:yt.a.container},void 0,vt("div",{className:yt.a.selectProgramField,onClick:this._onLoyaltyProgramSelectWrapperClick},void 0,vt(ve.a,{id:"guest-loyalty-select-".concat(o,"-").concat(m),label:r(f.program),options:i,onChange:function(t){return e._onLoyaltyProgramChange(t)},selected:n.ProgramID,isDifferentKeyValue:!0,disabled:s,hasValue:v,hideSelectedItem:!1,defaultDisplayValue:u})),vt(ge.a,{className:yt.a.programNumber,maxLength:y,name:"loyaltyProgramNumber".concat(o),label:r(f.loyaltyProgram),onChange:function(t){return e._onLoyaltyNumberChange(t)},value:n.MembershipID,disabled:g,error:d&&vt(FormattedMessage,{id:d}),onBlur:function(){return c("loyaltyProgramNumber".concat(e.props.index),n.MembershipID)},required:h}),vt("div",{className:yt.a.removeButton},void 0,o>=0&&vt(l.a,{className:"link",iconClassName:"remove",disabled:s,onClick:this._onRemoveLoyalty,ariaLabel:r({id:"guestLoyalty.ariaLabel.removeALoyaltyNumber",defaultMessage:"##guestLoyalty.ariaLabel.removeALoyaltyNumber##"})})))}}])&&bt(t.prototype,r),n&&bt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||ut)||ut,St=r(44),Nt=r.n(St),At=r(1753),Tt=r.n(At);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t,r,n){It||(It="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:It,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){Et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Et(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Dt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Dt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mt,jt,xt,Vt,Lt=Nt()(Tt.a)((function(e){var t=e.addNewLoyalty,r=e.custLoyaltyList,n=e.defaultLoyaltyPrograms,o=e.disabled,i=e.enableLoyaltyProgramTypes,a=e.enableMultipleLoyaltyProgram,s=e.errors,d=e.roomNumber,c=e.loyaltyProgramDetails,u=e.loyaltyProgramListOptions,p=e.onLoyaltyNumberChange,m=e.onLoyaltyProgramChange,f=e.onRemoveLoyalty,y=e.update,g=function(e){var t=_.get(c,"["+e.ProgramID+"].ProgramType");return Rt(Rt({},e),{},{ProgramType:t})};return kt("div",{id:"guest-loyalty-".concat(d)},void 0,_.map(r,(function(e,t){var r=_.get(e,"ProgramID",""),i=Object(de.a)(e,c),a=_.get(e,"Default",!1)||_.includes(n,r),l=_.get(s,"loyaltyProgramNumber".concat(t),""),v=_.reduce(u,(function(e,t,r){return _.includes(n,r)?e:Rt(Rt({},e),{},Et({},r,t))}),{}),h=!!!_.get(v,r,!1)&&_.get(c,[r,"Value"],"");return kt(wt,{loyalty:e,index:t,loyaltyProgramListOptions:u,onLoyaltyProgramChange:function(e){return m(g(e))},onLoyaltyNumberChange:function(e){return p(g(e))},onRemoveLoyalty:function(e){return f(e)},disabled:i||o||a,loyaltyNumberError:l,update:y,isDefault:a,defaultDisplayValue:h,roomNumber:d},t)})),kt(_e.a,{condition:i&&a&&!!_.size(u)},void 0,kt("div",{className:Tt.a.addLoyaltyButton},void 0,kt(l.a,{className:"link",iconClassName:"add",onClick:function(e){e.preventDefault(),t&&t()},disabled:o},void 0,kt(FormattedMessage,{id:"guestLoyalty.label.addALoyaltyProgram"})))))})),Bt=r(438),Ht=r(1755),Gt=r.n(Ht);function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t,r,n){Vt||(Vt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Vt,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kt(n.key),n)}}function Kt(e){var t=function(e,t){if("object"!==zt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zt(t)?t:String(t)}function Wt(e,t){return(Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xt(e);if(t){var o=Xt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Yt(this,r)}}function Yt(e,t){if(t&&("object"===zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zt,Jt=(Mt=withStyles(Gt.a),jt=bindRedux([],[{setCreateProfileIsChecked:W.setCreateProfileIsChecked}]),Mt(xt=injectIntl(xt=jt(xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wt(e,t)}(i,Component);var t,r,n,o=$t(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={password:"",confirmPassword:""},t}return t=i,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.errors,n=t.intl.formatMessage,o=t.createAccount,i=t.signUpLink,a=t.signUpTitle,s=t.disabled,l=t.isMultiReservation,d=t.shouldRenderPasswordSection,c=t.actions,u=defineMessages({password:{id:"checkout.input.createPassword"},confirmPassword:{id:"checkout.input.confirmPassword"}}),p=Ut(FormattedMessage,{id:"guestDetails.heading.bookFaster",defaultMessage:"##guestDetails.heading.bookFaster##"}),m=Ut(l?"h3":"h2",{className:"app_heading1"},void 0,p);return Ut("div",{className:Gt.a.container},void 0,Ut("hr",{}),m,Ut(Bt.a,{id:"create_account_confirmation_checkbox",header:"checkout.text.iWouldLikeToCreateAccount",description:"checkout.text.iWouldLikeToCreateAccountDescription",checkboxStyles:Gt.a.createAccountCheckbox,linkLabel:a,url:i,required:!1,onChange:function(t){c.setCreateProfileIsChecked(t.target.checked),e._update("createAccount",t.target.checked),t.target.checked||e.setState({password:"",confirmPassword:""})},checked:!!o,disabled:s}),!!o&&d&&Ut("div",{},void 0,Ut(ge.a,{className:Gt.a.createPasswordField,onBlur:function(){return e._update("password",e.state.password)},type:"password",disabled:!o,onChange:function(t){return e.setState({password:t})},value:this.state.password,label:n(u.password),error:_.get(r,"password")&&this._showError(_.result(r,"password")),required:!!o,ariaDescribedBy:"passwordInstructions"}),Ut("p",{"aria-describedby":"passwordInstructions","aria-hidden":"true",className:Gt.a.passwordInstructions},void 0,Ut(FormattedMessage,{id:"checkout.label.passwordLengthInstruction"})),Ut("span",{id:"passwordInstructions",className:"sr-only"},void 0,n({id:"accessibility.passwordLength"})),Ut(ge.a,{className:Gt.a.passwordConfirmField,onBlur:function(){return e._update("confirmPassword",e.state.confirmPassword)},type:"password",disabled:!o,onChange:function(t){return e.setState({confirmPassword:t})},value:this.state.confirmPassword,label:n(u.confirmPassword),error:_.get(r,"confirmPassword")&&this._showError(_.result(r,"confirmPassword")),required:!!o})))}},{key:"_update",value:function(e,t){this.props.onChange(function(e,t,r){return(t=Kt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t))}},{key:"_showError",value:function(e){if(e)return Ut(FormattedMessage,{id:"guestInfo.error.".concat(e),defaultMessage:"##guestInfo.error.".concat(e,"##")})}}])&&qt(t.prototype,r),n&&qt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||xt)||xt)||xt),Qt=injectIntl(Jt),er=r(71),tr=r(1757),rr=r.n(tr);function nr(e,t,r,n){Zt||(Zt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Zt,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function or(e){return function(e){if(Array.isArray(e))return sr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ar(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,d=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||ar(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){if(e){if("string"==typeof e)return sr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sr(e,t):void 0}}function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lr=Object(Le.memo)((function(e){var t=e.disabled,r=e.displayCommentArea,n=e.formatMessage,o=e.onChangeCommentArea,i=e.reservation,a=void 0===i?{}:i,s=e.reservationId,d=e.roomRequests,c=e.setReservationPreferences,u=e.showRoomRequests,p=ir(Object(Le.useState)(_.get(a,"PublicComment","")),2),m=p[0],f=p[1],y=ir(Object(Le.useState)(!1),2),g=y[0],v=y[1];Object(Le.useEffect)((function(){f(a.PublicComment)}),[a.PublicComment]);var h,b,C={},P=function(e){e.preventDefault(),v(!g)},O=function(e){return _.has(C,e.Code)||(C[e.Code]=function(){return t=e,r=or(_.get(a,"roomRequests",[])),-1===(n=r.findIndex((function(e){return e.Code===t.Code})))?r.push(t):r.splice(n,1),void c(s,r);var t,r,n}),C[e.Code]},I=_.get(a,"roomRequests",[]),w=g?d:d.slice(0,8),S=!!_.size(w);return r||u&&S?nr("div",{className:rr.a.container},void 0,nr(_e.a,{condition:u&&S},void 0,nr("p",{},void 0,nr(FormattedMessage,{id:"guestInfo.label.additionalDetailsAndPreferences",values:{totalSelected:I.length}})),nr("ul",{className:rr.a.checkboxSection},void 0,_.map(w,(function(e){var r=!!I.find((function(t){return t.Code==="".concat(e.Code)}));return nr("li",{},"".concat(e.Code).concat(r),nr(er.a,{id:"".concat(s,"-").concat(e.Code),type:"checkbox",onChange:O(e),checked:r,isDisabled:t}),nr("label",{htmlFor:"".concat(s,"-").concat(e.Code)},void 0,e.Value))}))),d.length>8&&(h=g?"productDetailView.label.viewLess":"productDetailView.label.viewMore",b=g?"arrowUpAfter":"arrowDownAfter",nr("div",{className:rr.a.checkboxSectionButton},void 0,nr(l.a,{className:"link",iconClassName:b,onClick:P,"aria-expanded":g},void 0,nr(FormattedMessage,{id:h}))))),nr(_e.a,{condition:r},void 0,nr(ge.a,{className:rr.a.commentArea,disabled:t,ariaLabel:n({id:"additionalGuestFields.ariaLabel.commentAreaMaximumCharacters"},{maxLength:200}),label:n({id:"additionalGuestFields.placeHolder.commentArea"}),maxLength:200,name:"commentArea",onBlur:function(){o({reservationId:s,commentArea:m})},onChange:function(e){return f(e)},type:"textarea",value:m,showCounter:!0}))):null}));lr.displayName="GuestProfilePreferences",lr.defaultProps={roomRequests:[]};var dr,cr,ur=Nt()(rr.a)(lr),pr=r(362),mr=r.n(pr),fr=r(323),yr=r(50),gr=r(115),vr=r(1759),hr=r.n(vr);function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _r(e,t,r){return(t=Pr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pr(n.key),n)}}function Pr(e){var t=function(e,t){if("object"!==br(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===br(t)?t:String(t)}function Or(e,t){return(Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Sr(e);if(t){var o=Sr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return wr(this,r)}}function wr(e,t){if(t&&("object"===br(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nr(e,t,r,n){cr||(cr="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:cr,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var Ar,Tr=function(e){var t="guestInfo.error."+e;return Nr(FormattedMessage,{id:t,defaultMessage:"##"+t+"##"})},Dr=withStyles(hr.a)(dr=bindRedux([u.a,se.a,re.a,ee.a],[yr,W])(dr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Or(e,t)}(i,Component);var t,r,n,o=Ir(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).setCountry=function(e,r){e.value&&t._update(r,e.label),r===be.g.COUNTRY_NAME&&(e.value?(t._update(be.g.COUNTRY_CODE,e.value),t._update(be.g.STATE_PROVINCE_CODE,""),t._update(be.g.STATE_PROVINCE_NAME,"")):t._update(be.g.COUNTRY_NAME,""),t.props.actions.findAssociatedStates(e.value))},t._onCountryChange=function(e,r){t._update(be.g.COUNTRY_NAME,r),t._update(be.g.COUNTRY_CODE,e),t.props.actions.findAssociatedStates(e)},t._onStateProvinceChange=function(e,r){t._update(be.g.STATE_PROVINCE_CODE,e),t._update(be.g.STATE_PROVINCE_NAME,r)},t._onCountryBlur=function(){t._update(be.g.COUNTRY_CODE,t.state.countryCode),t._update(be.g.COUNTRY_NAME,t.state.countryName)},t._onStateProvinceBlur=function(){t._update(be.g.STATE_PROVINCE,t.state.stateProvinceCode),t._update(be.g.STATE_PROVINCE_NAME,t.state.stateProvinceName)},t.setStateProvinces=function(e,r){e.label&&t._update(r,e.label),r===be.g.STATE_PROVINCE_NAME&&(e.label?t._update(be.g.STATE_PROVINCE_CODE,e.value):t._update(be.g.STATE_PROVINCE_NAME,""))};var r=_.get(e.currentGuestProfile,"guestDetails",{}),n=_.get(e,"address",[]).find((function(e){return!0===e.default})),a=_.get(r,be.g.ADDRESS_NAME),s=_.get(n,be.g.ADDRESS_NAME),l=_.isEmpty(a)?s:a;t.availableAddresses=t.getAvailableAddress();var d="";for(var c in t.availableAddresses)if(l===t.availableAddresses[c]){d=c;break}return t.state={selectAddressType:d,selectedCountryIndex:0,selectedStateProvinceIndex:0,suggestedStateProvinces:[],displayStates:!0,address1:_.get(r,be.g.ADDRESS_1,""),address2:_.get(r,be.g.ADDRESS_2,""),zipPostalCode:_.get(r,be.g.ZIP_POSTAL_CODE,""),stateProvinceName:_.get(r,be.g.STATE_PROVINCE_NAME,""),stateProvinceCode:_.get(r,be.g.STATE_PROVINCE_CODE,""),city:_.get(r,be.g.CITY,""),countryName:_.get(r,be.g.COUNTRY_NAME,""),countryCode:_.get(r,be.g.COUNTRY_CODE,""),countrySelectionAcitve:!0,stateSelectionActive:!0},t}return t=i,(r=[{key:"componentDidUpdate",value:function(e){var t=_.get(this.props,"currentGuestProfile.guestDetails",{}),r=_.get(e,"currentGuestProfile.guestDetails",{});t.address1!==r.address1&&this.setState({address1:t.address1}),t.address2!==r.address2&&this.setState({address2:t.address2}),t.countryName!==r.countryName&&this.setState({countryName:t.countryName,stateProvinceName:"",stateProvinceCode:""}),_.get(t,be.g.COUNTRY_CODE)!==_.get(r,be.g.COUNTRY_CODE)&&this.setState({countryCode:_.get(t,be.g.COUNTRY_CODE)}),t.zipPostalCode!==r.zipPostalCode&&this.setState({zipPostalCode:t.zipPostalCode}),t.city!==r.city&&this.setState({city:t.city}),t.stateProvinceName!==r.stateProvinceName&&this.setState({stateProvinceName:t.stateProvinceName}),t.stateProvinceCode!==r.stateProvinceCode&&this.setState({stateProvinceCode:t.stateProvinceCode})}},{key:"componentDidMount",value:function(){var e=_.get(this.props.currentGuestProfile,"guestDetails.countryCode");e&&this.props.actions.findAssociatedStates(e)}},{key:"_update",value:function(e,t){var r=this;this.setState(_r({},e,t),(function(){r.props.actions.setProfileInfo(_r({},e,t),[_.get(r.props,"currentGuestProfile.CRS_referenceNumber")])}))}},{key:"updateAddressDetails",value:function(e){var t=this.props.address.find((function(t){return t.addressName===e}));this._update(be.g.ADDRESS_NAME,e),this._update(be.g.ADDRESS_1,_.get(t,[be.g.ADDRESS_1],"")),this._update(be.g.ADDRESS_2,_.get(t,[be.g.ADDRESS_2],"")),this._update(be.g.COUNTRY_NAME,_.get(t,[be.g.COUNTRY],"")),this._update(be.g.COUNTRY_CODE,_.get(t,"countrycode","")),this._update(be.g.ZIP_POSTAL_CODE,_.get(t,"zipCode","")),this._update(be.g.CITY,_.get(t,[be.g.CITY],"")),this._update(be.g.STATE_PROVINCE_NAME,_.get(t,[be.g.STATE_PROVINCE],"")),this._update(be.g.STATE_PROVINCE_CODE,_.get(t,[be.g.STATE_PROVINCE_CODE],""))}},{key:"getAvailableAddress",value:function(){var e=this.props.address;return _.reduce(e,(function(t,r,n){return t["name"+n]=r.addressName,n===e.length-1&&(t["name".concat(e.length)]="New Address"),t}),{})}},{key:"render",value:function(){var e=this,t=this.state,r=t.selectAddressType,n=t.countryName,o=t.address1,i=t.address2,a=t.zipPostalCode,s=t.city,l=t.countryCode,d=t.stateProvinceCode,c=this.props,u=c.address,p=c.associatedStates,m=c.configData,f=c.countryList,y=c.currentGuestProfile,g=c.disabled,v=c.intl.formatMessage,h=c.isInModifyMode,b=c.isMultiReservation,C=c.roomNumber,P=Object(gr.a)(m),O=Object(gr.b)(m),I=_.get(y,"guestDetails",{}).errors||{},w=p&&p.map((function(e){return{label:e.Value,value:e.Code}})),S=defineMessages({address1:{id:"guestInfo.placeHolder.address1",defaultMessage:"##guestInfo.placeHolder.address1##"},address2:{id:"guestInfo.placeHolder.address2",defaultMessage:"##guestInfo.placeHolder.address2##"},addressType:{id:"guestInfo.placeHolder.addressType",defaultMessage:"##guestInfo.placeHolder.addressType##"},city:{id:"guestInfo.placeHolder.city",defaultMessage:"##guestInfo.placeHolder.city##"},country:{id:"guestInfo.placeHolder.country",defaultMessage:"##guestInfo.placeHolder.country##"},dialCode:{id:"guestInfo.placeHolder.dialCode",defaultMessage:"##guestInfo.placeHolder.dialCode##"},stateProvince:{id:"guestInfo.placeHolder.stateProvince",defaultMessage:"##guestInfo.placeHolder.stateProvince##"},zipPostalCode:{id:"guestInfo.placeHolder.zipPostalCode",defaultMessage:"##guestInfo.placeHolder.zipPostalCode##"}}),N=n?hr.a.stateProvinceField:"sr-only",A=n&&_.isEmpty(p),T=n?0:-1,D=Nr(FormattedMessage,{id:"guestInfo.title.address",defaultMessage:"##guestInfo.title.address##"}),k=Nr(b?"h4":"h3",{className:"app_heading1"},void 0,D),F=[be.g.ADDRESS_1,be.g.ADDRESS_2,be.g.ADDRESS_TYPE_LIST,be.g.CITY,be.g.COUNTRY,be.g.ZIP_POSTAL_CODE];return 0===mr()(F,P).length?null:Nr("div",{className:hr.a.addressInfo},void 0,Nr("fieldset",{},void 0,Nr("legend",{},void 0,k),Nr(_e.a,{condition:P.includes(be.g.ADDRESS_TYPE_LIST)&&u.length>0&&!h},void 0,Nr("div",{className:hr.a.searchAddressField},void 0,Nr(ve.a,{id:"guest-details-address-type-select-".concat(C),label:v(S.addressType),onChange:function(t){e.setState({selectAddressType:t.key}),e.updateAddressDetails(t.value)},hasValue:!!r,hideSelectedItem:!1,required:O.includes(be.g.ADDRESS_TYPE_LIST),options:this.availableAddresses,selected:r,isDifferentKeyValue:!0,disabled:g}))),Nr(_e.a,{condition:P.includes(be.g.COUNTRY)},void 0,Nr(fr.a,{className:hr.a.countryField,label:v(S.country),labelId:S.country,required:O.includes(be.g.COUNTRY),suggestions:f,id:"countryName",name:"country-name",searchLabel:!0,index:C,value:l,error:I.countryName&&Tr(I.countryName),autocompleteValue:"country-name",blockBrowserAutocomplete:!0,onChange:this._onCountryChange,disabled:g,onBlur:this._onCountryBlur})),Nr("div",{className:hr.a.addressFields},void 0,Nr(_e.a,{condition:P.includes(be.g.ADDRESS_1)},void 0,Nr(ge.a,{className:hr.a.addressField1,maxLength:40,name:"address",onChange:function(t){return e.setState({address1:t})},onBlur:function(){return e._update(be.g.ADDRESS_1,o)},required:O.includes(be.g.ADDRESS_1),label:v(S.address1),type:"text",value:o,error:I.address1&&Tr(I.address1),autocomplete:"address-line1",disabled:g})),Nr(_e.a,{condition:P.includes(be.g.ADDRESS_2)},void 0,Nr(ge.a,{className:hr.a.addressField2,maxLength:40,name:"address2",onBlur:function(){return e._update(be.g.ADDRESS_2,i)},onChange:function(t){return e.setState({address2:t})},required:O.includes(be.g.ADDRESS_2),label:v(S.address2),type:"text",value:i,error:I.address2&&Tr(I.address2),autocomplete:"address-line2",disabled:g}))),Nr(_e.a,{condition:P.includes(be.g.CITY)},void 0,Nr(ge.a,{className:hr.a.cityField,maxLength:36,onChange:function(t){return e.setState({city:t})},onBlur:function(){return e._update(be.g.CITY,s)},label:v(S.city),required:O.includes(be.g.CITY),type:"text",name:"city",value:s,error:I.city&&Tr(I.city),autocomplete:"address-level2",disabled:g})),Nr(_e.a,{condition:P.includes(be.g.STATE_PROVINCE)&&!A},void 0,Nr(fr.a,{className:N,label:v(S.stateProvince),labelId:S.stateProvince,onChange:this._onStateProvinceChange,required:O.includes(be.g.STATE_PROVINCE),suggestions:w,id:"stateProvinceName",name:"state",searchLabel:!0,index:C,value:d,error:I.stateProvinceName&&Tr(I.stateProvinceName),blockBrowserAutocomplete:!0,tabIndex:T,disabled:g,autocompleteValue:"address-level1",onBlur:this._onStateProvinceBlur})),Nr(_e.a,{condition:P.includes(be.g.ZIP_POSTAL_CODE)},void 0,Nr(ge.a,{className:hr.a.zipPostalCodeField,maxLength:10,onChange:function(t){return e.setState({zipPostalCode:t})},onBlur:function(){return e._update(be.g.ZIP_POSTAL_CODE,a)},required:O.includes(be.g.ZIP_POSTAL_CODE),label:v(S.zipPostalCode),type:"text",name:"zip",value:a,error:I.zipPostalCode&&Tr(I.zipPostalCode),autocomplete:"postal-code",disabled:g}))))}}])&&Cr(t.prototype,r),n&&Cr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||dr)||dr,kr=injectIntl(Dr),Fr=r(1761),Rr=r.n(Fr);function Er(e,t,r,n){Ar||(Ar="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Ar,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var Mr,jr=function(e){var t=e.isMultiReservation,r=e.isSingleOption;return Er("fieldset",{},void 0,Er("legend",{},void 0,t&&Er("h3",{className:"app_heading1"},void 0,Er(FormattedMessage,{id:"guestInfo.title.travelDocuments"})),!t&&Er("h2",{className:"app_heading1"},void 0,Er(FormattedMessage,{id:"guestInfo.title.travelDocuments"})),!r&&Er("p",{},void 0,Er(FormattedMessage,{id:"guestInfo.title.travelDocumentsDescription"}))))},xr=r(361);function Vr(e){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t,r,n){Mr||(Mr="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Mr,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach((function(t){Gr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Vr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Vr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,d=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qr=function(e){var t=e.crsReferenceNumber,r=e.guestDetails,n=r.errors,o=void 0===n?{}:n,i=r.travelDocumentList,a=void 0===i?[]:i,s=e.disabled,l=e.formatMessage,d=e.formattedErrorMessage,c=e.isMultiReservation,u=e.setProfileInfo,p=e.supportedTravelDocuments,m=e.roomNumber,f=Object(xr.d)(p,l),y=Object(xr.a)(p,a),g=1===p.length,v=zr(Object(Le.useState)({travelDocumentType:y.travelDocumentType,travelDocumentNumber:y.travelDocumentNumber}),2),h=v[0],b=v[1];Object(Le.useEffect)((function(){var e=a.filter((function(e){return f[e.Type]}));if(e.length){var r=e.find((function(e){return e.Selected}));if(!r){var n=e.map((function(e){return Hr(Hr({},e),{},{Selected:e.Type===y.travelDocumentType})}));u({travelDocumentList:n},[t],be.ld.PRIMARY,!1,!1)}r&&(h.travelDocumentType===r.Type&&h.travelDocumentNumber===r.Number||b({travelDocumentType:r.Type,travelDocumentNumber:r.Number}))}}),[a]);var C=function(e,r){var n={name:e,value:r},o=e===be.Vd.TYPE,i=Object(xr.b)(a,h,n);n.name===be.Vd.NUMBER&&b(Hr(Hr({},h),{},{travelDocumentNumber:n.value})),u({travelDocumentList:i},[t],be.ld.PRIMARY,!1,o)};return Lr("div",{className:Rr.a.travelDocuments},void 0,Lr(jr,{isMultiReservation:c,isSingleOption:g}),Lr("div",{className:Rr.a.travelDocumentsFields},void 0,!g&&Lr("div",{className:Rr.a.travelDocumentType},void 0,Lr(ve.a,{id:"guest-info-travel-document-type-".concat(m),"aria-label":l({id:"guestInfo.placeHolder.travelDocumentType"}),isDifferentKeyValue:!0,name:be.Vd.TYPE,onChange:function(e){return C(be.Vd.TYPE,e.key)},options:f,selected:h.travelDocumentType,hasValue:!0,label:l({id:"guestInfo.placeHolder.travelDocumentType"}),required:!0,hideSelectedItem:!1})),Lr(ge.a,{className:Rr.a.travelDocumentNumber,disabled:s,error:o.travelDocumentNumber&&d(o.travelDocumentNumber),label:l({id:"guestInfo.placeHolder.documentNumber.".concat(_.lowerFirst(h.travelDocumentType))}),maxLength:40,name:be.Vd.NUMBER,onChange:function(e){return function(e,t){e===be.Vd.NUMBER&&b(Hr(Hr({},h),{},{travelDocumentNumber:t}))}(be.Vd.NUMBER,e)},onBlur:function(e){return C(be.Vd.NUMBER,e)},type:"text",required:!0,value:h.travelDocumentNumber})))};qr.defaultProps={guestDetails:{}};var Kr,Wr,$r=Nt()(Rr.a)(qr),Yr=r(1763),Xr=r.n(Yr);function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t,r,n){Wr||(Wr="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Wr,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Zr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Zr(i)?i:String(i)),n)}var o,i}function tn(e,t){return(tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=on(e);if(t){var o=on(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return nn(this,r)}}function nn(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var an,sn,ln=withStyles(Xr.a)(Kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tn(e,t)}(i,Component);var t,r,n,o=rn(i);function i(){return Qr(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.firstName,r=e.lastName,n=e.address1,o=e.address2,i=e.city,a=e.zipPostalCode,s=e.country;return Jr("div",{className:Xr.a.billingAddress},void 0,Jr("div",{className:Xr.a.name},void 0,[t,r].filter((function(e){return e})).join(" ")),Jr("div",{className:Xr.a.address},void 0,[n,o].filter((function(e){return e})).join(", ")),Jr("div",{className:Xr.a.cityPostalCode},void 0,i&&"".concat(i," "),[a,s].filter((function(e){return e})).join(", ")))}}])&&en(t.prototype,r),n&&en(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||Kr,dn=r(1765),cn=r.n(dn);function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t,r){return(t=fn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fn(n.key),n)}}function fn(e){var t=function(e,t){if("object"!==un(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===un(t)?t:String(t)}function yn(e,t){return(yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=hn(e);if(t){var o=hn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return vn(this,r)}}function vn(e,t){if(t&&("object"===un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bn(e,t,r,n){sn||(sn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:sn,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var _n,Cn=function(e){return bn(FormattedMessage,{id:"billingAddressDetails.error."+e})},Pn=withStyles(cn.a)(an=bindRedux([u.a,se.a,re.a,ee.a],[{findAssociatedStates:yr.findAssociatedStates},{setProfileInfo:W.setProfileInfo}])(an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yn(e,t)}(i,Component);var t,r,n,o=gn(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).renderCopyVATAddressCheckbox=function(){var e=t.state.isVATAddressSameAsGuestAddress,r=t.props,n=r.activeProfilesForBookingViews,o=r.configData,i=r.currentGuestProfile,a=r.confirmationNumber,s="billingAddressDetails.text.useTheAddressAboveAsMyBillingAddress",l=_.get(n.find((function(e){return e.CRS_referenceNumber===_.get(i,"CRS_referenceNumber")})),"guestDetails",{}),d=Object(gr.b)(o),c=["address1","address2","city","country","zipPostalCode"].filter((function(e){return d.includes(e)&&!l[e]}));return bn(React.Fragment,{},void 0,bn(_e.a,{condition:0===c.length||e},void 0,bn("div",{className:cn.a.copyVATAddress},void 0,bn(er.a,{type:"checkbox",id:"".concat(a,"-").concat(s),checked:e,onChange:function(){return t._toggleVatAddressSameAsGuestAddress()}}),bn("label",{htmlFor:"".concat(a,"-").concat(s),onKeyDown:t.handleKeyDown},void 0,bn(FormattedMessage,{id:s})))),bn(_e.a,{condition:e},void 0,bn(ln,{firstName:l.firstName,lastName:l.lastName,address1:l.address1,address2:l.address2,city:l.guestCity,zipPostalCode:l.zipPostalCode,country:l.countryName})))},t.setCountry=function(e,r){e.value&&t._update(r,e.label),"countryName"===r&&(e.value?(t._update("countryCode",e.value),t._update("stateProvinceCode",""),t._update("stateProvinceName","")):t._update("countryName",""),t.props.actions.findAssociatedStates(e.value))},t._onCountryChange=function(e,r){t._update("countryName",r),t._update("countryCode",e),t.state.stateProvinceName||(t._update("stateProvinceCode",""),t._update("stateProvinceName","")),t.props.actions.findAssociatedStates(e)};var r=_.get(e,"currentGuestProfile.".concat(e.addressType),{});return t.state={isVATAddressSameAsGuestAddress:!1,selectedCountryIndex:0,address1:_.get(r,"address1",""),address2:_.get(r,"address2",""),zipPostalCode:_.get(r,"zipPostalCode",""),city:_.get(r,"city",""),countryName:_.get(r,"countryName",""),countryCode:_.get(r,"countryCode",""),faxNumber:_.get(r,"faxNumber",""),countrySelectionAcitve:!0,vatNumber:_.get(r,"vatNumber",""),companyName:_.get(r,"companyName"),emailAddress:_.get(r,"emailAddress"),phone1:_.get(r,"phone1")},t}return t=i,(r=[{key:"componentDidUpdate",value:function(e,t){var r=this.props.addressType,n=_.get(this.props.currentGuestProfile,r,{}),o=_.get(e.currentGuestProfile,r,{}),i=t.isVATAddressSameAsGuestAddress,a=t.address1,s=t.address2,l=t.zipPostalCode,d=t.city,c=t.countryCode,u=t.countryName;if(i){var p=_.get(this.props,"guestDetails"),m=p.address1,f=p.address2,y=p.countryName,g=p.countryCode,v=p.zipPostalCode,h=p.city;m!==a&&this._update("address1",m),f!==s&&this._update("address2",f),y!==u&&this._update("countryName",y),g!==c&&this._update("countryCode",g),v!==l&&this._update("zipPostalCode",v),h!==d&&this._update("city",h)}n.address1!==o.address1&&this.setState({address1:n.address1}),n.address2!==o.address2&&this.setState({address2:n.address2}),n.countryName!==o.countryName&&this.setState({countryName:n.countryName}),_.get(n,"countryCode")!==_.get(o,"countryCode")&&this.setState({countryCode:_.get(n,"countryCode")}),n.zipPostalCode!==o.zipPostalCode&&this.setState({zipPostalCode:n.zipPostalCode}),n.city!==o.city&&this.setState({city:n.city}),_.get(n,"phone1")!==_.get(o,"phone1")&&this.setState({phone1:_.get(n,"phone1")}),_.get(n,"emailAddress")!==_.get(o,"emailAddress")&&this.setState({emailAddress:_.get(n,"emailAddress")}),_.get(n,"companyName")!==_.get(o,"companyName")&&this.setState({companyName:_.get(n,"companyName")}),_.get(n,"vatNumber")!==_.get(o,"vatNumber")&&this.setState({vatNumber:_.get(n,"vatNumber")}),_.get(n,"faxNumber")!==_.get(o,"faxNumber")&&this.setState({faxNumber:_.get(n,"faxNumber")})}},{key:"componentDidMount",value:function(){var e=this.props.addressType,t=_.get(this.props.currentGuestProfile,e,"countryCode");t&&this.props.actions.findAssociatedStates(t)}},{key:"render",value:function(){var e=this,t=this.state,r=t.isVATAddressSameAsGuestAddress,n=t.address1,o=t.address2,i=t.zipPostalCode,a=t.city,s=t.countryCode,l=t.emailAddress,d=t.companyName,c=t.vatNumber,u=this.props,p=u.addressType,m=u.countryList,f=u.currentGuestProfile,y=u.disabled,g=u.configData,v=u.restrictMaxLength,h=u.intl.formatMessage,b=u.isMultiReservation,C=u.roomNumber,P=_.get(f,p,{}).errors||{},O="billingAddressDetails"!==p?Object(gr.a)(g):["address1","address2","city","country","zipPostalCode"],I="billingAddressDetails"!==p?Object(gr.b)(g):[],w=defineMessages({address1:{id:"billingAddressDetails.placeHolder.address1",defaultMessage:"##billingAddressDetails.placeHolder.address1##"},address2:{id:"billingAddressDetails.placeHolder.address2",defaultMessage:"##billingAddressDetails.placeHolder.address2##"},city:{id:"billingAddressDetails.placeHolder.city",defaultMessage:"##billingAddressDetails.placeHolder.city##"},country:{id:"billingAddressDetails.placeHolder.country",defaultMessage:"##billingAddressDetails.placeHolder.country##"},zipPostalCode:{id:"billingAddressDetails.placeHolder.zipPostalCode",defaultMessage:"##billingAddressDetails.placeHolder.zipPostalCode##"},faxNumber:{id:"billingAddressDetails.placeHolder.faxNumber",defaultMessage:"##billingAddressDetails.placeHolder.faxNumber##"},phone1:{id:"billingAddressDetails.placeHolder.phone1",defaultMessage:"##billingAddressDetails.placeHolder.phone1##"},emailAddress:{id:"billingAddressDetails.placeHolder.emailAddress",defaultMessage:"##billingAddressDetails.placeHolder.emailAddress##"},companyName:{id:"billingAddressDetails.placeHolder.companyName",defaultMessage:"##billingAddressDetails.placeHolder.companyName##"},vatNumber:{id:"billingAddressDetails.placeHolder.vatNumber",defaultMessage:"##billingAddressDetails.placeHolder.vatNumber##"}}),S=bn(FormattedMessage,{id:"guestInfo.title.billingAddress"}),N=bn(b?"h3":"h2",{className:"app_heading1"},void 0,S);return bn("div",{className:cn.a.container},void 0,bn("hr",{}),bn("fieldset",{},void 0,bn("legend",{},void 0,N),bn("p",{},void 0,bn(FormattedMessage,{id:"guestInfo.text.billingAddressDescription"})),this.renderCopyVATAddressCheckbox(),bn(_e.a,{condition:O.includes("country")&&!r},void 0,bn(fr.a,{className:cn.a.countryField,label:h(w.country),labelId:w.country,required:I.includes("country"),suggestions:m,id:"countryName",name:"billing-country-name",searchLabel:!0,index:C,value:s,error:P.countryName&&Cn(P.countryName),autocompleteValue:"country-name",blockBrowserAutocomplete:!0,onChange:this._onCountryChange,disabled:y})),bn("br",{}),bn(_e.a,{condition:O.includes("address1")&&!r},void 0,bn(ge.a,{maxLength:36,className:cn.a.addressField1,name:"address",onChange:function(t){return e.setState({address1:t})},onBlur:function(){return e._update("address1",n)},required:I.includes("address1"),label:h(w.address1),type:"text",value:n,error:P.address1&&Cn(P.address1),autocomplete:"address-line1",disabled:y})),bn(_e.a,{condition:O.includes("address2")&&!r},void 0,bn(ge.a,{maxLength:36,className:cn.a.addressField2,name:"address2",onBlur:function(){return e._update("address2",o)},onChange:function(t){return e.setState({address2:t})},required:I.includes("address2"),label:h(w.address2),type:"text",value:o,error:P.address2&&Cn(P.address2),disabled:y})),bn(_e.a,{condition:O.includes("city")&&!r},void 0,bn(ge.a,{className:cn.a.cityField,maxLength:36,onChange:function(t){return e.setState({city:t})},onBlur:function(){return e._update("city",a)},label:h(w.city),required:I.includes("city"),type:"text",name:"city",value:a,error:P.city&&Cn(P.city),autocomplete:"address-level2",disabled:y})),bn(_e.a,{condition:O.includes("zipPostalCode")&&!r},void 0,bn(ge.a,{maxLength:20,className:cn.a.zipPostalCodeField,onChange:function(t){return e.setState({zipPostalCode:t})},onBlur:function(){return e._update("zipPostalCode",i)},required:I.includes("zipPostalCode"),label:h(w.zipPostalCode),type:"text",name:"zip",value:i,error:P.zipPostalCode&&Cn(P.zipPostalCode),autocomplete:"postal-code",disabled:y})),bn(ge.a,{className:cn.a.phoneNumberField,maxLength:20,onChange:function(t){return e.setState({phone1:t})},onBlur:function(){return e._update("phone1",e.state.phone1)},onKeyDown:v,label:h(w.phone1),name:"phone",type:"number",error:P.phone1&&Cn(P.phone1),value:this.state.phone1,autocomplete:"tel",disabled:y}),bn(ge.a,{className:cn.a.faxNumberField,maxLength:20,onChange:function(t){return e.setState({faxNumber:t})},onBlur:function(){return e._update("faxNumber",e.state.faxNumber)},onKeyDown:v,label:h(w.faxNumber),name:"fax",type:"number",error:P.faxNumber&&Cn(P.faxNumber),value:this.state.faxNumber,autocomplete:"tel",disabled:y}),bn(ge.a,{maxLength:250,onChange:function(t){return e.setState({emailAddress:t})},onBlur:function(){return e._update("emailAddress",l)},required:!1,className:cn.a.emailAddress,label:h(w.emailAddress),error:P.emailAddress&&Cn(P.emailAddress),type:"text",name:"email",value:l,disabled:y}),bn(ge.a,{onChange:function(t){return e.setState({companyName:t})},onBlur:function(){return e._update("companyName",d)},className:cn.a.companyName,required:!1,label:h(w.companyName),type:"text",name:"company-name",maxLength:60,error:P.companyName&&Cn(P.companyName),value:d,disabled:y}),bn(ge.a,{onChange:function(t){return e.setState({vatNumber:t})},onBlur:function(){return e._update("vatNumber",c)},className:cn.a.vatNumber,maxLength:15,error:P.vatNumber&&Cn(P.vatNumber),required:!1,label:h(w.vatNumber),type:"text",name:"vat-number",value:c,disabled:y})))}},{key:"_update",value:function(e,t){var r=this;this.setState(pn({},e,t),(function(){r.props.actions.setProfileInfo(pn({},e,t),[r.props.currentGuestProfile.CRS_referenceNumber],be.ld.PRIMARY,!0)}))}},{key:"updateAddressDetails",value:function(e){var t=this.props.address.find((function(t){return t.addressName===e}));this._update("address1",_.get(t,["address1"],"")),this._update("address2",_.get(t,["address2"],"")),this._update("countryName",_.get(t,["country"],"")),this._update("countryCode",_.get(t,["countrycode"],"")),this._update("zipPostalCode",_.get(t,["zipPostalCode"],"")),this._update("city",_.get(t,["city"],"")),this._update("stateProvinceName",_.get(t,["stateProvince"],"")),this._update("stateProvinceCode",_.get(t,["stateProvinceCode"],""))}},{key:"addAddress",value:function(){var e={};return this.props.address.map((function(t,r){e["name"+r]=t.addressName})),e["name".concat(this.props.address.length)]="New Address",e}},{key:"_toggleVatAddressSameAsGuestAddress",value:function(){var e=this;this.setState((function(e){return{isVATAddressSameAsGuestAddress:!e.isVATAddressSameAsGuestAddress}}),(function(){if(e.state.isVATAddressSameAsGuestAddress){var t=_.get(e.props.activeProfilesForBookingViews.find((function(t){return t.CRS_referenceNumber===_.get(e.props.currentGuestProfile,"CRS_referenceNumber")})),"guestDetails");e._update("address1",_.get(t,"address1","")),e._update("address2",_.get(t,"address2","")),e._update("countryName",_.get(t,"countryName","")),e._update("countryCode",_.get(t,"countryCode","")),e._update("zipPostalCode",_.get(t,"zipPostalCode","")),e._update("city",_.get(t,"city","")),e._update("phone1",_.get(t,"phone1","")),e._update("emailAddress",_.get(t,"emailAddress",""))}else e._update("address1",""),e._update("address2",""),e._update("countryName",""),e._update("countryCode",""),e._update("zipPostalCode",""),e._update("city",""),e._update("phone1",""),e._update("emailAddress","")}))}},{key:"handleKeyDown",value:function(e){Object(c.kb)(e)&&(e.preventDefault(),this._toggleVatAddressSameAsGuestAddress())}}])&&mn(t.prototype,r),n&&mn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||an)||an,On=injectIntl(Pn),In=r(1767),wn=r.n(In),Sn=r(7),Nn=r.n(Sn);function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t,r,n){_n||(_n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:_n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Dn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==An(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==An(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===An(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kn=Object(Le.memo)((function(e){var t=e.selected,r=e.styles,n=e.label,o=e.onClick,i=e.id,a=e.onKeyDown,s=e.paymentTabName;return Tn("button",{className:Nn()(r.tabButton,Dn({},r.selected,t)),tabIndex:0,onKeyDown:a,onClick:o,id:i,"data-paymenttype":s},void 0,Tn(FormattedMessage,{id:n}))}));kn.displayName="PaymentTab";var Fn,Rn=kn,En=r(258),Mn=r(1769),jn=r.n(Mn);function xn(e,t,r,n){Fn||(Fn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Fn,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var Vn=Object(Le.memo)((function(e){var t=e.checked,r=e.children,n=e.id,o=e.label,i=e.name,a=e.onChange,s=e.onKeyDown,l=e.value;return xn("div",{className:jn.a.container},void 0,xn("div",{className:jn.a.header},void 0,xn(er.a,{id:n,name:i,type:"radio",value:l,onChange:a,onKeyDown:s,checked:t}),o),xn("div",{className:jn.a.content},void 0,r))}));Vn.displayName="PaymentRadioButton";var Ln,Bn=Nt()(jn.a)(Vn);function Hn(e,t,r,n){Ln||(Ln="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Ln,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var Gn,zn=function(e){var t=e.togglePayment,r=e.associatedInputId,n=e.extraDetails,o=e.optionLabel,i=e.optionDescription;return Hn("label",{onClick:t,htmlFor:r},void 0,Hn("span",{className:"app_radioBox"}),o,i,n)},Un=r(102),qn=r(199),Kn=r(200),Wn=r(201),$n=r(10),Yn=r(360);function Xn(e,t,r,n){Gn||(Gn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Gn,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var Zn,Jn,Qn=function(e){var t=e.formatMessage,r=e.cvvPlaceholderMessage;return Xn(g.a,{extraSmall:!0,ariaDescribedBy:"cvv-modal-info-description"},void 0,Xn("div",{className:"app_text-center"},void 0,Xn("img",{src:"/public/images/cvv-info.png",alt:""}),Xn("p",{id:"cvv-modal-info-description"},void 0,t(r))))},eo=r(1771),to=r.n(eo);function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function no(e,t,r){return(t=so(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oo(e,t,r,n){Jn||(Jn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Jn,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,so(n.key),n)}}function so(e){var t=function(e,t){if("object"!==ro(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ro(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ro(t)?t:String(t)}function lo(e,t){return(lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function co(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=po(e);if(t){var o=po(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return uo(this,r)}}function uo(e,t){if(t&&("object"===ro(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function po(e){return(po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mo,fo={id:"guestPayment.text.CCVCodeExplanation",defaultMessage:"##guestPayment.text.CCVCodeExplanation##"},yo=withStyles(to.a)(Zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(i,Component);var t,r,n,o=co(i);function i(){var e;io(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={cardCode:_.get(e.props,"cardCode",""),cvvValidationError:_.get(e.props,"validationError","")},e._setCVVModalMessage=function(){var t=e.props,r=t.formatMessage;(0,t.setModalMsg)(oo(Qn,{formatMessage:r,cvvPlaceholderMessage:fo}))},e}return t=i,(r=[{key:"componentDidUpdate",value:function(e){var t=Object(En.c)(this.props.cardCVV,this.props.cardNumber);_.isEqual(e.cardCVV,this.props.cardCVV)?_.isEqual(e.validationError,this.props.validationError)?_.isEqual(e.cardCode,this.props.cardCode)||this.setState({cardCode:_.get(this.props,"cardCode","")}):this.setState({cvvValidationError:t}):this.setState({cvvValidationError:t,cardCode:_.get(this.props,"cardCode","")})}},{key:"_onKeyDown",value:function(e){e.keyCode!==be.ac.SPACE&&e.keyCode!==be.ac.ENTER||(e.preventDefault(),this._setCVVModalMessage())}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.security,o=r.cardCVV,i=r.onChange,a=r.onBlur,s=r.formatMessage,l=r.isModalOpen,d=r.cvvForSavedCC,c=r.validationWarning,u=this.state,p=u.cardCode,m=u.cvvValidationError,f=Nn()(to.a.cvvField,(no(e={},to.a.cvvFieldInModal,l),no(e,to.a.cvvFieldSavedCC,d),e)),y=_.isEmpty(o)||!Object(qn.c)(o,p),g=_.get(n,"name",!1)?s({id:"guestPayment.ariaLabel.cvvHelp",defaultMessage:"##guestPayment.ariaLabel.cvvHelp##"},{securityName:n.name}):s({id:"guestPayment.ariaLabel.cvv",defaultMessage:"guestPayment.ariaLabel.cvv"});return oo(ge.a,{name:"cvc",autocomplete:"cc-csc",className:f,label:_.get(n,"name")||s({id:"guestPayment.label.cvv"}),maxLength:_.get(n,"size",!1)?Number(_.get(n,"size")):3,value:o,required:!0,error:y&&m.cardCVV,warning:_.isEmpty(o)&&d&&c,onBlur:function(e){return a(e,!0)},onChange:i,withIconRight:!0},void 0,oo("a",{role:"button","aria-label":g,className:to.a.cvvInfo,tabIndex:"0",onClick:this._setCVVModalMessage,onKeyDown:function(e){return t._onKeyDown(e)}},void 0,oo("span",{"aria-hidden":"true"})))}}])&&ao(t.prototype,r),n&&ao(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||Zn;function go(e,t,r,n){mo||(mo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:mo,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function vo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,d=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ho(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ho(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bo,_o,Co=function(e){var t=e.currencyCode,r=e.formatMessage,n=e.formatNumber,o=e.onChange,i=e.options,a=e.reservationId,s=e.selectedInstallmentPlan,l=e.styles,d=Object(En.a)(i,r,n,t),c=_.head(d),u=vo(Object(Le.useState)(c),2),p=u[0],m=u[1],f=vo(Object(Le.useState)("0"),2),y=f[0],g=f[1];Object(Le.useEffect)((function(){var e=i[Number(s)];m(d[Number(s)]),g(s),o(s,e)}),[s]);var v=function(e){var t=_.get(e,"target.id",""),r=_.get(e,"target.value",""),n=_.split(t,"-"),a=_.last(n),s=i[Number(a)];m(r),g(a),o(a,s)},h=p||d[y||s||0],b=r({id:"guestPaymentCreate.installments.label"}),C=r({id:"guestPaymentCreate.installments.charged"}),P=Object(En.b)(h,r);return go("div",{className:l.installmentContainer},void 0,go("ul",{"aria-label":b},void 0,_.map(d,(function(e,t){return go("li",{},t,go(er.a,{id:"payment-installment-radio-button-".concat(a,"-").concat(t),type:"radio",value:e,name:"".concat(a,"-instalments-options"),checked:p?p===e:0===t,onChange:v}),go("label",{htmlFor:"payment-installment-radio-button-".concat(a,"-").concat(t)},void 0,go("span",{className:"app_radioBox"}),go("span",{},void 0,e)))}))),go(_e.a,{condition:!!h},void 0,go("div",{className:l.payInstallDescription},void 0,go("p",{role:"alert",className:"sr-only"},void 0,C,P),go("span",{},void 0,C),go("div",{className:l.payInstallSuccess},void 0,P))))},Po=r(186),Oo=r(66),Io=r(1773),wo=r.n(Io);function So(e){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t,r,n){_o||(_o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:_o,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function To(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(r),!0).forEach((function(t){Do(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ao(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Do(e,t,r){return(t=Fo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ko(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fo(n.key),n)}}function Fo(e){var t=function(e,t){if("object"!==So(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===So(t)?t:String(t)}function Ro(e,t){return(Ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Eo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xo(e);if(t){var o=xo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Mo(this,r)}}function Mo(e,t){if(t&&("object"===So(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jo(e)}function jo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vo=withStyles(wo.a)(bo=bindRedux([ee.a,re.a,ie.a,u.a,m.a],[{getPaymentInstallmentOptions:Wn.getPaymentInstallmentOptions,resetPaymentInstallmentOptions:Wn.resetPaymentInstallmentOptions,enablePaymentValidationAction:W.enablePaymentValidationAction,setIsPaymentValid:W.setIsPaymentValid,setModalMsg:f.setModalMsg,resetPaymentValidation:W.resetPaymentValidation,setSelectedPaymentMethod:$.setSelectedPaymentMethod,setReservationWalletId:$.setReservationWalletId,setCopyingInfoFromOtherReservation:$.setCopyingInfoFromOtherReservation,setReservationCreditDebitCard:Wn.setReservationCreditDebitCard}])(bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ro(e,t)}(i,Component);var t,r,n,o=Eo(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).debouncedCreateGuestPaymentInfo=_.debounce((function(){return t.createGuestPaymentInfo()}),500),t.debouncedValidateCardNumber=_.debounce((function(){return t._validateCardNumber()}),2500),t.updateInstallments=function(e,r){t.setState({selectedInstallmentPlan:To({selectedIndex:e},r)},t.createGuestPaymentInfo)},t.getInstallmentOptions=function(e){var r=t.props,n=r.hotelDetails,o=r.reservations,i=r.reservationId,a=r.actions,s=r.supportedCreditCardCodes,l=_.get(n,"hotelId"),d=_.get(n,"hotelName"),c=_.find(o,(function(e){return e.Id===i})),u=Object(En.l)(e,s),p=_.get(u,"code"),m=_.get(c,"CurrencyCode",""),f=Object(En.i)(c),y=Object(En.j)(c),g={BaseAmount:f,CreditCardNumber:e,Currency:m,ConfirmationNumber:i,HotelId:l,HotelName:d,FormOfPayment:"CC",PaymentCode:p,TotalAmount:y};a.getPaymentInstallmentOptions(g,i).then((function(e){var r=_.get(t.state,"selectedInstallmentPlan.selectedIndex",0),n=_.get(e,"paymentInstallmentOptions",[]);t.setState({isPaymentInstallmentsLoading:!1,selectedInstallmentPlan:To({selectedIndex:r},_.get(e,["paymentInstallmentOptions",r],{})),paymentInstallmentOptionsError:!_.size(n)},t.createGuestPaymentInfo)}))},t._onCardNumberBlur=function(){var e=t._validateCardNumber().isCardNumberValid,r=t.state.cardNumber,n=t.props,o=n.supportedCreditCardCodes,i=n.formatMessage;if(e){var a=Object(En.l)(r,o),s=i({id:"guestPaymentCreate.ariaLabel.cardNumber"},{cardNetwork:_.get(a,"niceType","")}),l=Object(qn.b)(r.trim())[0];t.setState({security:l.security,creditCardAriaLabel:s})}else t.setState({security:{}});return t.createGuestPaymentInfo(),e},t._onCardCVVChange=function(e){t.setState({cardCVV:Object(Un.b)(e)},(function(){var r=t.state.cardNumber&&t.state.cardNumber.trim(),n=_.get(Object(qn.a)(r),"niceType"),o=_.get(_.find(Kn.a,(function(e){return _.isEqual(e.niceType,n)})),"security.size",0);_.isEqual(parseInt(o),_.size(e))&&(t._validateCVVCode(),t.createGuestPaymentInfo())}))},t.getSavedSelectedCvvValidationError=function(e,t,r){var n=_.head(Object(qn.b)(t)),o={};return _.isEmpty(e)?o.cardCVV=No(FormattedMessage,{id:"guestPaymentCreate.error.securityCodeRequired",values:{securityCode:_.get(n,"security.name","CVV")}}):Object(qn.c)(e,_.get(r,"CardCode"))||(o.cardCVV=No(FormattedMessage,{id:"guestPaymentCreate.error.invalidSecurityCode",values:{securityCode:_.get(n,"security.name","CVV")}})),o},t.validateCardCVV=function(e){var r=_.get(t.props.guestPaymentInfo,t.props.reservationId)||t.props.guestPaymentInfo,n=_.get(r,"CardNumber"),o=t.getSavedSelectedCvvValidationError(e,n,r);t.setState({savedSelectedCvvValidationError:o,savedSelectedCvvValidationWarning:""}),t.props.actions.setIsPaymentValid(_.isEmpty(o),t.props.reservationId)},t.onSavedCardCvvChange=function(e,r){e=Object(Un.b)(e);var n=_.cloneDeep(t.props.guestPaymentInfo[t.props.reservationId]);n.CardSecurityCode=e;var o=_.find(Kn.a,(function(e){return _.isEqual(e.code,n.CardCode)})),i=_.get(o,"security.size",0);_.isEqual(parseInt(i),_.size(e))||r?t.setState({savedSelectedCreditCardCvv:e,savedSelectedCvvValidationWarning:""},(function(){t.props.getGuestPaymentInfo(n,t.props.reservationId),t.validateCardCVV(e)})):t.setState({savedSelectedCreditCardCvv:e,savedSelectedCvvValidationWarning:""})},t._onCardCVVBlur=function(e){t.setState({cardCVV:Object(Un.b)(e)},(function(){t._validateCVVCode(),t.createGuestPaymentInfo()}))},t._onCardHolderBlur=function(){t._validateCardholder(),t.createGuestPaymentInfo()},t._onExpirationDateBlur=function(){t._validateExpirationDate(),t.createGuestPaymentInfo()},t.isCvvCodeRequiredForSavedCC=function(){var e=Object(gr.b)(t.props.configData);return!(!t.props.updateReservationInProgress||!e.includes("cvvCode"))||Boolean(e.includes("cvvCode")&&(_.get(t.state,"selectedPaymentMethodOption.PaymentToken",!1)||_.get(t.state,"PaymentToken",!1)))},t.getPaymentValidationRule=function(e,t){return e.find((function(e){return e.code===t}))},t._getPaymentProps=function(){var e=t.props,r=e.activeProfilesForBookingViews,n=e.activeReservationsForBookingViews,o=e.reservationId,i=e.intl,a=e.timezone,s=i.formatMessage,l=n.find((function(e){return e.Id===o})),d=_.head(_.get(l,"StartDate","").split("T")),c=s(defineMessages({id:"guestDetails.paymentSelectOption.creditCard"}));return{countryCode:Object(Yn.d)(r,o),currencyCode:Object(Yn.e)(n,o),currentLanguageCode:_.get(t.props,"selectedLanguage",_.get(t.props,["intl","locale"])),currentBookingAmount:Object(Yn.n)(n,o),leadDay:Object(Oo.d)(d,a),creditCardOptionDescription:c,guestPhoneNumber:Object(Yn.f)(r,o),displayCurrencyCode:_.get(t.props,["currentUrlParams","currency"],"")}},t._areAllPaymentMethodsProcessed=function(){var e=t.props,r=e.activeReservationsForBookingViews,n=e.reservationId,o=e.paymentProcessorRules,i=e.isAlwaysRedirect,a=e.isPayNow,s=e.isDepositPolicy,l=t._getPaymentProps(),d=Object(Yn.i)(r,n),c=Object(Yn.m)(r,n),u=Object(Yn.p)(o,c,l);return Object(Yn.a)(u,d)&&i&&(a||s)},t._areAnyCCNotProcessed=function(){var e=t.props,r=e.activeReservationsForBookingViews,n=e.reservationId,o=e.paymentProcessorRules,i=t._getPaymentProps(),a=Object(Yn.i)(r,n),s=Object(Yn.m)(r,n),l=Object(Yn.p)(o,s,i);return Object(Yn.b)(l,a)},t._areAnyCCProcessed=function(){var e=t.props,r=e.activeReservationsForBookingViews,n=e.reservationId,o=e.paymentProcessorRules,i=e.isAlwaysRedirect,a=e.isPayNow,s=e.isDepositPolicy,l=t._getPaymentProps(),d=Object(Yn.i)(r,n),c=Object(Yn.m)(r,n),u=Object(Yn.p)(o,c,l);return Object(Yn.c)(u,d)&&i&&(a||s)},t._shouldRenderRedirectWarningMessage=function(){var e=t.props,r=e.isAlwaysRedirect,n=e.isInModifyMode;return!(!r||!t._areAllPaymentMethodsProcessed()||n)},t._shouldDisplayProcessedPaymentMethodOptions=function(){var e=t.props,r=e.isAlwaysRedirect,n=e.isDepositPolicy,o=e.isPayNow;return!!(r&&t._areAnyCCNotProcessed()&&t._areAnyCCProcessed()&&(n||o))},t._isPaymentMethodProcessed=function(e){var r=t.props,n=r.activeReservationsForBookingViews,o=r.reservationId,i=r.isAlwaysRedirect,a=r.isInModifyMode,s=r.isPayNow,l=r.isDepositPolicy,d=Object(Yn.i)(n,o);return Object(Yn.q)(e,d)&&i&&!a&&(s||l)},t._initialPaymentOption=t._getSelectedPaymentMethodOption(e.guestPaymentInfo,be.Pc.CREDIT_CARD),t.state={cardHolder:_.get(e.guestPaymentInfo,"["+e.reservationId+"].CardHolder","")||_.get(e.creditDebitCard,"CardHolder",""),cardNumber:Object(Un.b)(_.get(e.guestPaymentInfo,"["+e.reservationId+"].CardNumber","")||_.get(e.creditDebitCard,"CardNumber",""))||_.get(e.guestPaymentInfo,"CardNumber",""),cardExpirationDate:Object(Un.b)(_.get(e.guestPaymentInfo,"["+e.reservationId+"].CardExpirationDate","")||_.get(e.creditDebitCard,"CardExpirationDate","")),cardCVV:Object(Un.b)(_.get(e.guestPaymentInfo,"["+e.reservationId+"].CardSecurityCode","")||_.get(e.creditDebitCard,"CardSecurityCode","")),validationError:{},security:{},selectedPaymentMethodOption:t._initialPaymentOption,selectedProviderCode:"",initialPaymentInfoSet:!1,isCurrentPaymentProcessed:!1,savedSelectedCreditCardCvv:Object(Un.b)(_.get(e.guestPaymentInfo,[e.reservationId,"CardSecurityCode"],"")||_.get(e.creditDebitCard,"CardSecurityCode","")),selectedInstallmentPlan:_.get(e.guestPaymentInfo,[e.reservationId,"installmentPlan"],{})||_.get(e.creditDebitCard,"installmentPlan",{}),isInitialLoadMadeForPaymentInstallments:!1,isPaymentInstallmentsLoading:!1,paymentInstallmentOptionsError:!1,lastFullCardNumber:""},t.guestPaymentErrors=t.guestPaymentErrors.bind(jo(t)),t.runPaymentValidations=t.runPaymentValidations.bind(jo(t)),t._getSelectedPaymentMethodOption=t._getSelectedPaymentMethodOption.bind(jo(t)),t._validateCardNumber=t._validateCardNumber.bind(jo(t)),t.createGuestPaymentInfo=t.createGuestPaymentInfo.bind(jo(t)),t}return t=i,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.guestPaymentInfo,r=e.toggleIsSavedCCSelectedPaymentOption,n=e.isPayMonthlySelected,o=e.updateReservationInProgress,i=e.reservationId,a=this.state,s=a.cardNumber,l=a.lastFullCardNumber,d=_.size(this._getCreditCardMask(s).replace(/ /g,"")),c=Object(En.d)(s,d,l,this.props).shouldMakePaymentInstallmentCall,u=_.get(t,[i,"PaymentToken"]),p=_.get(t,[i,"isNew"]);if(u&&!p){var m=_.get(t,i,{}),f=Object(Un.b)(_.get(m,"CardSecurityCode","")),y=Object(Un.b)(_.get(m,"CardNumber","")),g=this.getSavedSelectedCvvValidationError(f,y,m);r(!0),this.setState({isSavedCCSelectedPaymentOption:!0,selectedPaymentMethodOption:m,savedSelectedCreditCardCvv:f,savedSelectedCvvValidationError:g,savedSelectedCvvValidationWarning:_.isEmpty(f)?No(FormattedMessage,{id:"guestDetails.warning.confirmCvvMessage"}):""})}c&&!o&&n&&(this.getInstallmentOptions(s),this.setState({isPaymentInstallmentsLoading:!0}))}},{key:"componentDidUpdate",value:function(e,t){var r=this,n=this.props,o=n.isSubmitting,i=n.actions,a=n.activeProfileIdsForBookingViews,s=n.activeReservationsForBookingViews,l=n.enablePaymentValidation,d=n.reservationId,c=n.guestPaymentInfo,u=n.loggedInUserProfile,p=n.walletPaymentVerified,m=n.isCreateProfileSelected,f=n.isPayMonthlySelected,y=n.updateReservationInProgress,g=n.isNewCreditCardSelected,v=n.creditDebitCard,h=_.find(s,(function(e){return e.Id===d})),b=_.find(e.activeReservationsForBookingViews,(function(e){return e.Id===d})),C=Object(qn.b)(this.state.cardNumber),P=C&&C.length>0?C[0].code:null,O=this.state.selectedProviderCode||P,I=_.get(c,[d,"hasValidationError"],!1),w=_.get(e,"guestPaymentInfo",{}),S=_.get(c,[d,"PaymentToken"]),N=_.get(w,[d,"PaymentToken"]),A=_.get(h,"previouslySelectedAltPaymentMethod.PaymentToken",""),T=_.get(b,"previouslySelectedAltPaymentMethod.PaymentToken",""),D=_.get(c,[d,"CardNumber"],""),k=_.get(c,[d,"paymentType"],""),F=D||this.state.cardNumber||"",R=_.get(c,[d,"isCurrentReservationHasPaymentInstallments"],!1),E=this._getCreditCardMask(F).replace(/ /g,"").length,M=!y&&e.updateReservationInProgress!==y,j=Object(En.d)(F,E,this.state.lastFullCardNumber,this.props,M).shouldMakePaymentInstallmentCall,x=Object(En.n)({guestPaymentInfo:c,isCurrentReservationHasPaymentInstallments:R,isInitialLoadMadeForPaymentInstallments:this.state.isInitialLoadMadeForPaymentInstallments,loggedInUserProfile:u,prevPropsLoggedInUserProfile:e.loggedInUserProfile,prevState:t,reservationId:d}),V=this._isPaymentMethodProcessed(O)||this._areAllPaymentMethodsProcessed(),L=_.get(c,d),B=k===be.Pc.CREDIT_CARD&&(!f||f&&!_.isEmpty(v))&&!_.isEqual(v,L);if(this.props.enablePaymentValidation&&!V){var H=this.state,G=H.cardCVV,z=H.cardExpirationDate,U=H.cardHolder,q=H.cardNumber,K=G||z||U||q;o&&!K&&this.runPaymentValidations(),K&&this.runPaymentValidations(),i.enablePaymentValidationAction(!1,a,{isSubmitting:!1}),this.props.getGuestPaymentInfoErrors(this.state.validationError)}if(M&&(h.copyingInfoFromOtherReservation||f)&&j&&f&&(this.getInstallmentOptions(F),this.setState({isPaymentInstallmentsLoading:!0})),!y&&h.copyingInfoFromOtherReservation&&h.copyingInfoFromOtherReservation!==b.copyingInfoFromOtherReservation&&(i.setCopyingInfoFromOtherReservation(d,!1),this.setState({isSavedCCSelectedPaymentOption:Boolean(S),selectedPaymentMethodOption:this._getSelectedPaymentMethodOption(c,this.state.defaultPaymentMethodOption,Boolean(_.get(c,[d,"PaymentToken"],""))),validationError:{}},(function(){return I&&r.runPaymentValidations()}))),p&&e.walletPaymentVerified!==p&&this.setState({isSavedCCSelectedPaymentOption:Boolean(S)}),!_.isEqual(u,e.loggedInUserProfile)||_.isEqual(_.get(e,"guestDetails.countryCode"),_.get(this.props,"guestDetails.countryCode"))||this.state.isSavedCCSelectedPaymentOption||this.setState({selectedPaymentMethodOption:this._initialPaymentOption}),x&&(this.state.isInitialLoadAfterLoggingIn?this.setState({isInitialLoadAfterLoggingIn:!1}):this.setState({isSavedCCSelectedPaymentOption:Boolean(_.get(c,[d,"PaymentToken"],"")),isInitialLoadMadeForPaymentInstallments:!0,selectedInstallmentPlan:_.get(c,[d,"installmentPlan"],{})},(function(){return r.updateCardNumber(F)}))),(l&&this._shouldRenderRedirectWarningMessage()||B&&!y)&&(this.createGuestPaymentInfo(),i.setIsPaymentValid(!0,d),i.enablePaymentValidationAction(!1,a,{isSubmitting:!1})),!_.isEqual(u,e.loggedInUserProfile)&&!_.isEmpty(this.props.guestPaymentInfo[this.props.reservationId])&&!m){var W=_.map(_.get(u,"paymentCardList",[]),(function(e){return _.get(e,"PaymentCard")})),$=Boolean(_.size(W)),Y=$?_.head(W):{};this.props.getGuestPaymentInfo(Y,d),this.setState({isSavedCCSelectedPaymentOption:$,selectedInstallmentPlan:{},validationError:{},isInitialLoadAfterLoggingIn:!0,selectedPaymentMethodOption:$?_.head(W):{},savedSelectedCvvValidationWarning:No(FormattedMessage,{id:"guestDetails.warning.confirmCvvMessage"})})}var X=S&&!_.isEqual(N,S),Z=A&&!_.isEqual(T,A);if((X||Z)&&!this.state.isSavedCCSelectedPaymentOption&&!g){var J=_.get(c,d,{}),Q=Object(Un.b)(_.get(J,"CardSecurityCode","")),ee=Object(Un.b)(_.get(J,"CardNumber","")),te=this.getSavedSelectedCvvValidationError(Q,ee,J);this.setState({isSavedCCSelectedPaymentOption:!0,selectedPaymentMethodOption:J,savedSelectedCreditCardCvv:Q,savedSelectedCvvValidationError:te,savedSelectedCvvValidationWarning:_.isEmpty(Q)?No(FormattedMessage,{id:"guestDetails.warning.confirmCvvMessage"}):""})}_.isEqual(this.props.isSavedCCSelectedPaymentOption,e.isSavedCCSelectedPaymentOption)||this.setState({isSavedCCSelectedPaymentOption:this.props.isSavedCCSelectedPaymentOption}),e.isPayMonthlySelected&&!f&&this.state.paymentInstallmentOptionsError&&this.setState({paymentInstallmentOptionsError:!1})}},{key:"shouldComponentUpdate",value:function(e){return!e.languageChangeInProgress}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,r=t.reservationId,n=t.supportedCreditCardCodes,o=t.formatMessage,i=_.get(e,"isPayMonthlySelected",!1),a=_.get(e.guestPaymentInfo,"["+r+"]"),s=_.get(a,"isNew",!1),l=_.get(a,"paymentType","")===be.Pc.CREDIT_CARD,d=s&&l,c=_.get(a,"CardNumber","")||_.get(e.creditDebitCard,"CardNumber",""),u=e.isNewCreditCardSelected&&!this.props.isNewCreditCardSelected&&_.includes(c,"X");if(a&&(i&&!d||u))this.setState({cardCode:"",cardHolder:"",cardNumber:"",creditCardAriaLabel:"",changedCardNumber:!1,cardExpirationDate:"",cardCVV:"",PaymentToken:"",savedSelectedCreditCardCvv:"",selectedProviderCode:"",initialPaymentInfoSet:!0,selectedPaymentMethodOption:this._getSelectedPaymentMethodOption(e.guestPaymentInfo,this.state.defaultPaymentMethodOption,Boolean(_.get(e.guestPaymentInfo,[this.props.reservationId,"PaymentToken"],""))),isSavedCCSelectedPaymentOption:!1});else if(a){var p=Object(Un.b)(this.getCardNumberFromProps(e)),m=Object(En.l)(p,n),f=_.get(m,"niceType",""),y=o({id:"guestPaymentCreate.ariaLabel.cardNumber"},{cardNetwork:f}),g=this._getCreditCardMask(p).replace(/ /g,"").length,v=_.size(p)===g,h=!_.isEmpty(m)&&v&&f;this.setState(To(To({cardCode:_.get(e.guestPaymentInfo,[this.props.reservationId,"CardCode"],"")||_.get(e.creditDebitCard,"CardCode",""),cardHolder:_.get(e.guestPaymentInfo,[this.props.reservationId,"CardHolder"],"")||_.get(e.creditDebitCard,"CardHolder",""),cardNumber:p,cardExpirationDate:Object(Un.b)(_.get(e.guestPaymentInfo,[this.props.reservationId,"CardExpirationDate"],"")||_.get(e.creditDebitCard,"CardExpirationDate","")),cardCVV:Object(Un.b)(_.get(e.guestPaymentInfo,[this.props.reservationId,"CardSecurityCode"],"")||_.get(e.creditDebitCard,"CardSecurityCode","")),PaymentToken:_.get(e.guestPaymentInfo,[this.props.reservationId,"PaymentToken"],"")||_.get(e.creditDebitCard,"PaymentToken",""),savedSelectedCreditCardCvv:Object(Un.b)(_.get(e.guestPaymentInfo,[this.props.reservationId,"CardSecurityCode"],"")||_.get(e.creditDebitCard,"CardSecurityCode",""))},i&&{selectedInstallmentPlan:_.get(e.guestPaymentInfo,[this.props.reservationId,"installmentPlan"],{})||_.get(e.creditDebitCard,"installmentPlan",{})}),{},{selectedProviderCode:_.get(e.guestPaymentInfo,[this.props.reservationId,"ProviderCode"],"")||_.get(e.creditDebitCard,"ProviderCode",""),initialPaymentInfoSet:!0,selectedPaymentMethodOption:this._getSelectedPaymentMethodOption(e.guestPaymentInfo,this.state.defaultPaymentMethodOption,Boolean(_.get(e.guestPaymentInfo,[this.props.reservationId,"PaymentToken"],""))),creditCardAriaLabel:h?y:""}))}}},{key:"getCardNumberFromProps",value:function(e){var t=e.activeReservationsForBookingViews,r=e.reservationId,n=_.find(t,(function(e){return e.Id===r})),o=_.get(e.guestPaymentInfo,[r,"CardNumber"],"")||_.get(n,"creditCard.CardNumber","")||_.get(e.creditDebitCard,"CardNumber",""),i=this.state.cardNumber,a=this.state.changedCardNumber,s=this._getCreditCardMask(i).replace(/ /g,"").length,l=!(_.size(i)===s&&i===this.state.lastFullCardNumber||!o),d=!!i&&!o,c=_.get(e,["guestPaymentInfo",r,"isDataCopiedFromAnotherRes"]);return(d||l)&&!c&&_.includes(o,"X")||!i&&a?i:o}},{key:"_getSelectedPaymentMethodOption",value:function(e,t,r){var n=_.get(e,[this.props.reservationId,"paymentType"],t),o=_.get(e,[this.props.reservationId,"ProviderCode"],"");return(_.isUndefined(r)?_.get(this.state,"isSavedCCSelectedPaymentOption"):r)?_.get(e,this.props.reservationId,""):o?"".concat(be.Pc.CREDIT_CARD,"_").concat(o):n}},{key:"_getPaymentType",value:function(){var e=this.props.isDepositPolicy||this.props.allowPay&&!this.props.isPayLater;return this._areAllPaymentMethodsProcessed()&&e&&!this.props.isInModifyMode?be.Pc.UNDETERMINED:be.Pc.CREDIT_CARD}},{key:"runPaymentValidations",value:function(){var e=this.props,t=e.actions,r=e.activeProfilesForBookingViews,n=e.activeReservationsForBookingViews,o=e.guestPaymentInfo,i=e.isInModifyMode,a=e.reservationId,s=e.configData;if(_.get(this.state,"isSavedCCSelectedPaymentOption")||_.get(o,[a,"isDataCopiedFromAnotherConfirmedRes"])){var l=_.find(n,(function(e){return e.Id===a})),d=Object($n.v)(l,r),c=Object(gr.b)(s);Object(En.o)(i,o,a,d,_.get(o,[a,"isDataCopiedFromAnotherConfirmedRes"]),c,this.state.selectedPaymentMethodOption)||_.isEmpty(_.get(this.state,"savedSelectedCvvValidationError"))&&_.get(this.state,"selectedPaymentMethodOption.CardSecurityCode")?t.setIsPaymentValid(!0,a):this.validateCardCVV(_.get(this.state,"selectedPaymentMethodOption.CardSecurityCode"))}else{var u=this._validateCardholder(!0),p=u.isCardHolderValid,m=u.cardHolderValidationError,f=this._validateExpirationDate(!0),y=f.isCardExpirationDateValid,g=f.cardExpirationDateValidationError,v=this._validateCardNumber(!1,!0,!0),h=v.isCardNumberValid,b=v.cardNumberValidationError,C=this._validateCVVCode(!0),P=C.isCVVCodeValid,O=C.cardCVVValidationError;p&&y&&h&&P&&!this.state.paymentInstallmentOptionsError?t.setIsPaymentValid(!0,a):t.setIsPaymentValid(!1,a),this.setState({validationError:{cardCVV:O,cardNumber:b,cardExpirationDate:g,cardHolder:m}})}}},{key:"guestPaymentErrors",value:function(e){this.props.getGuestPaymentInfoErrors(e),this.props.hasPayment&&this.createGuestPaymentInfo()}},{key:"createGuestPaymentInfo",value:function(){var e,t,r,n,o,i,a,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=this.props,c=d.reservationId,u=d.actions,p=d.getGuestPaymentInfo,m=d.isInModifyMode,f=d.isPayMonthlySelected,y=(this._isPaymentMethodProcessed(this.state.selectedProviderCode)||this._areAllPaymentMethodsProcessed())&&!m;if(this.state.isSavedCCSelectedPaymentOption)e=_.get(this.state,"selectedPaymentMethodOption.CardCode"),n=_.get(this.state,"selectedPaymentMethodOption.CardHolder"),r=_.get(this.state,"selectedPaymentMethodOption.CardNumber"),t=_.get(this.state,"selectedPaymentMethodOption.CardExpirationDate"),o=_.get(this.state,"selectedPaymentMethodOption.CardSecurityCode"),a=_.get(this.state,"selectedPaymentMethodOption.PaymentToken"),i=_.get(this.state,"selectedInstallmentPlan");else if(!y){var g=Object(qn.b)(this.state.cardNumber,this.state.cardCode);e=g&&g.length>0?g[0].code:null,n=this.state.cardHolder,r=this.state.cardNumber,t=this.state.cardExpirationDate,o=this.state.cardCVV,a=l?"":_.get(this.state,"PaymentToken",""),i=this.state.selectedInstallmentPlan}var v=_.keys(this.state.validationError),h=_.size(v)>0,b=To(To({CardHolder:n,CardNumber:r,CardExpirationDate:t,CardSecurityCode:o,isPreferred:this.state.isPreferred,CardCode:e,isNew:!_.get(this.state,"selectedPaymentMethodOption.PaymentToken"),hasValidationError:h,paymentType:this._getPaymentType(),PaymentToken:a,ProviderCode:"",isPaymentMethodProcessed:y},f&&{installmentPlan:i}),{},{isDataCopiedFromAnotherRes:!s&&_.get(this.props,["guestPaymentInfo",this.props.reservationId,"isDataCopiedFromAnotherRes"],!1),isDataCopiedFromAnotherConfirmedRes:!l&&_.get(this.props,["guestPaymentInfo",this.props.reservationId,"isDataCopiedFromAnotherConfirmedRes"],!1)}),C=e||this._getSelectedOPaymentMethod();p(b,c),u.setSelectedPaymentMethod(c,C),u.setReservationCreditDebitCard(c,b),this.setState({changedCardNumber:!1})}},{key:"updateCardHolder",value:function(e){this.setState({cardHolder:e.replace(/[0-9]/g,"")},this.createGuestPaymentInfo)}},{key:"updateExpirationDate",value:function(e){var t=Object($n.xb)(e);this.setState({cardExpirationDate:Object(Un.b)(t)},this.createGuestPaymentInfo)}},{key:"updateCardNumber",value:function(e){var t=this,r=this.props,n=r.reservationId,o=r.actions,i=r.isPayMonthlySelected,a=r.updateReservationInProgress,s=this._getCreditCardMask(e).replace(/ /g,"").length,l=e.length>s?e.substring(0,s):e,d=Object(En.d)(l,s,this.state.lastFullCardNumber,this.props),c=d.shouldMakePaymentInstallmentCall,u=d.shouldClearPaymentInstallments,p=d.lastFullCardNumber,m=d.isCardFilledOut;this.setState(To({cardNumber:Object(Un.b)(l),changedCardNumber:!0,isPaymentInstallmentsLoading:!0,lastFullCardNumber:Object(Un.b)(p)},this.state.creditCardAriaLabel&&{creditCardAriaLabel:""}),(function(){t._validateCardNumber(c,m),t.debouncedValidateCardNumber(),t.debouncedCreateGuestPaymentInfo(),c&&!a&&i?t.getInstallmentOptions(e):u&&o.resetPaymentInstallmentOptions(n)}))}},{key:"_validateCardNumber",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.props,i=o.supportedCreditCardCodes,a=void 0===i?[]:i,s=o.isInModifyMode,l=this.state.cardNumber?this.state.cardNumber.trim():void 0,d=!0,c=_.get(this.state,"validationError",{}),u=_.cloneDeep(c);delete u.cardNumber;var p=this._shouldDisplayProcessedPaymentMethodOptions()&&!s;return r&&(_.isEmpty(l)?(u.cardNumber=No(FormattedMessage,{id:"guestPaymentCreate.error.cardNumberRequired"}),d=!1):!p&&!Object(qn.a)(l).validateCCNumber()||p&&!Object(qn.d)(l,this.state.selectedProviderCode)?(u.cardNumber=No(FormattedMessage,{id:"guestPaymentCreate.error.invalidCard"}),d=!1):a.length>0&&!p&&!Object(qn.a)(l).validateAllowedCardType(a)&&(u.cardNumber=No(FormattedMessage,{id:"guestPaymentCreate.error.hotelDoesNotSupportProvidedCard"}),d=!1)),n?this.guestPaymentErrors(u):this.setState({validationError:u,isPaymentInstallmentsLoading:t},(function(){return e.guestPaymentErrors(u)})),{isCardNumberValid:d,cardNumberValidationError:u.cardNumber}}},{key:"_validateCVVCode",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=!0,n=this.state,o=this.props,i=_.trim(n.cardCVV),a=_.trim(n.cardNumber),s=_.get(n,"validationError",{}),l=_.cloneDeep(s);delete l.cardCVV;var d=_.get(n,"security.name","CVV"),c=this._shouldDisplayProcessedPaymentMethodOptions()&&!o.isInModifyMode,u=Object(gr.b)(o.configData),p=Object(gr.a)(o.configData);return u.includes("cvvCode")&&p.includes("cvvCode")?_.isEmpty(i)?(l.cardCVV=No(FormattedMessage,{id:"guestPaymentCreate.error.securityCodeRequired",values:{securityCode:d}}),r=!1):(!c&&!Object(qn.a)(a).validateCVVCode(i)||c&&!Object(qn.c)(i,this.state.selectedProviderCode))&&(l.cardCVV=No(FormattedMessage,{id:"guestPaymentCreate.error.invalidSecurityCode",values:{securityCode:d}}),r=!1):r=!0,t?this.guestPaymentErrors(l):this.setState({validationError:l},(function(){return e.guestPaymentErrors(l)})),{isCVVCodeValid:r,cardCVVValidationError:l.cardCVV}}},{key:"_validateExpirationDate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=_.get(this.state,"cardExpirationDate",""),n=_.get(this.state,"validationError",{}),o=_.cloneDeep(n),i=Object(qn.e)(r),a=i.invalidExpirationYear,s=i.invalidExpirationMonth,l=i.invalidExpirationDetails,d=i.invalidExpirationDate;delete o.cardExpirationDate,a&&(o.cardExpirationDate=No(FormattedMessage,{id:"guestPaymentCreate.error.invalidExpirationYear"})),s&&(o.cardExpirationDate=No(FormattedMessage,{id:"guestPaymentCreate.error.invalidExpirationMonth"})),l&&(o.cardExpirationDate=No(FormattedMessage,{id:"guestPaymentCreate.error.invalidExpirationDetails"})),d&&(o.cardExpirationDate=No(FormattedMessage,{id:"guestPaymentCreate.error.invalidExpirationDate"})),t?this.guestPaymentErrors(o):this.setState({validationError:o},(function(){return e.guestPaymentErrors(o)}));var c=!(a||s||l||d);return{isCardExpirationDateValid:c,cardExpirationDateValidationError:o.cardExpirationDate}}},{key:"_validateCardholder",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=_.trim(this.state.cardHolder)?this.state.cardHolder:"",n=_.get(this.state,"validationError",{}),o=_.cloneDeep(n);return delete o.cardHolder,_.isEmpty(r)&&(o.cardHolder=No(FormattedMessage,{id:"guestPaymentCreate.error.nameIsRequired"})),t?this.guestPaymentErrors(o):this.setState({validationError:o,cardHolder:r},(function(){return e.guestPaymentErrors(o)})),{isCardHolderValid:!_.isEmpty(r),cardHolderValidationError:o.cardHolder}}},{key:"getPlaceHolderMessages",value:function(){return defineMessages({cardNumber:{id:"guestPaymentCreate.placeHolder.cardNumber",defaultMessage:"##guestPaymentCreate.placeHolder.cardNumber##"},expirationDate:{id:"guestPaymentCreate.placeHolder.expirationDate",defaultMessage:"##guestPaymentCreate.placeHolder.expirationDate##"},expirationDateFormat:{id:"guestPaymentCreate.placeHolder.expirationDateFormat",defaultMessage:"##guestPaymentCreate.placeHolder.expirationDateFormat##"},nameOnCard:{id:"guestPaymentCreate.placeHolder.nameOnCard",defaultMessage:"##guestPaymentCreate.placeHolder.nameOnCard##"},cardCVV:{id:"guestPayment.text.CCVCodeExplanation",defaultMessage:"##guestPayment.text.CCVCodeExplanation##"}})}},{key:"render",value:function(){var e=this,t=Kn.a,r=this.state,n=r.security,o=r.validationError,i=r.cardCVV,a=r.selectedInstallmentPlan,s=r.cardNumber,l=r.isPaymentInstallmentsLoading,d=r.isSavedCCSelectedPaymentOption,c=r.selectedProviderCode,u=r.selectedPaymentMethodOption,p=r.paymentInstallmentOptionsError,m=this.props,f=m.allowPay,y=m.actions,g=m.configData,v=m.intl,h=v.formatMessage,b=v.formatNumber,C=m.activeProfilesForBookingViews,P=m.reservationId,O=m.isPayNow,I=m.isDepositPolicy,w=m.activeReservationsForBookingViews,S=m.paymentMethodOptions,N=m.guestPaymentInfo,A=m.isInModifyMode,T=m.isPayMonthlySelected,D=m.isPayLater,k=m.selectedLanguage,F=m.updateReservationInProgress,R=m.supportedCreditCardCodes,E=_.keys(S),M=_.size(R)>0?R:_.map(t,(function(e){return e.code})),j=Object(qn.b)(this.state.cardNumber),x=_.get(_.head(j),"code",null),V=_.find(w,(function(e){return e.Id===P})),L=_.get(V,"CurrencyCode"),B=this.getPlaceHolderMessages(),H=Object(Un.e)(k),G=this._shouldRenderRedirectWarningMessage()&&(I||f&&!D),z=this._isPaymentMethodProcessed(c),U=this._shouldDisplayProcessedPaymentMethodOptions()||G,K=_.get(be.pc,"NAME_FIELD"),W=!U||_.includes(E,u),$=_.get(N,[P,"isNew"],!1),Y=(!d||T||$)&&!G&&!z&&W,X=_.get(this.props,"paymentWallets",[]),Z=_.size(X)>0&&window.innerWidth>be.oe.TABLET_VIEW,J=Object(gr.a)(g),Q=_.get(V,"paymentInstallmentOptions",[]),ee=_.get(V,"Status",""),te=_.get(V,"isConfirmingOnHold",!1),re=ee===be.td.PENDING_MODIFY&&!te,ne=Object(En.p)(Q,O,I,s,l,o,re),oe=_.size(s),ie=_.size(this._getCreditCardMask(s).replace(/\s+/g,"")),ae=_.isEqual(oe,ie),se=!F&&!d&&ne&&T&&ae,le=Object(En.e)(o,l,s,wo.a),de=this.isCvvCodeRequiredForSavedCC(),ce=Object($n.v)(V,C),ue=Object(En.o)(A,N,P,ce),pe=de&&!Y&&(!ue||te),me=_.get(this.state,"selectedPaymentMethodOption.CardCode",""),fe=this.getPaymentValidationRule(Kn.a,me),ye=_.get(fe,"security"),ve=be.tc.ERROR,he=be.tc.INFO,Ce=Object(En.l)(s,R),Pe=_.get(Ce,"niceType",""),Oe=h({id:"accessibility.cardEntered"},{cardNetwork:Pe}),Ie=!_.isEmpty(Ce)&&ae&&Pe;return No("div",{className:wo.a.paymentSelection},void 0,No(_e.a,{condition:pe},void 0,No(yo,{security:ye,onChange:this.onSavedCardCvvChange,onBlur:this.onSavedCardCvvChange,validationError:_.get(this.state,"savedSelectedCvvValidationError",{}),validationWarning:_.get(this.state,"savedSelectedCvvValidationWarning",""),formatMessage:h,cardCVV:_.get(this.state,"savedSelectedCreditCardCvv",""),cvvForSavedCC:!0,cardCode:_.get(this.state,"selectedPaymentMethodOption.CardCode",""),cardNumber:_.get(this.state,"selectedPaymentMethodOption.CardNumber",""),setModalMsg:y.setModalMsg})),No(_e.a,{condition:Y},void 0,No(Fragment,{},void 0,No(_e.a,{condition:Ie},void 0,No(Po.b,{message:Oe,"aria-live":"assertive"})),No(_e.a,{condition:!this._shouldDisplayProcessedPaymentMethodOptions()},void 0,No("div",{className:wo.a.ccimageContainer},void 0,_.map(t,(function(e,t){if(_.size(M)>0&&-1!==M.indexOf(e.code))return No("img",e.pattern.test(s)?{src:"".concat(e.img),alt:e.niceType}:{style:{opacity:.5},src:"".concat(e.img),alt:e.niceType},"".concat(e.code,"img").concat(t))})))),No(ge.a,{name:"cardnumber",autocomplete:"cc-number",className:wo.a.cardNumberField,mask:H?null:this._getCreditCardMask(this.state.cardNumber),maskFormatChars:{9:"[0-9\\uFF10-\\uFF19]"},value:this.state.cardNumber,required:!0,onChange:function(t){return e.updateCardNumber(t.replace(/\s/g,"").replace(/-/g,""))},onBlur:this._onCardNumberBlur,label:h(B.cardNumber),error:o&&o.cardNumber,withIconLeft:!0,withIconRight:!!le,iconClassName:wo.a.ccard,doNotShowRightIcon:!_.isEmpty(le),ariaLabel:this.state.creditCardAriaLabel},void 0,this._getSelectedCardImage(),No(_e.a,{condition:ae},void 0,No("div",{className:wo.a.icon},void 0,le))),No(_e.a,{condition:p&&ae},void 0,No("div",{className:wo.a.installmentsError},void 0,No(q.a,{messages:[No(FormattedMessage,{id:"guestPaymentCreate.installments.error"},"installmentsError-1")],messageType:ve,isInline:!0}))),No(ge.a,{name:"exp-date",autocomplete:"cc-exp",className:wo.a.expDateField,label:h(B.expirationDate),placeholder:h(B.expirationDateFormat),value:this.state.cardExpirationDate,required:!0,mask:"99/99",maskFormatChars:{9:"[0-9\\uFF10-\\uFF19]"},error:o.cardExpirationDate,onChange:function(t){return e.updateExpirationDate(t.replace(/_/g,""))},onBlur:this._onExpirationDateBlur}),No(_e.a,{condition:!!J.includes("cvvCode")},void 0,No(yo,{security:n,onChange:this._onCardCVVChange,onBlur:this._onCardCVVBlur,validationError:o.cardCVV?o:{},formatMessage:h,setModalMsg:y.setModalMsg,onKeyDown:this._onKeyDown,cardCVV:i,cardNumber:this.state.cardNumber,cardCode:x})),No(ge.a,{name:"ccname",autocomplete:"cc-name",className:wo.a.nameField,value:this.state.cardHolder,required:!0,maxLength:K,onChange:function(t){return e.updateCardHolder(t)},onBlur:this._onCardHolderBlur,label:h(B.nameOnCard),error:o.cardHolder}))),No(_e.a,{condition:Z||!G},void 0,this._renderTransactionFeeMessage()),No(_e.a,{condition:se},void 0,No("div",{className:wo.a.paymentInstallments},void 0,No("div",{className:wo.a.paymentInstallmentsSelectionMessage},void 0,No(q.a,{messages:[No(FormattedMessage,{id:"guestPaymentCreate.installments.message"},"paymentInstallmentsSelectionMessage-1"),No(FormattedMessage,{id:"guestPaymentCreate.installments.pleaseSelectOption"},"paymentInstallmentsSelectionMessage-2")],messageType:he,isInline:!0})),No(Co,{options:Q,formatMessage:h,formatNumber:b,styles:wo.a,onChange:this.updateInstallments,selectedInstallmentPlan:_.get(a,"selectedIndex","0"),currencyCode:L,reservationId:P}))))}},{key:"_getCreditCardMask",value:function(e){var t=this.props.supportedCreditCardCodes,r=Object(En.l)(e,t);return r&&["VI","MC","DS","AX","UP"].indexOf(r.code)>-1?/^3([47]\d*)?$/.test(e)?"9999 999999 99999":"9999 9999 9999 9999":"9999999999999999999"}},{key:"_getSelectedCardImage",value:function(){var e=this.state.cardNumber,t=this.props.supportedCreditCardCodes,r=Object(En.l)(e,t);return r?No("span",{className:wo.a.selectedCard},void 0,No("img",{src:"".concat(r.img),alt:r.niceType},"".concat(r.code,"img"))):null}},{key:"_renderTransactionFeeMessage",value:function(){var e=be.Pc.CREDIT_CARD,t=this.props,r=t.actions,n=t.activeReservationsForBookingViews,o=t.guestPaymentInfo,i=t.reservationId,a=_.find(n,(function(e){return e.Id===i})),s=_.get(o,[i,"CardCode"],""),l=_.get(this.state,"cardCode","")||_.get(this.state,"selectedPaymentMethodOption.CardCode","")||_.get(this.state,"selectedProviderCode","")||s,d=_.get(a,"selectedPaymentMethod");(!d&&l||l&&d!==l)&&r.setSelectedPaymentMethod(i,l);var c=Object(P.a)(a),u=Object(P.e)(a),p=_.get(o,[i,"paymentType"],"")===e,m=_.get(a,"transactionFeesMap",{}),f=Boolean(_.get(m,l,""));if(p&&u&&f){var y=No(FormattedMessage,{id:"guestDetails.text.surchargeWillApply",values:{transactionFeePercentage:u,paymentMethodName:c,isCreditCard:!0}});return No("div",{className:wo.a.surchargeMessage},void 0,No(q.a,{messages:[y],messageType:be.tc.INFO,isInline:!0,needsGrayBox:!0}))}return null}},{key:"_getSelectedOPaymentMethod",value:function(){var e=this.state,t=e.cardNumber,r=e.selectedProviderCode,n=this.props.supportedCreditCardCodes,o=Object(En.l)(t,n);return o?o.code:r}}])&&ko(t.prototype,r),n&&ko(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||bo)||bo;Vo.defaultProps={paymentMethodOptions:{}};var Lo,Bo=Object(y.h)(Vo);function Ho(e){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(e,t,r,n){Lo||(Lo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Lo,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function zo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ho(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ho(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Uo=Object(Le.memo)((function(e){var t=e.creditCardPaymentOptionsKeysLength,r=e.currentOptionRef,n=e.dataError,o=e.dropdownWrapperRef,i=e.expandablePaymentSectionRef,a=e.guestPaymentInfo,s=e.handleSavedCCClick,l=e.formatMessage,d=e.keyboardSelectedIndex,c=e.isNewCreditCardSelected,u=e.onKeyDown,p=e.onClick,m=e.onMouseEnter,f=e.onSelectKeyDown,y=e.optionIndex,g=e.optionName,v=e.options,h=e.onSavedCCKeyDown,b=e.onSelect,C=e.reservationPaymentInfo,P=e.styles,O=e.savedCreditCardsOpen,I=e.savedCreditCards,w=e.savedCardSelected,S=e.checked,N=e.reservationId,A=e.setReservationCreditDebitCard,T=be.Pc.CREDIT_CARD,D=Nn()(P.savedCardsButton,zo({},P.dataError,n)),k=Nn()(zo({},P.newDebitCreditCard,_.isEqual(g,T))),F=Nn()(P.caret,zo({},P.caretUp,O)),R=function(e){var t=_.get(e,"CardNumber","").replace(/X/g,""),r=_.get(e,"CardExpirationDate",_.get(e,"ExpireDate","")),n=_.get(e,"CardHolder",""),o=_.find(Kn.a,(function(t){return t.code===e.CardCode})),i={creditCardType:_.get(o,"type",""),lastFourDigits:t,expirationDate:_.get(e,"CardExpirationDate",_.get(e,"ExpireDate","")),firstLastName:_.get(e,"CardHolder","")},a=l({id:"guestPayment.ariaLabel.savedCreditCardData"},i);return Go("span",{className:P.savedCCDetails,"aria-label":a},void 0,E(T,void 0,e),Go("span",{"aria-hidden":"true"},void 0,Go("span",{className:P.savedCCNumber},void 0,t," /")," ",Go("span",{className:P.savedCCExpDate},void 0,Go(FormattedMessage,{id:"guestPayment.label.expiration"})," ",r," /")," ",Go("span",{className:P.savedCCName},void 0,n)))},E=function(e,t,r){if(r){var n=_.find(Kn.a,(function(e){return e.code===r.CardCode}));return n?Go("img",{"aria-hidden":"true",src:"".concat(n.img),alt:"".concat(n.type," CreditCard"),className:P.ccImage},"".concat(n.code,"_img")):null}var o=_.split(e,"_"),i=_.head(o),a=_.get(o,"[1]"),s=_.find(t,(function(e){return e.code===a})),l=_.get(s,"img");return l?Go("img",{src:"".concat(l),alt:"".concat(i," ").concat(v[e])},"".concat(a,"img")):null};return Go(Fragment,{},void 0,React.createElement("button",{className:D,"data-selector":!O,ref:i,tabIndex:0,"aria-expanded":O,onKeyDown:u,onClick:p},Go(_e.a,{condition:!!_.size(I)&&!c&&!_.isEmpty(w)},void 0,R(w)),Go(_e.a,{condition:c||_.isEmpty(w)},void 0,Go(FormattedMessage,{id:"guestPaymentCreate.title.useANewCreditCard"})),Go("span",{className:F,onClick:p})),Go(_e.a,{condition:O},void 0,React.createElement("div",{className:P.dropdownWrapper,ref:o},Go("div",{className:P.dropdownSubtitle},void 0,Go(FormattedMessage,{id:"guestPayment.text.yourCards"})),Go("ul",{className:P.dropdown},void 0,_.map(I,(function(e){var t=_.isEqual(C.CardCode,e.CardCode)&&_.isEqual(_.get(C,"CardExpirationDate",_.get(C,"ExpireDate","")),_.get(e,"CardExpirationDate",_.get(e,"ExpireDate","")))&&_.isEqual(C.CardNumber,e.CardNumber);return Go("li",{tabIndex:0,onClick:function(t){return s(t,e)},onKeyDown:function(t){return h(t,e)},className:P.savedCreditCard},"CreditCard_".concat(_.get(e,["PaymentToken"],"")),R(e),Go(_e.a,{condition:t},void 0,Go("span",{className:P.selectedIcon},void 0,Go("span",{className:"sr-only"},void 0,Go(FormattedMessage,{id:"guestPayment.ariaLabel.selectedPayment"})))))}))),Go("hr",{}),Go("div",{className:P.dropdownSubtitle},void 0,Go(FormattedMessage,{id:"guestPaymentInfo.label.addPaymentMethod"})),Go("ul",{className:P.dropdown},void 0,React.createElement("li",{key:T,tabIndex:0,onClick:function(e){b(e),A(N,{})},onMouseEnter:m,onKeyDown:function(e){f(e),A(N,{})},"data-selected":S&&_.isEmpty(w)&&!_.get(a,[N,"isDataCopiedFromAnotherRes"],!1)?"true":"false","data-hover":y+t===d,ref:r},Go("span",{className:k},void 0,_.get(v,g),Go(_e.a,{condition:g===T&&!_.get(a,[N,"isDataCopiedFromAnotherRes"],!1)},void 0,Go("span",{className:"sr-only"},void 0,Go(FormattedMessage,{id:"guestPayment.ariaLabel.selectedPayment"})))))))))}));Uo.displayName="PaymentSavedCreditCards";var qo,Ko,Wo=Uo,$o=r(1775),Yo=r.n($o);function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(){return(Zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jo(e){return function(e){if(Array.isArray(e))return Qo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ei(e,t,r,n){Ko||(Ko="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Ko,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ri(e,t,r){return(t=oi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oi(n.key),n)}}function oi(e){var t=function(e,t){if("object"!==Xo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Xo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xo(t)?t:String(t)}function ii(e,t){return(ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=li(e);if(t){var o=li(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return si(this,r)}}function si(e,t){if(t&&("object"===Xo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function li(e){return(li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var di,ci=withStyles(Yo.a)(qo=bindRedux([],[{resetPaymentValidation:W.resetPaymentValidation,setSelectedPaymentMethod:$.setSelectedPaymentMethod,setReservationPreviouslySelectedAltPaymentMethod:Wn.setReservationPreviouslySelectedAltPaymentMethod,setReservationCreditDebitCard:Wn.setReservationCreditDebitCard,setIsPaymentValid:W.setIsPaymentValid}])(qo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ii(e,t)}(i,Component);var t,r,n,o=ai(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).select=function(e){var r=e.selectedOption,n=e.shouldResetCreditCard,o=void 0===n||n,i=t.props,a=i.options,s=i.toggleIsSavedCCSelectedPaymentOption,l=i.guestPaymentInfo,d=t.state.isNewCreditCardSelected,c=be.Pc.CREDIT_CARD,u=a?a[r]:void 0;if(u!==t.state.value||d||_.isEmpty(l)){var p={key:r,value:u,savedCreditCardsOpen:!1,keyboardSelectedIndex:-1,savedCardSelected:{}};t.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(r),!0).forEach((function(t){ri(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ti(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},p),(function(){c!==u&&o&&t.onPaymentTypeChange()})),s(!1)}},t._isPaymentMethodProcessed=function(e){var r=t.props,n=r.activeReservationsForBookingViews,o=r.reservationId,i=r.isAlwaysRedirect,a=r.isInModifyMode,s=r.isPayNow,l=r.isDepositPolicy,d=Object(Yn.i)(n,o);return Object(Yn.q)(e,d)&&i&&!a&&(s||l)},t._areAllPaymentMethodsProcessed=function(){var e=t.props,r=e.activeReservationsForBookingViews,n=e.reservationId,o=e.paymentProcessorRules,i=e.isAlwaysRedirect,a=e.isPayNow,s=e.isDepositPolicy,l=t.props.getPaymentProps(),d=Object(Yn.i)(r,n),c=Object(Yn.m)(r,n),u=Object(Yn.l)(r,n),p=Object(Yn.p)(o,c,l),m=Object(Yn.p)(o,u,l),f=Object(Yn.a)(p,d),y=Object(Yn.a)(m,d);return f&&y&&i&&(a||s)},t.onPaymentTypeChange=function(){var e=t.state.key,r=t.props,n=r.activeProfileIdsForBookingViews,o=r.actions,i=o.setIsPaymentValid,a=o.resetPaymentValidation,s=o.setSelectedPaymentMethod,l=o.setReservationPreviouslySelectedAltPaymentMethod,d=r.getGuestPaymentInfo,c=r.reservationId,u=r.isInModifyMode,p=r.isPaymentValid,m=be.Pc.UNDETERMINED,f=_.split(e,"_"),y=_.get(f,"[1]"),g=t._isPaymentMethodProcessed(y)||t._areAllPaymentMethodsProcessed()||!u,v=_.head(f);(v===m||v!==be.Pc.CREDIT_CARD&&!p)&&i(!0,c),a(!0,n);var h={CardHolder:"",CardNumber:"",CardExpirationDate:"",CardSecurityCode:"",isPreferred:!1,CardCode:void 0,isNew:!0,hasValidationError:!1,paymentType:v,PaymentToken:"",ProviderCode:y,isPaymentMethodProcessed:g,isDataCopiedFromAnotherRes:!1,isDataCopiedFromAnotherConfirmedRes:!1};s(c,y),l(c,h),d(h,c)},t._renderTransactionFeeMessage=function(){var e=t.props,r=e.activeReservationsForBookingViews,n=e.reservationId,o=e.isPayMonthlySelected,i=t.state.key,a=be.Pc.CREDIT_CARD,s=be.tc.INFO,l=_.split(i,"_"),d=_.head(l),c=l[1],u=_.find(r,(function(e){return e.Id===n})),p=Object(P.a)(u),m=Object(P.e)(u),f=d===a,y=_.get(t.state,"cardCode","")||_.get(t.state,"selectedPaymentMethodOption.CardCode","")||_.get(t.state,"selectedProviderCode","")||c,g=_.get(u,"transactionFeesMap",{}),v=Boolean(_.get(g,y,""));if(!f&&m&&v&&!o){var h=ei(FormattedMessage,{id:"guestDetails.text.surchargeWillApply",values:{transactionFeePercentage:m,paymentMethodName:p,isCreditCard:f}});return ei(q.a,{messages:[h],messageType:s,isInline:!0,noMargin:!0})}return null},t.setkeyboardSelectedIndex=function(e){t.setState({keyboardSelectedIndex:e})},t.getMatchingSavedCreditDebitCard=function(){var e=t.props,r=e.creditDebitCard,n=e.creditCardUsedForReservation,o=e.guestPaymentInfo,i=e.reservationId,a=e.loggedInUserProfile,s=_.get(r,"PaymentToken",""),l=_.get(a,"paymentCardList",[]),d=_.map(l,(function(e){return _.get(e,"PaymentCard")})),c=_.get(o,i,{}),u=Object(En.k)(d,n,c);return _.find(u,(function(e){return e.PaymentToken===s}))},t.handleSavedCCClick=function(e){var r=e.e,n=e.savedCC,o=t.props,i=o.getGuestPaymentInfo,a=o.reservationId,s=o.toggleIsSavedCCSelectedPaymentOption,l=o.isInModifyMode,d=o.actions.setReservationCreditDebitCard,c=be.Pc.CREDIT_CARD,u=t._isPaymentMethodProcessed("")||t._areAllPaymentMethodsProcessed()||!l,p=_.get(n,"PaymentToken",""),m={CardHolder:_.get(n,"CardHolder",""),CardNumber:_.get(n,"CardNumber",""),CardExpirationDate:_.get(n,"CardExpirationDate","")||_.get(n,"ExpireDate",""),CardSecurityCode:_.get(n,"CardSecurityCode",""),isPreferred:!1,CardCode:_.get(n,"CardCode",""),isNew:!1,hasValidationError:!1,paymentType:c,PaymentToken:p,ProviderCode:"",isPaymentMethodProcessed:u,isDataCopiedFromAnotherRes:!1,isDataCopiedFromAnotherConfirmedRes:!1};r&&r.preventDefault(),t.setState({key:p?"".concat(c,"_").concat(p):c,savedCreditCardsOpen:!1,savedCardSelected:n,isNewCreditCardSelected:_.isEmpty(n)}),i(m,a),!_.isEmpty(n)&&d(a,m),s(!_.isEmpty(n))},t._shouldRenderRedirectWarningMessage=function(){var e=t.props,r=e.isAlwaysRedirect,n=e.isInModifyMode;return!(!r||!t._areAllPaymentMethodsProcessed()||n)};var r=e.creditCardUsedForReservation,n=e.guestPaymentInfo,a=e.loggedInUserProfile,s=e.options,l=e.reservationId,d=e.selected,c=_.get(n,[l,"PaymentToken"],""),u=_.find(_.get(a,"paymentCardList",[]),(function(e){return _.get(e,["PaymentCard","PaymentToken"])===c})),p=_.get(u,"PaymentCard",r);return t.state={key:c?"".concat(be.Pc.CREDIT_CARD,"_").concat(c):d,value:s[d],keyboardSelectedIndex:-1,savedCardSelected:p,savedCreditCardsOpen:!1,isNewCreditCardSelected:!1},t}return t=i,(r=[{key:"componentDidUpdate",value:function(e,t){var r=this.props,n=r.loggedInUserProfile,o=r.guestPaymentInfo,i=r.reservationId,a=r.options,s=r.creditCardUsedForReservation,l=r.isPayMonthlySelected,d=r.paymentTab,c=r.selected,u=this.state,p=u.key,m=u.savedCardSelected,f=u.isNewCreditCardSelected,y=d&&e.paymentTab!==d,g=_.get(n,"paymentCardList",[]),v=_.get(o,[i],{}),h=_.get(v,"paymentType"),b=_.get(v,"ProviderCode"),C=_.split(p,"_"),P=_.includes(p,be.Pc.CREDIT_CARD)?be.Pc.CREDIT_CARD:_.head(C),O=_.last(C)||"",I=_.map(g,(function(e){return _.get(e,"PaymentCard")})),w=Object(En.k)(I,s,v),S=_.get(m,"PaymentToken",""),N=_.get(v,"isNew",!1),A=_.get(v,"PaymentToken")||_.get(o,"PaymentToken"),T=_.get(v,"isDataCopiedFromAnotherRes")||_.get(o,"isDataCopiedFromAnotherRes"),D=h&&!_.isEqual(h,P),k=b&&!_.isEqual(b,O);if(_.isEqual(n,e.loggedInUserProfile)){if(A&&!_.isEqual(A,S)&&(T||y)){var F=_.find(w,(function(e){return _.get(e,"PaymentToken")===A}));this.setState({key:A?"".concat(be.Pc.CREDIT_CARD,"_").concat(A):c,value:a[c],keyboardSelectedIndex:-1,savedCardSelected:F||s,savedCreditCardsOpen:!1,isNewCreditCardSelected:!1})}}else{var R=_.get(v,"PaymentToken",""),E=_.find(g,(function(e){return _.get(e,["PaymentCard","PaymentToken"])===R})),M=_.get(E,"PaymentCard");this.setState({key:R?"".concat(be.Pc.CREDIT_CARD,"_").concat(R):c,value:a[c],keyboardSelectedIndex:-1,savedCardSelected:M||s,savedCreditCardsOpen:!1,isNewCreditCardSelected:!1})}if(!f&&N&&this.setState({isNewCreditCardSelected:N}),!e.isPayMonthlySelected&&l?this.setState({key:A?"".concat(be.Pc.CREDIT_CARD,"_").concat(A):c,value:a[c],keyboardSelectedIndex:-1,savedCardSelected:{},savedCreditCardsOpen:!1}):(y||T&&(D||k))&&!l&&this.select({selectedOption:c,shouldResetCreditCard:T&&h!==be.Pc.CREDIT_CARD||!T&&P!==be.Pc.CREDIT_CARD}),!_.includes(t.key,be.Pc.CREDIT_CARD)&&p!==t.key&&p===be.Pc.CREDIT_CARD&&_.isEmpty(m)){var j=this.getMatchingSavedCreditDebitCard();j&&this.handleSavedCCClick({savedCC:j})}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.reservationId,r=e.actions.setReservationCreditDebitCard,n=e.guestPaymentInfo,o=e.selected,i=this.state.savedCardSelected;_.isEmpty(i)||r(t,i),_.isEmpty(n)&&this.select({selectedOption:o})}},{key:"render",value:function(){var e=this,t=this.props,r=t.activeReservationsForBookingViews,n=t.allowPay,o=t.creditCardUsedForReservation,i=t.guestPaymentInfo,a=t.isDepositPolicy,s=t.isPayNow,l=t.isPayMonthlySelected,d=t.loggedInUserProfile,u=t.options,p=t.reservationId,m=t.formatMessage,f=t.updateReservationInProgress,y=t.roomNumber,g=t.title,v=t.payNowAmount,h=t.guestPaymentCreateProps,b=t.isSavedCCSelectedPaymentOption,C=t.creditDebitCard,P=t.actions.setReservationCreditDebitCard,O=this.state,I=O.key,w=O.savedCreditCardsOpen,S=O.keyboardSelectedIndex,N=O.savedCardSelected,A=O.isNewCreditCardSelected,T=be.Pc.CREDIT_CARD,D=be.Pc.EWALLET,k=be.Pc.BANK_DEPOSIT,F=be.tc.INFO,R=be.tc.ERROR,E=_.find(r,(function(e){return e.Id===p})),M=_.get(E,"BookingPolicy.GuaranteeLevel")===be.Bb.GUARANTEE,j=n&&!s,x=_.keys(u),V=_.filter(x,(function(e){return _.get(e.split("_"),"[0]")===T})),L=_.filter(x,(function(e){return _.get(e.split("_"),"[0]")!==T})),B=_.size(V),H=_.get(i,p,{}),G=_.get(d,"paymentCardList",[]),z=_.map(G,(function(e){return _.get(e,"PaymentCard")})),U=Object(En.k)(z,o,H),K=_.get(h,"enablePaymentValidation",!1),W=!b&&K&&!u[I],$=_.get(E,"BookingDues.Deposit.Amount"),Y=_.get(E,"CurrencyCode",""),X=$&&ei(FormattedMoney,{maximumFractionDigits:2,minimumFractionDigits:2,originalCurrency:Y,value:$}),Z=X&&ei(FormattedMessage,{id:"guestDetails.text.redirectWarningMessage",values:{formattedDepositAmount:X}}),J=W?ei(q.a,{messages:[ei(FormattedMessage,{id:"guestPaymentCreate.error.paymentMethodIsRequired"},"paymentMethodIsRequired-1")],messageType:R,isInline:!0}):null,Q=_.get(this.props,"paymentWallets",[]),ee=_.size(Q)>0,te="".concat(p,"_tag_"),re=[].concat(Jo(V),Jo(L)),ne=M&&j?Object(En.g)(re):re,oe=_.size(ne),ie=this._shouldRenderRedirectWarningMessage()&&(a||s&&!j),ae=ee&&window.innerWidth>be.oe.TABLET_VIEW,se=1===oe&&_.head(ne)===T,le=_.some(ne,(function(e){return _.includes(e,D)||_.includes(e,k)}));return ei(_e.a,{condition:!_.isEmpty(u)},void 0,ei(_e.a,{condition:!!J},void 0,ei("div",{"aria-live":"assertive","aria-relevant":"all"},void 0,J)),ei(_e.a,{condition:se||l},void 0,ei("div",{className:Yo.a.creditCardsContainer},void 0,ei(_e.a,{condition:!!_.size(U)&&!l},void 0,ei("div",{className:Yo.a.savedCardsContainer},void 0,ei(Wo,{styles:Yo.a,savedCreditCardsOpen:w,dataError:W,formatMessage:m,onKeyDown:function(t){return Object(c.fb)(t)&&e.setState({savedCreditCardsOpen:!e.state.savedCreditCardsOpen})},onClick:function(){return e.setState({savedCreditCardsOpen:!e.state.savedCreditCardsOpen})},onSelectKeyDown:function(t){Object(c.fb)(t)&&e.setState({isNewCreditCardSelected:!0},(function(){e.select({selectedOption:T})}))},savedCreditCards:U,reservationId:p,loggedInUserProfile:d,savedCardSelected:N,dropdownWrapperRef:function(t){e.dropdownWrapperRef=t},reservationPaymentInfo:H,handleSavedCCClick:function(t,r){return e.handleSavedCCClick({e:t,savedCC:r})},onSavedCCKeyDown:function(t,r){return Object(c.fb)(t)&&e.handleSavedCCClick({e:t,savedCC:r})},onSelect:function(t){e.setState({isNewCreditCardSelected:!0},(function(){e.select({selectedOption:T})}))},onMouseEnter:function(){return e.setkeyboardSelectedIndex(0+B)},optionIndex:0,optionName:T,options:u,checked:I===T,guestPaymentInfo:i,creditCardPaymentOptionsKeysLength:B,keyboardSelectedIndex:S,currentOptionRef:function(t){e.currentOptionRef=0+B===S?t:e.currentOptionRef},creditCardUsedForReservation:o,isNewCreditCardSelected:A,setReservationCreditDebitCard:P},I))),React.createElement(Bo,Zo({isPayNow:s},h,{title:g,reservationId:p,payNowAmount:v,updateReservationInProgress:f,roomNumber:y,isPayMonthlySelected:l,creditDebitCard:C,setReservationCreditDebitCard:P,isNewCreditCardSelected:A})),ei(_e.a,{condition:!ae&&ie},void 0,this._renderTransactionFeeMessage(),ei("div",{className:Yo.a.altPaymentWarning},void 0,ei(q.a,{messages:[Z],messageType:F,isInline:!0,noMargin:!0}))))),ei(_e.a,{condition:oe>0&&(!se||le)&&!l},void 0,ei("div",{className:Yo.a.paymentRadioButtonsWrapper},void 0,_.map(ne,(function(t,r){var n=Object(En.f)(t),a=_.includes(I,T)?_.head(_.split(I,"_")):I,d=a===t,b=a===T,O=t===T;return ei(Bn,{id:"".concat(te).concat(t),name:"".concat(p,"payment"),value:t,checked:d,onChange:function(r){return e.select({selectedOption:t,shouldResetCreditCard:!(Boolean(e.getMatchingSavedCreditDebitCard())&&O)})},onKeyDown:function(r){return Object(c.fb)(r)&&e.select({selectedOption:t,shouldResetCreditCard:!(Boolean(e.getMatchingSavedCreditDebitCard())&&O)})},label:ei(zn,{optionLabel:ei(FormattedMessage,{id:n}),togglePayment:function(r){return e.select({selectedOption:t,shouldResetCreditCard:!(Boolean(e.getMatchingSavedCreditDebitCard())&&O)})},associatedInputId:"".concat(te).concat(t)})},r,ei(_e.a,{condition:!!_.size(U)&&O&&d},void 0,ei("div",{className:Yo.a.savedCardsContainer},void 0,ei(Wo,{styles:Yo.a,savedCreditCardsOpen:w,dataError:W,formatMessage:m,onKeyDown:function(t){return Object(c.fb)(t)&&e.setState({savedCreditCardsOpen:!e.state.savedCreditCardsOpen})},onClick:function(){return e.setState({savedCreditCardsOpen:!e.state.savedCreditCardsOpen})},onSelectKeyDown:function(t){Object(c.fb)(t)&&e.setState({isNewCreditCardSelected:!0},(function(){e.select({selectedOption:T})}))},savedCreditCards:U,reservationId:p,savedCardSelected:N,dropdownWrapperRef:function(t){e.dropdownWrapperRef=t},reservationPaymentInfo:H,handleSavedCCClick:function(t,r){return e.handleSavedCCClick({e:t,savedCC:r})},onSavedCCKeyDown:function(t,r){return Object(c.fb)(t)&&e.handleSavedCCClick({e:t,savedCC:r})},onSelect:function(t){e.setState({isNewCreditCardSelected:!0},(function(){e.select({selectedOption:T})}))},onMouseEnter:function(){return e.setkeyboardSelectedIndex(r+B)},optionIndex:r,optionName:t,options:u,checked:d,guestPaymentInfo:i,creditCardPaymentOptionsKeysLength:B,keyboardSelectedIndex:S,currentOptionRef:function(t){e.currentOptionRef=r+B===S?t:e.currentOptionRef},creditCardUsedForReservation:o,isNewCreditCardSelected:A,setReservationCreditDebitCard:P},I))),ei(_e.a,{condition:b&&O},void 0,React.createElement(Bo,Zo({isPayMonthlySelected:l,isPayNow:s,title:g,reservationId:p,payNowAmount:v,updateReservationInProgress:f,roomNumber:y,creditDebitCard:C,setReservationCreditDebitCard:P,isNewCreditCardSelected:A},h))),ei(_e.a,{condition:d},void 0,ei(_e.a,{condition:ae||!ie},void 0,e._renderTransactionFeeMessage()||null),ei(_e.a,{condition:ae&&ie},void 0,ei("div",{className:Yo.a.altPaymentWarning},void 0,ei(q.a,{messages:[Z],messageType:F,isInline:!0,noMargin:!0}))),ei(_e.a,{condition:!ae&&ie},void 0,e._renderTransactionFeeMessage(),ei("div",{className:Yo.a.altPaymentWarning},void 0,ei(q.a,{messages:[Z],messageType:F,isInline:!0,noMargin:!0})))))})))))}}])&&ni(t.prototype,r),n&&ni(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||qo)||qo;function ui(e,t,r,n){di||(di="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:di,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function pi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,d=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ci.defaultProps={formatMessage:function(){}};var fi,yi=function(e){var t=e.payNowDiscount,r=e.currency,n=e.payNowAmount,o=e.isPayNow,i=pi(Object(Le.useState)(),2),a=i[0],s=i[1],l=pi(Object(Le.useState)(),2),d=l[0],u=l[1];return Object(Le.useEffect)((function(){t&&(s(t),u(n))})),a?ui(Fragment,{},void 0,ui(FormattedMessage,{id:"guestPayment.description.payNowDiscount",values:{discount:Object(c.pb)(o?t:a,r)}})," ",ui(FormattedMessage,{id:"guestPayment.description.dueToday",values:{amount:Object(c.pb)(o?n:d,r)}})):ui(FormattedMessage,{id:"guestPayment.description.dueToday",values:{amount:Object(c.pb)(n,r)}})};function gi(){return(gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vi(e,t,r,n){fi||(fi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:fi,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function hi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,d=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _i=Object(Le.memo)((function(e){var t=e.allowPay,r=e.currency,n=e.children,o=e.getIWMDataRequested,i=e.isDepositPolicyWithoutPayNow,a=e.isOnHold,s=e.isOnHoldEnabled,l=e.isPaymentInstallmentsEnabled,d=e.isPayMonthly,u=e.isPayNow,p=e.onHoldTime,m=e.onOnHoldChange,f=e.onPayNowChange,y=e.payNowAmount,g=e.payNowDiscount,v=e.paymentSelectFopProps,h=e.reservationId,b=e.setSelectedPaymentMethod,_=e.updateReservationInProgress,C=hi(Object(Le.useState)(""),2),P=C[0],O=C[1];Object(Le.useEffect)((function(){R()}),[u,a,d]);var I=be.Oc.ON_HOLD,w=be.Oc.PAY_NOW,S=be.Oc.PAY_LATER,N=be.Oc.PAY_MONTHLY,A="".concat(h,"_tag_"),T=P===w,D=P===S,k=P===I,F=P===N,R=function(){(u||i||!t&&l)&&!d?O(w):u||d||a?a&&!d?O(I):l&&d&&O(N):O(S)},E=function(){O(N),b(h,""),V(N,F)},M=function(){O(I),V(I,a)},j=function(){O(S),V("",!a&&!u)},x=function(){O(w),V(w,u&&!d)},V=function(e,t){if(!t)switch(e){case w:return m(!1),f(!0);case I:return m(!0),f(!1);case N:return m(!1),f(!0,!0);default:return m(!1),f(!1)}},L=vi("p",{role:"alert"},void 0,vi("span",{className:wn.a.payNowAmount},void 0,vi(yi,{checked:T,isPayNow:u,payNowAmount:y,payNowDiscount:g,currency:r,updateReservationInProgress:_}))," ",y&&!P===w?vi(FormattedMessage,{id:"guestPayment.description.payNow"}):vi(_e.a,{condition:!_},void 0,vi(FormattedMessage,{id:"guestPayment.description.payNow"}))),B=vi("p",{role:"alert"},void 0,vi("span",{className:wn.a.payNowAmount},void 0,vi(FormattedMessage,{id:"guestPayment.description.dueToday",values:{amount:Object(c.pb)(0,r)}}))," ",vi(FormattedMessage,{id:"guestPayment.description.payLater"})),H=vi("p",{role:"alert"},void 0,vi("b",{},void 0,vi(FormattedMessage,{id:"guestPayment.description.holdReservation"}))),G=vi("p",{role:"alert"},void 0,vi(FormattedMessage,{id:"guestPayment.description.holdReservationDetails",values:{hours:p}})),z=vi("p",{role:"alert"},void 0,vi(FormattedMessage,{id:"guestPaymentCreate.installments.enterDetails"}));return vi(Fragment,{},void 0,vi("div",{className:wn.a.tabOptions},void 0,vi(_e.a,{condition:t},void 0,vi(Fragment,{},void 0,vi(Rn,{id:"".concat(A,"reservation-pay-now"),label:"guestPayment.title.".concat(w),selected:T,onClick:x,styles:wn.a,onKeyDown:function(e){return Object(c.eb)(e)&&x()},paymentTabName:w}),vi(Rn,{id:"".concat(A,"reservation-payment"),label:"guestPayment.title.".concat(S),selected:D,styles:wn.a,onClick:j,onKeyDown:function(e){return Object(c.eb)(e)&&j()},paymentTabName:S}))),vi(_e.a,{condition:!t&&s&&!i},void 0,vi(Rn,{id:"".concat(A,"reservation-payment"),label:"guestPayment.title.".concat(S),onClick:j,selected:D,styles:wn.a,onKeyDown:function(e){return Object(c.eb)(e)&&j()},paymentTabName:S})),vi(_e.a,{condition:s},void 0,vi(Rn,{id:"".concat(A,"reservation-on-hold"),label:"guestPayment.title.".concat(I),onClick:M,selected:k,styles:wn.a,onKeyDown:function(e){return Object(c.eb)(e)&&M()},paymentTabName:I})),vi(_e.a,{condition:i||!t&&l},void 0,vi(Rn,{id:"".concat(A,"reservation-pay-now"),label:"guestPayment.title.".concat(w),selected:T,onClick:x,styles:wn.a,onKeyDown:function(e){return Object(c.eb)(e)&&x()},paymentTabName:w})),vi(_e.a,{condition:l},void 0,vi(Rn,{id:"".concat(A,"reservation-pay-monthly"),label:"guestPayment.title.".concat(N),onClick:E,selected:d,styles:wn.a,onKeyDown:function(e){return Object(c.eb)(e)&&E()},paymentTabName:N}))),vi("div",{className:wn.a.tabContent},void 0,vi(_e.a,{condition:!_},void 0,vi(_e.a,{condition:i},void 0,n,vi(_e.a,{condition:F},void 0,z)),vi(_e.a,{condition:!i},void 0,T&&t?L:D?B:k?H:F?vi(Fragment,{},void 0,t&&L,z):null),vi(_e.a,{condition:G&&k},void 0,G)),vi(_e.a,{condition:_||o},void 0,vi(ye.a,{medium:!0,centered:!0}),vi("div",{className:wn.a.tabSpinnerBackground})),vi(_e.a,{condition:!k},void 0,React.createElement(ci,gi({isPayMonthlySelected:F,currency:r,paymentTab:P},v)))))}));_i.displayName="PaymentScheduleSelection";var Ci,Pi,Oi=Nt()(wn.a)(_i),Ii=r(1777),wi=r.n(Ii);function Si(e){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(r),!0).forEach((function(t){Ti(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ni(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ti(e,t,r){return(t=Fi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Di(e,t,r,n){Pi||(Pi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Pi,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function ki(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fi(n.key),n)}}function Fi(e){var t=function(e,t){if("object"!==Si(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Si(t)?t:String(t)}function Ri(e,t){return(Ri=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ei(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ji(e);if(t){var o=ji(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Mi(this,r)}}function Mi(e,t){if(t&&("object"===Si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ji(e){return(ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xi=withStyles(wi.a)(Ci=bindRedux([ie.a,re.a,ee.a],[{setReservationWalletId:$.setReservationWalletId,setSelectedPaymentMethod:$.setSelectedPaymentMethod}])(Ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ri(e,t)}(i,Component);var t,r,n,o=Ei(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).toggleIsSavedCCSelectedPaymentOption=function(e){t.setState({isSavedCCSelectedPaymentOption:e})},t._getPaymentProps=function(){var e=t.props,r=e.activeProfilesForBookingViews,n=e.activeReservationsForBookingViews,o=e.reservationId,i=e.intl,a=e.timezone,s=i.formatMessage,l=i.locale,d=n.find((function(e){return e.Id===o})),c=_.head(_.get(d,"StartDate","").split("T")),u=s(defineMessages({id:"guestDetails.paymentSelectOption.creditCard"}));return{countryCode:Object(Yn.d)(r,o),currencyCode:Object(Yn.e)(n,o),currentLanguageCode:_.get(t.props,"selectedLanguage",l),currentBookingAmount:Object(Yn.n)(n,o),leadDay:Object(Oo.d)(c,a),creditCardOptionDescription:u,guestPhoneNumber:Object(Yn.f)(r,o),displayCurrencyCode:_.get(t.props,["currentUrlParams","currency"],"")}},t.getPaymentMethodOptions=function(){var e=t.props,r=e.activeReservationsForBookingViews,n=e.reservationId,o=e.formatMessage,i=e.paymentProcessorRules,a=e.paymentMethodOptions,s=t._getPaymentProps(),l=Object(Yn.j)(r,n),d=Object(Yn.o)(a,i,s);return t._shouldDisplayProcessedPaymentMethodOptions()?Object(Yn.o)(l,i,s):_.isEmpty(d)?{CreditCard:o(defineMessages({id:"guestDetails.paymentSelectOption.creditCard"}))}:d},t._shouldDisplayProcessedPaymentMethodOptions=function(){var e=t.props,r=e.isAlwaysRedirect,n=e.isDepositPolicy,o=e.isPayNow;return!!(r&&t._areAnyCCNotProcessed()&&t._areAnyCCProcessed()&&(n||o))},t._areAnyCCNotProcessed=function(){var e=t.props,r=e.activeReservationsForBookingViews,n=e.reservationId,o=e.paymentProcessorRules,i=t._getPaymentProps(),a=Object(Yn.i)(r,n),s=Object(Yn.m)(r,n),l=Object(Yn.p)(o,s,i);return Object(Yn.b)(l,a)},t._areAnyCCProcessed=function(){var e=t.props,r=e.activeReservationsForBookingViews,n=e.reservationId,o=e.paymentProcessorRules,i=e.isAlwaysRedirect,a=e.isPayNow,s=e.isDepositPolicy,l=t._getPaymentProps(),d=Object(Yn.i)(r,n),c=Object(Yn.m)(r,n),u=Object(Yn.p)(o,c,l);return Object(Yn.c)(u,d)&&i&&(a||s)},t._getSelectedPaymentMethodOption=function(e,t){if(!e)return _.keys(t)[0];var r=_.get(e,"paymentType",""),n=_.get(e,"ProviderCode","");return r===be.Pc.EWALLET?"EWallet_".concat(n):r===be.Pc.BANK_DEPOSIT?be.Pc.BANK_DEPOSIT:be.Pc.CREDIT_CARD},t.handleOnHoldChange=function(e){t.props.onOnHoldChange(e)},t.handleOnPayNowChange=function(e,r){t.props.onPayNowChange(e,r)};var r=_.find(t.props.activeReservationsForBookingViews,(function(e){return e.Id===t.props.reservationId}));return t.state={isSavedCCSelectedPaymentOption:!1,displayPaymentScheduleTabs:_.get(r,"displayPaymentScheduleTabs",!1)},t}return t=i,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.activeReservationsForBookingViews,n=t.reservationId,o=_.find(e.activeReservationsForBookingViews,(function(e){return e.Id===n})),i=_.find(r,(function(e){return e.Id===n})),a=_.get(o,"displayPaymentScheduleTabs",!1),s=_.get(i,"displayPaymentScheduleTabs",!1);this.state.displayPaymentScheduleTabs||_.isEqual(a,s)||this.setState({displayPaymentScheduleTabs:s})}},{key:"render",value:function(){var e=this.props,t=e.actions,r=e.allowPay,n=e.activeProfilesForBookingViews,o=e.activeProfileIdsForBookingViews,i=e.activeReservationsForBookingViews,a=e.arrive,s=e.bookingDate,l=e.currencyCode,c=e.dueType,u=e.getGuestPaymentInfo,p=e.guestPaymentInfo,m=e.formatMessage,f=e.hasPayment,y=e.isAlwaysRedirect,g=e.isOnHoldEnabled,v=e.isDepositPolicy,h=e.isMultiReservation,b=e.isOnHold,C=e.isInModifyMode,P=e.isPayMonthly,O=e.isPayNow,I=e.isPaymentValid,w=e.loggedInUserProfile,S=e.onHoldTime,N=e.payDueDate,A=e.paymentWallets,T=e.payNowAmount,D=e.payNowDiscount,k=e.reservationId,F=e.timezone,R=e.vendorFailure,E=e.updateReservationInProgress,M=e.roomNumber,j=e.walletPaymentVerified,x=e.getIWMDataRequested,V=this.state,L=V.displayPaymentScheduleTabs,B=V.isSavedCCSelectedPaymentOption,H=Di(FormattedMessage,{id:"guestPaymentCreate.title.cardInfo"}),G=this.getPaymentMethodOptions(),z=Ai(Ai({},this.props),{},{isSavedCCSelectedPaymentOption:B,toggleIsSavedCCSelectedPaymentOption:this.toggleIsSavedCCSelectedPaymentOption,paymentMethodOptions:G}),U=_.find(i,(function(e){return e.Id===k})),q=v&&!O,K=Di(FormattedMessage,{id:"guestPayment.title.payment"}),W=Di(h?"h3":"h2",{className:"app_heading1"},void 0,K),$={bookingDate:s,dueType:c,hotelDetails:{timezone:F},guaranteeDueDate:N,arrive:a,currencyCode:l,guaranteeAmount:T},Y=Object($n.v)(U,n),X=Di(FormattedMessage,{id:"guestDetails.label.paymentMethod"}),Z=_.size(A)>0,J=this._getSelectedPaymentMethodOption(p[k],G),Q=_.get(U,"creditDebitCard",{}),ee={activeReservationsForBookingViews:i,activeProfileIdsForBookingViews:o,actions:t,allowPay:r,creditCardUsedForReservation:Y,id:"guest-payment-create-method-select-".concat(M),isAlwaysRedirect:y,label:X,options:G,selected:J,formatMessage:m,loggedInUserProfile:w,getGuestPaymentInfo:u,guestPaymentInfo:p,required:!0,reservationId:k,isInModifyMode:C,isDepositPolicy:v,isPaymentValid:I,paymentWallets:A,setReservationWalletId:t.setReservationWalletId,shouldDisplayWallets:Z,walletPaymentVerified:j,updateReservationInProgress:E,roomNumber:M,isPayNow:O,title:H,payNowAmount:T,getPaymentProps:this._getPaymentProps,guestPaymentCreateProps:z,isSavedCCSelectedPaymentOption:B,toggleIsSavedCCSelectedPaymentOption:this.toggleIsSavedCCSelectedPaymentOption,creditDebitCard:Q},te=function(){return Di("p",{},void 0,Di("span",{className:wi.a.payNowAmount},void 0,React.createElement(d.a,$))," ",Di(FormattedMessage,{id:"guestPayment.description.payNow"}))};return Di("div",{className:wi.a.container},void 0,Di("hr",{}),Di("fieldset",{},void 0,Di("legend",{},void 0,W),Di(_e.a,{condition:L},void 0,Di(Oi,{isOnHold:b,isPayNow:O,isPayMonthly:P,isOnHoldEnabled:g,onHoldTime:S,allowPay:r,paymentProps:z,vendorFailure:R,cardInfo:H,reservationId:k,hasPayment:f,payNowAmount:T,payNowDiscount:D,currency:l,onOnHoldChange:this.handleOnHoldChange,onPayNowChange:this.handleOnPayNowChange,formatMessage:m,updateReservationInProgress:E,isPaymentInstallmentsEnabled:_.get(U,"isPaymentInstallmentsEnabled",!1),paymentSelectFopProps:ee,isDepositPolicyWithoutPayNow:q,setSelectedPaymentMethod:t.setSelectedPaymentMethod,getIWMDataRequested:x},void 0,Di(te,{}))),Di(_e.a,{condition:!L},void 0,Di(Fragment,{},void 0,Di(_e.a,{condition:q},void 0,Di(te,{})),React.createElement(ci,ee)))))}}])&&ki(t.prototype,r),n&&ki(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||Ci)||Ci;xi.defaultProps={paymentMethodOptions:{}};var Vi=xi,Li=r(15);function Bi(e){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(r),!0).forEach((function(t){zi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zi(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Bi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ui,qi,Ki=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("-");return _.trim(_.last(t))},Wi=function(e){return _.reduce(e,(function(e,t,r){var n=t.AttributeList,o=t.Code,i=t.Value,a=_.get(n,"0.Value");return e.arriveTerminalListOptions=Gi(Gi({},e.arriveTerminalListOptions),{},zi({},r,"".concat(o," - ").concat(i," - ").concat(a))),e.departTerminalListOptions=Gi(Gi({},e.departTerminalListOptions),{},zi({},r,"".concat(o," - ").concat(i," - ").concat(a))),e}),{})},$i={arrivingTerminalKey:"",departingTerminalKey:"",arrivingTransportationType:"",departingTransportationType:"",estimatedArrivalTime:"",estimatedDepartureTime:"",arrivingAirline:"",departingAirline:"",arrivingTerminal:"",departingTerminal:"",doArrivalTimeCheck:!1,estimatedArrivalTimeKey:"",arrivingAirlineKey:"",arrivingTransportationCode:"",estimatedDepartureTimeKey:"",departingAirlineKey:"",departingTransportationCode:"",arrivingTerminalCode:"",arrivingTerminalType:"",arrivingTransportationNumber:"",departingTerminalCode:"",departingTerminalType:"",departingTransportationNumber:"",isTerminalArrivingClicked:"",isTerminalDepartingClicked:"",arrivingFlight:"",departingFlight:""},Yi=r(1779),Xi=r.n(Yi);function Zi(e){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e,t,r,n){qi||(qi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:qi,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Qi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(r),!0).forEach((function(t){ta(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ta(e,t,r){return(t=na(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ra(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,na(n.key),n)}}function na(e){var t=function(e,t){if("object"!==Zi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Zi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zi(t)?t:String(t)}function oa(e,t){return(oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ia(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=sa(e);if(t){var o=sa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return aa(this,r)}}function aa(e,t){if(t&&("object"===Zi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var la=withStyles(Xi.a)(Ui=bindRedux([p.a],[W])(Ui=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oa(e,t)}(i,Component);var t,r,n,o=ia(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).clearTransportationDetails=function(e){e.preventDefault();var r=$i;t.setState(r,(function(){return t.updateTransportationInfoDetails()})),t.props.onArrivalTerminalSelected(!1),t.props.actions.setArrivalTimeNotRequired(!0,t.props.activeProfileIdsForBookingViews)},t.state=t.getTransportationData(e),t}return t=i,(r=[{key:"componentDidMount",value:function(){this.updateTransportationInfoDetails()}},{key:"componentDidUpdate",value:function(e){var t=_.get(this.props,"currentGuestProfile.dataCopiedFromPrimary"),r=_.get(e,"currentGuestProfile.dataCopiedFromPrimary");_.isEqual(t,r)||(this.setState(ea({},this.getTransportationData(this.props))),this.props.actions.setProfileCopiedDataFromPrimary(!1))}},{key:"getTransportationData",value:function(e){var t=_.get(e,"currentGuestProfile.guestDetails"),r=t.arrivingTerminalType,n=t.departingTerminalType,o=t.estimatedArrivalTimeKey,i=t.arrivingTerminalCode,a=t.departingTerminalCode,s=t.arrivingAirlineKey,l=t.departingAirlineKey,d=t.estimatedDepartureTimeKey,c=t.arrivingTransportationCode,u=t.departingTransportationCode,p=t.arrivingFlight,m=void 0===p?"":p,f=t.departingFlight,y=void 0===f?"":f,g=t.arrivingTransportationNumber,v=t.departingTransportationNumber,h=_.findIndex(e.terminalList,(function(e){return e.Code===i})),b=h>=0?h:void 0,C=_.findIndex(e.terminalList,(function(e){return e.Code===a})),P=C>=0?C:void 0,O=Object(Li.n)(),I=Wi(e.terminalList),w=I.arriveTerminalListOptions,S=I.departTerminalListOptions,N=_.get(O,o),A=_.get(O,d),T=_.get(w,h),D=_.get(S,C),k=_.get(e.arriveTerminalAirlineListOptions[i],s),F=_.get(e.departTerminalAirlineListOptions[a],l),R=e.terminalTransportationListOptions[_.get(e.terminalList[b],"Code")]||{},E=e.terminalTransportationListOptions[_.get(e.terminalList[P],"Code")]||{},M=_.get(R,c),j=_.get(E,u);return this.props.onArrivalTerminalSelected(!!r),{isTerminalArrivingClicked:!!r,isTerminalDepartingClicked:!!n,arrivingTerminalType:r,departingTerminalType:n,arrivingTransportationNumber:m||g,departingTransportationNumber:y||v,arrivingTerminalKey:b,departingTerminalKey:P,arrivingTerminalCode:i,departingTerminalCode:a,arrivingTransportationType:M,departingTransportationType:j,estimatedArrivalTime:N,estimatedDepartureTime:A,arrivingAirline:k,departingAirline:F,arrivingTerminal:T,departingTerminal:D,doArrivalTimeCheck:!1,estimatedArrivalTimeKey:o,arrivingAirlineKey:s,arrivingTransportationCode:c,estimatedDepartureTimeKey:d,departingAirlineKey:l,departingTransportationCode:u,arrivingFlight:m,departingFlight:y}}},{key:"updateTransportationInfoDetails",value:function(e,t){this.props.actions.setProfileInfo(ea(ea({},this.state),{},ta({},e,t)),[this.props.currentGuestProfile.CRS_referenceNumber])}},{key:"handleArrivingAirline",value:function(e){var t=this,r=_.get(e,"value"),n=_.get(e,"key");this.setState({arrivingAirline:r,arrivingAirlineKey:n},(function(){return t.updateTransportationInfoDetails("arrivingAirline",n)}))}},{key:"handleDepartingAirline",value:function(e){var t=this,r=_.get(e,"value"),n=_.get(e,"key");this.setState({departingAirline:r,departingAirlineKey:n},(function(){return t.updateTransportationInfoDetails("departingAirline",n)}))}},{key:"handleArrivingTerminal",value:function(e){var t=this,r=_.get(e,"value"),n=_.get(e,"key"),o=Ki(r),i=this.props.terminalTransportationListOptions[_.get(this.props.terminalList[n],"Code")]||{},a=_.head(_.keys(i));this.setState({isTerminalArrivingClicked:!0,arrivingTerminal:r,arrivingTerminalKey:n,arrivingTerminalCode:this.props.terminalList[n].Code,arrivingAirline:"",arrivingAirlineKey:"",arrivingTransportationNumber:"",arrivingTransportationCode:a,arrivingTerminalType:o},(function(){return t.updateTransportationInfoDetails("arrivingTerminal",r)})),this.props.onArrivalTerminalSelected(!0)}},{key:"handleDepartingTerminal",value:function(e){var t=this,r=_.get(e,"value"),n=_.get(e,"key"),o=Ki(r),i=this.props.terminalTransportationListOptions[_.get(this.props.terminalList[n],"Code")]||{},a=_.head(_.keys(i));this.setState({isTerminalDepartingClicked:!0,departingTerminal:r,departingTerminalKey:n,departingTerminalCode:this.props.terminalList[n].Code,departingAirline:"",departingAirlineKey:"",departingTransportationNumber:"",departingTransportationCode:a,departingTerminalType:o},(function(){return t.updateTransportationInfoDetails("departingTerminal",r)}))}},{key:"handleArrivingTransportationType",value:function(e){var t=this,r=_.get(e,"value"),n=_.get(e,"key");this.setState({arrivingTransportationType:r,arrivingTransportationCode:n},(function(){return t.updateTransportationInfoDetails("arrivingTransportationCode",n)}))}},{key:"handleDepartingTransportationType",value:function(e){var t=this,r=_.get(e,"value"),n=_.get(e,"key");this.setState({departingTransportationType:r,departingTransportationCode:n},(function(){return t.updateTransportationInfoDetails("departingTransportationCode",n)}))}},{key:"handleArrivingTransportationNumber",value:function(e){var t=this;this.setState({arrivingTransportationNumber:e},(function(){return t.updateTransportationInfoDetails("arrivingTransportationNumber",e)}))}},{key:"handleDepartingTransportationNumber",value:function(e){var t=this;this.setState({departingTransportationNumber:e},(function(){return t.updateTransportationInfoDetails("departingTransportationNumber",e)}))}},{key:"onTimeFieldChange",value:function(e,t){var r,n=this,o=_.get(t,"value"),i=_.get(t,"key");this.setState((ta(r={},e,o),ta(r,"".concat(e,"Key"),i),r),(function(){return n.updateTransportationInfoDetails(e,o)})),_.isEmpty(e,"estimatedArrivalTime")&&(_.isEmpty(o)||!this.props.arrivalTimeRequiredIfEntered&&!this.props.arrivalTimeAlwaysRequired?(this.setState({doArrivalTimeCheck:!1}),this.props.setArrivalTimeNotRequired(!1)):(this.setState({doArrivalTimeCheck:!0}),this.props.setArrivalTimeNotRequired(!0),this.props.validateGuestProfile()))}},{key:"render",value:function(){var e=this,t=this.state,r=t.arrivingTransportationNumber,n=t.departingTransportationNumber,o=t.arrivingAirlineKey,i=t.arrivingTerminalType,a=t.departingTerminalType,s=t.arrivingTerminalKey,d=t.departingAirlineKey,c=t.departingTerminalKey,u=t.estimatedArrivalTimeKey,p=t.estimatedDepartureTimeKey,m=t.isTerminalArrivingClicked,f=t.isTerminalDepartingClicked,y=t.arrivingTransportationCode,g=t.departingTransportationCode,v=this.props,h=v.intl.formatMessage,b=v.id,C=v.arrivalTimeAlwaysRequired,P=v.arrivalTimeRequiredIfEntered,O=v.arriveTerminalAirlineListOptions,I=v.terminalList,w=v.departTerminalAirlineListOptions,S=v.terminalTransportationListOptions,N=v.hotelDetails,A=v.disabled,T=v.errors,D=void 0===T?{}:T,k=v.isMultiReservation,F=Wi(I),R=F.arriveTerminalListOptions,E=F.departTerminalListOptions,M=_.get(N,"hotelName","the Hotel"),j=defineMessages({Airport:{id:"guestTransportation.placeHolder.flightNumber",defaultMessage:"##guestTransportation.placeHolder.flightNumber##"},TrainStation:{id:"guestTransportation.placeHolder.trainNumber",defaultMessage:"##guestTransportation.placeHolder.trainNumber##"},BusTerminal:{id:"guestTransportation.placeHolder.busNumber",defaultMessage:"##guestTransportation.placeHolder.busNumber##"},BoatDock:{id:"guestTransportation.placeHolder.boatDockNumber",defaultMessage:"##guestTransportation.placeHolder.boatDockNumber##"},Unknown:{id:"guestTransportation.placeHolder.transportNumber",defaultMessage:"##guestTransportation.placeHolder.transportNumber##"},estimatedArrivalTimeFormat:{id:"guestTransportation.placeHolder.estimatedArrivalTimeFormat",defaultMessage:"##guestTransportation.placeHolder.estimatedArrivalTimeFormat##"},estimatedDepartureTimeFormat:{id:"guestTransportation.placeHolder.estimatedDepartureTimeFormat",defaultMessage:"##guestTransportation.placeHolder.estimatedDepartureTimeFormat##"},estimatedArrivalTime:{id:"guestTransportation.placeHolder.estimatedArrivalTime",defaultMessage:"##guestTransportation.placeHolder.estimatedArrivalTime##"},estimatedDepartureTime:{id:"guestTransportation.placeHolder.estimatedDepartureTime",defaultMessage:"##guestTransportation.placeHolder.estimatedDepartureTime##"},arrivingAt:{id:"guestTransportation.label.arrivingAt",defaultMessage:"##guestTransportation.label.arrivingAt##"},departingAt:{id:"guestTransportation.label.departingAt",defaultMessage:"##guestTransportation.label.departingAt##"},arrivingFlight:{id:"guestTransportation.placeHolder.arrivingFlight",defaultMessage:"##guestTransportation.placeHolder.arrivingFlight##"},departingFlight:{id:"guestTransportation.placeHolder.departingFlight",defaultMessage:"##guestTransportation.placeHolder.departingFlight##"},arrivingTrainStation:{id:"guestTransportation.placeHolder.arrivingTrainNumber",defaultMessage:"##guestTransportation.placeHolder.arrivingTrainNumber##"},departingTrainStation:{id:"guestTransportation.placeHolder.departingTrainNumber",defaultMessage:"##guestTransportation.placeHolder.departingTrainNumber##"},arrivingAirline:{id:"guestTransportation.label.arrivingAirline",defaultMessage:"##guestTransportation.label.arrivingAirline##"},departingAirline:{id:"guestTransportation.label.departingAirline",defaultMessage:"##guestTransportation.label.departingAirline##"},arrivingTransportationOptions:{id:"guestTransportation.label.arrivingTransportationOptions",defaultMessage:"##guestTransportation.label.arrivingTransportationOptions##"},departingTransportationOptions:{id:"guestTransportation.label.departingTransportationOptions",defaultMessage:"##guestTransportation.label.departingTransportationOptions##"},transportationType:{id:"guestTransportation.label.transportationType",defaultMessage:"##guestTransportation.label.transportationType##"}}),x=Object(Li.n)(),V=S[_.get(I[this.state.arrivingTerminalKey],"Code")]||{},L=S[_.get(I[this.state.departingTerminalKey],"Code")]||{},B=i?h(_.get(j,i,j.Unknown)):"",H=a?h(_.get(j,a,j.Unknown)):"",G=Ji(FormattedMessage,{id:"guestTransportation.label.arrival"}),z=Ji(FormattedMessage,{id:"guestTransportation.label.departure"}),U=Ji(FormattedMessage,{id:"guestTransportation.error.estimatedArrivalTimeRequired"}),q=Ji(k?"h5":"h4",{className:"app_subheading2"},void 0,G),K=Ji(k?"h5":"h4",{className:"app_subheading2"},void 0,z);return Ji("div",{className:Xi.a.container,id:b},void 0,Ji("p",{},void 0,Ji(FormattedMessage,{id:"guestTransportation.label.transportationDescription",values:{hotelName:M}})),Ji("div",{className:Xi.a.arrivalContainerHeader},void 0,q,Ji(l.a,{className:"link",onClick:this.clearTransportationDetails,disabled:A},void 0,Ji(FormattedMessage,{id:"guestTransportation.button.clear"}))),Ji("div",{className:Xi.a.arrivalTimeField},void 0,Ji(ve.a,{id:"guest-transportation-arrival-time-select",options:x,selected:u,onChange:function(t){return e.onTimeFieldChange("estimatedArrivalTime",t)},label:h(j.estimatedArrivalTime),disabled:A,isDifferentKeyValue:!0,hasValue:!!u,hideSelectedItem:!u}),(C||P&&m)&&D.estimatedArrivalTime?Ji("div",{className:"app_displayError"},void 0,U):""),Ji(_e.a,{condition:!_.isEmpty(R)},void 0,Ji("div",{className:Xi.a.arrivalTerminal},void 0,Ji(ve.a,{id:"guest-transportation-arrival-message-select",options:R,selected:s,onChange:function(t){return e.handleArrivingTerminal(t)},label:h(j.arrivingAt),disabled:A,isDifferentKeyValue:!0,hasValue:!!(""!==s&&s>=0),hideSelectedItem:!(""!==s&&s>=0)}))),Ji(_e.a,{condition:m},void 0,Ji(Fragment,{},void 0,Ji(_e.a,{condition:_.isEqual(this.state.arrivingTerminalType,"Airport")},void 0,Ji("div",{className:Xi.a.arrivalAirlineField},void 0,Ji(ve.a,{id:"guest-transportation-arrival-airline-message-select",options:O[_.get(I[this.state.arrivingTerminalKey],"Code")]||{},selected:o,onChange:function(t){return e.handleArrivingAirline(t)},label:h(j.arrivingAirline),disabled:A,isDifferentKeyValue:!0,hasValue:!!o,hideSelectedItem:!o}))),Ji(ge.a,{className:Xi.a.arrivalFlightNoField,type:"text",maxLength:40,name:"ArrivingTransportationNumber",onChange:function(t){return e.handleArrivingTransportationNumber(t)},label:B,value:r,disabled:A}),Ji(_e.a,{condition:!!_.size(V)},void 0,Ji("div",{className:Xi.a.arrivalTransportationTypeField},void 0,Ji(ve.a,{id:"guest-transportation-arrival-type-select",options:V,selected:y,onChange:function(t){return e.handleArrivingTransportationType(t)},label:h(j.transportationType),disabled:A,isDifferentKeyValue:!0,hasValue:!!y,hideSelectedItem:!y}))))),Ji("div",{className:Xi.a.departureContainerHeader},void 0,K),Ji("div",{className:Xi.a.departureTimeField},void 0,Ji(ve.a,{id:"guest-transportation-departure-time-select",options:x,selected:p,onChange:function(t){return e.onTimeFieldChange("estimatedDepartureTime",t)},label:h(j.estimatedDepartureTime),disabled:A,isDifferentKeyValue:!0,hasValue:!!p,hideSelectedItem:!p})),Ji(_e.a,{condition:!_.isEmpty(E)},void 0,Ji("div",{className:Xi.a.departureTerminal},void 0,Ji(ve.a,{id:"guest-transportation-departure-message-select",options:E,selected:c,onChange:function(t){return e.handleDepartingTerminal(t)},label:h(j.departingAt),disabled:A,isDifferentKeyValue:!0,hasValue:!!(""!==c&&c>=0),hideSelectedItem:!(""!==c&&c>=0)}))),Ji(_e.a,{condition:f},void 0,Ji(Fragment,{},void 0,Ji(_e.a,{condition:_.isEqual(this.state.departingTerminalType,"Airport")},void 0,Ji("div",{className:Xi.a.departureAirlineField},void 0,Ji(ve.a,{id:"guest-transportation-departure-airline-message-select",options:w[_.get(I[this.state.departingTerminalKey],"Code")]||{},selected:d,onChange:function(t){return e.handleDepartingAirline(t)},label:h(j.departingAirline),disabled:A,isDifferentKeyValue:!0,hasValue:!!d,hideSelectedItem:!d}))),Ji(ge.a,{className:Xi.a.departureFlightNoField,type:"text",maxLength:40,name:"DepartingFlight",onChange:function(t){return e.handleDepartingTransportationNumber(t)},label:H,value:n,disabled:A}),Ji(_e.a,{condition:!!_.size(L)},void 0,Ji("div",{className:Xi.a.departureTransportationTypeField},void 0,Ji(ve.a,{id:"guest-transportation-departure-type-select",options:L,selected:g,onChange:function(t){return e.handleDepartingTransportationType(t)},label:h(j.transportationType),disabled:A,isDifferentKeyValue:!0,hasValue:!!g,hideSelectedItem:!g}))))))}}])&&ra(t.prototype,r),n&&ra(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||Ui)||Ui;la.defaultProps={selectorProps:{hotelAvailabilitySelector:["hotelDetails"]}};var da,ca=injectIntl(la),ua=r(220),pa=r(1781),ma=r.n(pa),fa=r(72);function ya(e,t,r,n){da||(da="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:da,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function ga(e){var t=e.privacyPolicyLink,r=e.privacyPolicyTitle,n=e.onSubscribeButtonClick,o=e.subscribed,i=e.isMultiReservation,a=e.formatMessage,s=r?"".concat(r," ").concat(t):"",d="".concat(a({id:"guestInfo.title.subscribeMessage"}),"\n        ").concat(a({id:"guestInfo.label.subscribeMessage"}),"\n        ").concat(Object(fa.a)(s),"\n        ").concat(a({id:"guestInfo.button.subscribe"})),c=i?"h4":"h3";return ya("div",{className:ma.a.container},void 0,ya(c,{className:"app_subheading2"},void 0,ya(FormattedMessage,{id:"guestInfo.title.subscribeMessage"})),ya("div",{className:ma.a.content},void 0,ya("div",{className:ma.a.buttonWrapper},void 0,ya(_e.a,{condition:!o},void 0,ya(l.a,{className:"btn",colorClassName:"secondary",sizeClassName:"sm",onClick:n,ariaLabel:d},void 0,ya(FormattedMessage,{id:"guestInfo.button.subscribe"}))),ya(_e.a,{condition:o},void 0,ya("div",{"aria-relevant":"all","aria-live":"polite",className:ma.a.subscribed,id:"subscribed-label"},void 0,ya("i",{"aria-hidden":"true",className:ma.a.check}),ya(FormattedMessage,{id:"guestInfo.label.subscribed"})))),ya("div",{id:"subscribe-message"},void 0,ya(FormattedMessage,{id:"guestInfo.label.subscribeMessage"}),ya(_e.a,{condition:!!r},void 0," ",ya("a",{"aria-label":s,href:t,target:"_blank",rel:"noreferrer"},void 0,r)))))}ga.defaultProps={isMultiReservation:!1};var va,ha,ba=injectIntl(Nt()(ma.a)(ga)),_a=r(920),Ca=r(1783),Pa=r.n(Ca);function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(e,t,r,n){ha||(ha="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:ha,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function wa(e){return function(e){if(Array.isArray(e))return Sa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Sa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Aa(e,t,r){return(t=Da(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ta(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Da(n.key),n)}}function Da(e){var t=function(e,t){if("object"!==Oa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oa(t)?t:String(t)}function ka(e,t){return(ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ma(e);if(t){var o=Ma(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ra(this,r)}}function Ra(e,t){if(t&&("object"===Oa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ea(e)}function Ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ja=withStyles(Pa.a)(va=bindRedux([u.a,se.a,re.a,ie.a,Q.a,m.a,ee.a,J.a],[yr,W,$])(va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ka(e,t)}(i,Component);var t,r,n,o=Fa(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).onChangeCommentArea=function(e){var r=e.reservationId,n=e.commentArea,o=t.state.additionalGuestInfo;o.asMutable&&(o=o.asMutable({deep:!0})),o[r].commentArea=n,t.setAdditionalGuests(o),t.props.onPublicCommentChange(n,r)},t.onPayNowChange=function(e,r,n){var o=t.props,i=o.reservationId,a=o.activeReservationsForBookingViews,s=o.addOnsInCart,l=o.activeProfilesForBookingViews,d=o.actions,c=void 0===d?{}:d,u=o.guestPaymentInfo,p=c.onPayNowToggle,m=c.setPayNowStatus,f=c.setPayMonthlyStatus,y=n||_.find(a,(function(e){return e.Id===i})),g=_.get(y,"Id",""),v=_.get(u,[g],{}),h=_.get(v,"installmentPlan",{});_.isEmpty(h)||r||_.set(v,"installmentPlan",{}),p(y,s,l,e),m(e,g),f(r,g)},t.onSubscribeButtonClick=function(){var e=t.props.actions.setMarketingConsent,r=t.state;e({emailAddress:r.emailAddress,phone:r.phone1}),t._update()},t.showMarketingConsent=function(){t.setState({isMarketingConsentVisible:!0})},t.onChangeEmail=function(e){var r=t.props.isMarketingConsentAccepted;t.setState({emailAddress:e},(function(){r&&t._update("emailAddress",e)}))},t.onChangePhone=function(e){var r=t.props.isMarketingConsentAccepted;t.setState({phone1:e},(function(){r&&t._update("phone1",e)}))},t.onPrefixBlur=function(e){t._update("prefix",e)},t._shouldAddToNewLoyalty=function(e,t){return e&&!e.some((function(e){return e.programCode===t.programCode&&e.programNumber===t.programNumber}))},t._isAlwaysRedirect=function(){return t.props.isRedirectionType===be.v},t._isLoggedIn=function(){var e=t.props.loggedInUserProfile;return Object(de.A)(e)},t._update=t._update.bind(Ea(t));var r=e.currentProfile,n=e.reservations,a=void 0===n?[]:n,s=e.activeProfilesForBookingViews,l=e.configData,d=_.get(r,"guestDetails",{}),c=!!a.find((function(e){return e.PublicComment})),u=!!a.find((function(e){return _.size(e.CustLoyaltyList)})),p=s.some((function(e){return e.Role===be.ld.ADDITIONAL})),m=c;return t.state={additionalGuestInfo:t._getAdditionalGuestInfoFromReservations(a),displayStates:!0,isArrivingClicked:!1,isDepartingClicked:!1,isOptionalGuestInfoClicked:p,isOptionalLoyaltyClicked:u,isSpecialAccessiblityRequestClicked:m,isTransportationInfoExpanded:l.enableTransportationDetails&&e.arrivalTimeAlwaysRequired,selectAddressType:null,selectedArrivingAirline:null,selectedArrivingAt:null,selectedCountryIndex:0,selectedDepartingAirline:null,selectedDepartingAt:null,selectedStateProvinceIndex:0,selectPrefix:"",suggestedCountries:[],suggestedStateProvinces:[],firstName:_.get(d,"firstName"),lastName:_.get(d,"lastName"),middleName:_.get(d,"middleName"),suffix:_.get(d,"suffix"),emailAddress:_.get(d,"emailAddress"),phoneType1:_.get(d,"phoneType1"),phoneType2:_.get(d,"phoneType2"),phoneLocation1:_.get(d,"phoneLocation1"),phoneLocation2:_.get(d,"phoneLocation2"),phone1:t._getNormalizedNumber(d,"dialCode1","phone1"),phone2:t._getNormalizedNumber(d,"dialCode2","phone2"),address1:_.get(d,"address1"),address2:_.get(d,"address2"),zipPostalCode:_.get(d,"zipPostalCode"),stateProvince:_.get(d,"stateProvince"),city:_.get(d,"city"),isMarketingConsentVisible:!1},e.actions.setArrivalTimeNotRequired(!e.arrivalTimeNotRequired,e.activeProfileIdsForBookingViews),t}return t=i,n=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=e.errors||{};return e.defaultAddress&&!t.selectAddressType&&(r.selectAddressType=e.defaultAddress.addressName),-1===_.values(n).indexOf("loyaltyFields.text.loyaltyNumberIsRequired")||t.isOptionalLoyaltyClicked||(r.isOptionalLoyaltyClicked=!0),_.isEmpty(r)?null:r}}],(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=this.state,n=t.actions,o=t.address,i=t.guestDetails.countryCode,a=t.reservations,s=t.activeReservationsForBookingViews,l=t.onHoldTime;o&&this.addAddress(),i&&n.findAssociatedStates(i);var d=r.isOptionalGuestInfoClicked;a.forEach((function(e){var t=e.Occupancy,r=t.AdultCount,n=t.ChildCount;d=r+n===1})),r.isOptionalGuestInfoClicked||this.setState({isOptionalGuestInfoClicked:d});var c=s.find((function(t){return t.Id===e.props.reservationId})),u=Object(de.z)([c],!0),p=_.get(this.props,"configData.onHoldEnabled",!1),m=Object($n.ub)(c,p,l);u&&this.props.actions.setIsPaymentValid(!0,this.props.reservationId),!m&&c.isOnHold&&this.props.actions.setOnHoldStatus(!1,this.props.reservationId),(r.phone1||r.emailAddress)&&this.showMarketingConsent()}},{key:"componentDidUpdate",value:function(e,t){var r=this,n=_.get(this.props,"errors.estimatedArrivalTime",!1),o={},i=!_.get(e,"errors.estimatedArrivalTime",!1)&&n,a=!_.isEqual(this.props.guestDetails.estimatedArrivalTimeKey,e.guestDetails.estimatedArrivalTimeKey),s=!_.isEmpty(this.props.guestDetails.estimatedArrivalTimeKey),l=!_.isEqual(this.props.guestDetails.estimatedDepartureTimeKey,e.guestDetails.estimatedDepartureTimeKey),d=!_.isEmpty(this.props.guestDetails.estimatedDepartureTimeKey);if((i||a||l)&&(o.isTransportationInfoExpanded=s||d||i),this.props.isInModifyMode&&e.activeReservationId!==this.props.activeReservationId&&(o.additionalGuestInfo=this._getAdditionalGuestInfoFromReservations(this.props.reservations)),e.reservations.length>this.props.reservations.length){var c=new Set(this.props.reservations.map((function(e){return e.Id}))),u=Object.keys(t.additionalGuestInfo).reduce((function(e,r){return c.has(r)?Object.assign(e,Aa({},r,t.additionalGuestInfo[r])):e}),{});o.additionalGuestInfo=u}var p=_.get(e.loggedInUserProfile,"identity.ID"),m=_.get(this.props.loggedInUserProfile,"identity.ID");if(!p&&m&&!this.props.isInModifyMode&&this.props.profileType===be.md.GUEST){var f=this.props.loggedInUserProfile;this.setState({firstName:_.get(f,"firstName",""),lastName:_.get(f,"lastName",""),middleName:_.get(f,"middleName",""),suffix:_.get(f,"suffix",""),emailAddress:_.get(f,"emailAddress",""),address1:_.get(f,"address1",""),address2:_.get(f,"address2",""),zipPostalCode:_.get(f,"zipPostalCode",""),stateProvince:_.get(f,"stateProvince",""),city:_.get(f,"city",""),phone1:this._getNormalizedNumber(f,"dialCode1","phone1"),phone2:this._getNormalizedNumber(f,"dialCode2","phone2")})}if(_.isEqual(_.get(this.props,"currentProfile.guestDetails"),_.get(e,"currentProfile.guestDetails"))||this.setState({firstName:_.get(this.props,"currentProfile.guestDetails.firstName"),lastName:_.get(this.props,"currentProfile.guestDetails.lastName"),emailAddress:_.get(this.props,"currentProfile.guestDetails.emailAddress"),phone1:this._getNormalizedNumber(this.props,"currentProfile.guestDetails.dialCode1","currentProfile.guestDetails.phone1"),phone2:this._getNormalizedNumber(this.props,"currentProfile.guestDetails.dialCode2","currentProfile.guestDetails.phone2")}),!_.isEqual(this.props.walletPaymentVerified,e.walletPaymentVerified)){var y=this.props.activeProfilesForBookingViews.find((function(e){return e.reservationId===r.props.walletInfo.reservationId})),g=Immutable(_.get(y,"guestDetails.paymentCardList[0].PaymentCard",{})).asMutable({deep:!0});g.paymentType=be.Pc.CREDIT_CARD,g.CardExpirationDate=_.get(g,"ExpireDate"),e.getGuestPaymentInfo(g,_.get(y,"reservationId"))}this.props.copyingProfileData&&this.isProfileDataTheSame(_.get(this.props.currentProfile,"guestDetails",!1)),Object.keys(o).length>0&&this.setState(o)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=this.state;e.onChangeMainGuest({additionalGuests:t.additionalGuestInfo})}},{key:"isProfileDataTheSame",value:function(e){var t=this;if(e){var r={},n={};Object.keys(e).forEach((function(o){"string"==typeof e[o]&&(r[o]=e[o],n[o]=t.state[o])})),_.isEqual(r,n)||this.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(r),!0).forEach((function(t){Aa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r),(function(){return t.props.actions.copyProfileData(!1)}))}}},{key:"addAddress",value:function(){var e=this.props.address,t={};return e.map((function(e,r){t["name"+r]=e.addressName})),t}},{key:"addNewGuest",value:function(e){var t=this.state.additionalGuestInfo,r=this.props,n=r.crsReferenceNumberCounter,o=r.activeReservationsForBookingViews,i=r.actions,a=n+1;if(!(void 0!==t[e]&&t[e].guests.length+1>t[e].maxGuestAllow)){var s=_.find(o,(function(t){return t.Id===e})),l={firstName:"",lastName:"",emailAddress:"",CRS_referenceNumber:a},d=_.cloneDeep(t),c=_.get(d,[e,"guests"],[]),u=[].concat(wa(c),[l]);_.set(d,[e,"guests"],u),i.addAdditionalGuest(e,s.CrsConfirmationNumber),this.setAdditionalGuests(d)}}},{key:"addNewLoyalty",value:function(){this.setReservationLoyalty({ProgramID:"",MembershipID:""})}},{key:"addOptionalGuestInfo",value:function(){this.setState({isOptionalGuestInfoClicked:!this.state.isOptionalGuestInfoClicked})}},{key:"hasGuestCountMoreThanOne",value:function(){var e=this.props,t=e.activeReservationsForBookingViews,r=void 0===t?[]:t,n=e.configData,o=e.reservationId,i=r.find((function(e){return e.Id===o}));return!!i&&Object(O.c)({adults:parseInt(i.Occupancy.AdultCount),children:parseInt(i.Occupancy.ChildCount),configData:n})>1}},{key:"_getAdditionalGuestInfoFromReservation",value:function(e){var t=this.props.activeProfilesForBookingViews.filter((function(t){return t.reservationId===e&&t.Role===be.ld.ADDITIONAL})),r=[];return t.forEach((function(e){r.push({firstName:e.guestDetails.firstName||"",lastName:e.guestDetails.lastName||"",CRS_referenceNumber:e.CRS_referenceNumber,emailAddress:e.guestDetails.emailAddress||""})})),r}},{key:"_getAdditionalGuestInfoFromReservations",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((function(t,r){var n=r.Occupancy,o=n.AdultCount,i=n.ChildCount,a=Object(O.c)({adults:o,children:i,configData:e.props.configData});return t[r.Id]={guests:e._getAdditionalGuestInfoFromReservation(r.Id)||[],maxGuestAllow:a>be.lc?be.lc:a-1,roomName:r.RoomName,commentArea:r.PublicComment},t}),{})}},{key:"_shouldBillingAddressComponentRender",value:function(){var e=this.props,t=e.configData,r=e.showBillingAddressFromCrs,n=t.displayVatBillingAddressFields;return r&&n}},{key:"onFirstNameChange",value:function(e){var t=e.reservationId,r=e.index,n=e.firstName,o=this.state.additionalGuestInfo,i=o[t].guests[r];i.firstName=n,this.setAdditionalGuests(o),this.props.onChangeAdditionalGuest(i,i.CRS_referenceNumber)}},{key:"onLastNameChange",value:function(e){var t=e.reservationId,r=e.index,n=e.lastName,o=this.state.additionalGuestInfo,i=o[t].guests[r];i.lastName=n,this.setAdditionalGuests(o),this.props.onChangeAdditionalGuest(i,i.CRS_referenceNumber)}},{key:"onEmailAddressChange",value:function(e){var t=e.reservationId,r=e.index,n=e.emailAddress,o=e.error,i=Object.assign({},this.state.additionalGuestInfo),a=i[t].guests[r];a.emailAddress=n,a.error=o,this.setAdditionalGuests(i),this.props.onChangeAdditionalGuest(a,a.CRS_referenceNumber)}},{key:"onLoyaltyInfoClicked",value:function(){var e=this.props,t=e.activeReservationsForBookingViews,r=e.reservationId,n=t.find((function(e){return e.Id===r}));_.get(n,"CustLoyaltyList",[]).length||this.addNewLoyalty(),this.setState({isOptionalLoyaltyClicked:!this.state.isOptionalLoyaltyClicked})}},{key:"onLoyaltyNumberChange",value:function(e){this.setReservationLoyalty(e)}},{key:"onLoyaltyProgramChange",value:function(e){this.setReservationLoyalty(e)}},{key:"onRemoveGuest",value:function(e){var t=e.reservationId,r=e.index,n=this.state.additionalGuestInfo,o=n[t].guests[r].CRS_referenceNumber;n[t].guests.splice(r,1),this.setAdditionalGuests(n),this.props.actions.removeAdditionalGuest(o),Object.keys(n).map((function(e){return n[e].guests.length})).reduce((function(e,t){return e+t}),0)||this.setState({isOptionalGuestInfoClicked:!1})}},{key:"onRemoveLoyalty",value:function(e){var t=this;this.props.actions.removeReservationLoyalty(this.props.reservationId,e.index);var r=this.props.activeReservationsForBookingViews.find((function(e){return e.Id===t.props.reservationId}));1===_.get(r,"CustLoyaltyList.length",0)&&this.onLoyaltyInfoClicked(),this._update(e.key,e.value)}},{key:"onSpecialAccessibilityRequestClicked",value:function(){this.setState({isSpecialAccessiblityRequestClicked:!this.state.isSpecialAccessiblityRequestClicked})}},{key:"onTrasportationInfoClicked",value:function(){this.setState({isTransportationInfoExpanded:!this.state.isTransportationInfoExpanded})}},{key:"setAdditionalGuests",value:function(e){this.setState({additionalGuestInfo:e}),this.props.setAdditionalGuests(e)}},{key:"setReservationLoyalty",value:function(e){this.props.actions.setReservationLoyalty(this.props.reservationId,e)}},{key:"_update",value:function(e,t){var r=this.props,n=r.activeProfilesForBookingViews,o=r.onChangeMainGuest,i=r.reservationId,a=n.find((function(e){return e.reservationId===i&&e.Role===be.ld.PRIMARY}));o(this._getUpdatedState(e,t),a.CRS_referenceNumber)}},{key:"_getUpdatedState",value:function(e,t){var r={};switch(r[e]=_.trim(t)?t:"",e){case"phone1":r.dialCode1=null;break;case"phone2":r.dialCode2=null}return r}},{key:"_getNormalizedNumber",value:function(e,t,r){return Object(ua.a)(_.get(e,t),_.get(e,r))}},{key:"shouldRenderPasswordSection",value:function(){return!Object(de.E)(this.props.configData,this.props.proActiveEnrollmentLoyaltyProgram)}},{key:"render",value:function(){var e,t,r=this,n=this.state,o=n.isOptionalGuestInfoClicked,i=n.isOptionalLoyaltyClicked,a=n.isTransportationInfoExpanded,s=n.additionalGuestInfo,d=this.props,u=d.actions,p=d.activeProfileIdsForBookingViews,m=d.activeProfilesForBookingViews,f=d.activeReservationsForBookingViews,y=d.arrivalTimeAlwaysRequired,g=d.arrivalTimeNotRequired,v=d.arrivalTimeRequiredIfEntered,h=d.arriveTerminalAirlineListOptions,b=d.authenticationDetails,C=d.configData,P=d.confirmationNumber,O=d.currentProfile,I=d.defaultLoyaltyPrograms,w=d.departTerminalAirlineListOptions,S=d.displayCommentArea,N=d.displayLocale,A=d.enableMultipleLoyaltyProgram,T=d.getGuestPaymentInfo,D=d.getGuestPaymentInfoErrors,k=d.guestPaymentInfo,F=d.identity,R=d.intl.formatMessage,E=d.isInModifyMode,M=d.isMultiReservation,j=d.getIWMDataRequested,x=d.loggedInUserProfile,V=d.loyaltyProgramListOptions,L=d.onArrivalTerminalSelected,B=d.onHoldTime,H=d.prefixList,G=d.reservationId,z=d.roomNumber,U=d.roomRequests,q=d.selectedLanguage,K=d.showAdditionalGuests,W=d.terminalList,$=d.terminalTransportationListOptions,Y=d.timezone,X=d.isMarketingConsentAccepted,Z=d.supportedTravelDocuments,J=void 0===Z?[]:Z,Q=d.walletPaymentVerified,ee=C.allowLogin,te=C.enableAdditionalGuestEmailAddresses,re=C.enableLoyaltyProgramTypes,ne=C.enableTransportationDetails,oe=C.showRoomRequests,ie=be.td.BOOKED,ae=be.td.STORED,se=be.td.CONFIRMED,le=be.td.PAYMENT_PENDING,ce=this.shouldRenderPasswordSection(),ue=_.get(C,["policyUrls"],{})[q],pe=_.get(ue,["signUp","title"],""),me=_.get(ue,["signUp","url"],""),fe=_.get(ue,["privacy","title"],""),ye=_.get(ue,["privacy","url"],""),he=_.get(O,"guestDetails",{}),Ce=_.get(O,"guestDetails.errors",{}),Pe=this.getPlaceHolders(),Oe=_.find(f,(function(e){return e.Id===G}))||{},Ie=!_.isEmpty(V),we=_.get(Oe,"Status",""),Se=we===ie||we===ae,Ne=_.get(Oe,"BookingPolicy.AllowPay")&&Se,Ae=_.get(Oe,"BookingDues.Deposit.Amount",0),Te=_.get(Oe,"BookingDues.Deposit.DueDate",""),De=_.get(Oe,"BookingPolicy.DepositFee.DueType",""),ke=_.get(Oe,"StartDate"),Fe=Math.abs(_.get(Oe,"payNowDiscount.AppliedAmount",0)),Re=[se,le].includes(we),Ee=_.get(Oe,"CustLoyaltyList",[]),Me=Object(gr.a)(C),je=Object(gr.b)(C),xe=function(e){return Ia(FormattedMessage,{id:"guestInfo.error."+e})},Ve=m.find((function(e){return e.reservationId===G&&e.Role===be.ld.PRIMARY})),Le=Object(de.m)({profile:Ve}),Be=_.get(Le,"VendorStatus")===be.Lc.FAILURE,He=Le&&!Object.keys(k[G]||{}).length?Object($n.H)(Le):k,Ge=!!Le&&_.get(Le,"Type")!==be.Pc.UNDETERMINED||""!==_.get(He,"[".concat(G,"].PaymentToken"),""),ze=_.get(Oe,"paymentMethodOptions",{}),Ue=_.get(Oe,"supportedCreditCardCodes",[]),qe=Ia(FormattedMessage,{id:"guestInfo.header.contactInformation"}),Ke="guest-loyalty-".concat(z),We="guest-info-addAdditionalGuestDetails-".concat(z),$e="transportation-info-container-".concat(z),Ye=Ia(M?"h3":"h2",{className:"app_heading1"},void 0,qe),Xe=Ia(FormattedMessage,te?{id:"guestInfo.label.addGuestEmails"}:{id:"guestInfo.label.addGuest"}),Ze=M?Ia("h4",{className:Nn()("app_subheading1",(e={},Aa(e,Pa.a.expandedHeader,o),Aa(e,Pa.a.collapsibleHeader,!o),e)),onClick:function(){return r.addOptionalGuestInfo()},tabIndex:"0",role:"button",onKeyDown:function(e){return Object(c.fb)(e)&&r.addOptionalGuestInfo()},"aria-expanded":o,"aria-controls":We},void 0,Xe):Ia("h3",{className:Nn()("app_subheading1",(t={},Aa(t,Pa.a.expandedHeader,o),Aa(t,Pa.a.collapsibleHeader,!o),t)),onClick:function(){return r.addOptionalGuestInfo()},tabIndex:"0",role:"button",onKeyDown:function(e){return Object(c.fb)(e)&&r.addOptionalGuestInfo()},"aria-expanded":o,"aria-controls":We},void 0,Xe),Je=Ia(FormattedMessage,{id:"guestLoyalty.sectionHeader.loyaltyInfoOptional"}),Qe=Ia(M?"h4":"h3",{className:"app_subheading1 ".concat(i?Pa.a.expandedHeader:Pa.a.collapsibleHeader),onClick:function(){return r.onLoyaltyInfoClicked()},role:"button",tabIndex:"0",onKeyDown:function(e){return Object(c.fb)(e)&&r.onLoyaltyInfoClicked()},"aria-expanded":i,"aria-controls":Ke},void 0,Je),et=Ia(FormattedMessage,{id:"guestInfo.header.additionalDetailsAndPreferences"}),tt=Ia(M?"h3":"h2",{className:"app_heading1"},void 0,et),rt=Ia(FormattedMessage,y?{id:"guestTransportation.label.transportationInfoRequired"}:{id:"guestTransportation.label.transportationInfoOptional"}),nt=Ia(M?"h4":"h3",{className:"app_subheading1 ".concat(a?Pa.a.expandedHeader:Pa.a.collapsibleHeader),onClick:function(){return r.onTrasportationInfoClicked()},role:"button",tabIndex:"0",onKeyDown:function(e){return Object(c.fb)(e)&&r.onTrasportationInfoClicked()},"aria-expanded":a,"aria-controls":$e},void 0,rt),ot=A&&re&&Ie,it=_.size(Ee)&&!re||re&&(Ie||_.size(Ee)),at=_.isEmpty(x)?ot:it,st=Oe.BookingDate.find((function(e){return"OriginatingChannel"===e.Type})).Value,lt=Oe.BookingDate.find((function(e){return"EntryChannel"===e.Type})).Value,dt=_.get(C,"isStoredStatusEnabled",!1)?lt:st,ct=_.get(C,"onHoldEnabled",!1),ut=Object($n.ub)(Oe,ct,B),pt=!!_.get(H,he.prefix);return Ia("div",{className:Pa.a.container},void 0,Ia("div",{className:Pa.a.contactInfo},void 0,Ia("fieldset",{},void 0,Ia("legend",{className:Pa.a.legend},void 0,Ia("div",{className:Pa.a.legendContent},void 0,Ye,Ia(_a.a,{}))),Ia("div",{className:Pa.a.prefixNameGroup},void 0,Ia(_e.a,{condition:Me.includes("prefix")},void 0,Ia("div",{className:Pa.a.prefixField},void 0,Ia(ve.a,{required:je.includes("prefix"),id:"guest-info-prefix-select-".concat(z),label:R(Pe.prefix),onChange:function(e){return r._update("prefix","Prefix"!==e.value?e.key:"")},options:H,isDifferentKeyValue:!0,selected:pt?he.prefix:"",disabled:Re,onBlur:this.onPrefixBlur,hasValue:pt,hideSelectedItem:!1,error:Ce.prefix&&xe(Ce.prefix)}))),Ia(_e.a,{condition:Me.includes("firstName")},void 0,Ia(ge.a,{className:Pa.a.firstNameField,maxLength:be.Cb.FIRST_NAME_MAX_LENGTH,name:"given-name-".concat(this.props.reservationId),onChange:function(e){return r.setState({firstName:e})},onBlur:function(){return r._update("firstName",r.state.firstName)},label:R(Pe.firstName),required:je.includes("firstName"),type:"text",value:this.state.firstName,error:Ce.firstName&&xe(Ce.firstName),autocomplete:"given-name",disabled:Re}))),Ia(_e.a,{condition:Me.includes("middleName")},void 0,Ia(ge.a,{className:Pa.a.middleInitialField,maxLength:be.Cb.MIDDLE_INIT_MAX_LENGTH,name:"mname-".concat(this.props.reservationId),onChange:function(e){return r.setState({middleName:e})},onBlur:function(){return r._update("middleName",r.state.middleName)},required:je.includes("middleName"),ariaLabel:R(Pe.middleNameFull),label:R(Pe.middleName),type:"text",value:this.state.middleName,error:Ce.middleName&&xe(Ce.middleName),autocomplete:"additional-name",disabled:Re})),Ia(_e.a,{condition:Me.includes("lastName")},void 0,Ia(ge.a,{className:Pa.a.lastNameField,maxLength:be.Cb.LAST_NAME_MAX_LENGTH,name:"lname-".concat(this.props.reservationId),onChange:function(e){return r.setState({lastName:e})},onBlur:function(){return r._update("lastName",r.state.lastName)},required:je.includes("lastName"),label:R(Pe.lastName),type:"text",value:this.state.lastName,error:Ce.lastName&&xe(Ce.lastName),autocomplete:"family-name",disabled:Re})),Ia(_e.a,{condition:Me.includes("suffix")},void 0,Ia(ge.a,{className:Pa.a.suffixField,maxLength:be.Cb.SUFFIX_MAX_LENGTH,onChange:function(e){return r.setState({suffix:e})},onBlur:function(){return r._update("suffix",r.state.suffix)},required:je.includes("suffix"),label:R(Pe.suffix),name:"suffix-".concat(this.props.reservationId),value:this.state.suffix,error:Ce.suffix&&xe(Ce.suffix),autocomplete:"honorific-suffix",disabled:Re})),Ia(_e.a,{condition:Me.includes("phoneNumber")},void 0,Ia(ge.a,{className:Pa.a.phoneNumberField,maxLength:be.Cb.PHONE_NUMBER_MAX_LENGTH,onChange:this.onChangePhone,onBlur:function(){return r._update("phone1",r.state.phone1)},onFocus:this.showMarketingConsent,required:je.includes("phoneNumber"),onKeyDown:c.qb,label:R(Pe.phone1),name:"phone-".concat(this.props.reservationId),type:"tel",value:this.state.phone1,error:Ce.phone1&&xe(Ce.phone1),autocomplete:"tel",disabled:Re})),Ia(_e.a,{condition:Me.includes("mobilePhoneNumber")},void 0,Ia(ge.a,{className:Pa.a.mobilePhoneNumberField,maxLength:be.Cb.MOBILE_PHONE_NUMBER_MAX_LENGTH,onChange:function(e){return r.setState({phone2:e})},onBlur:function(){return r._update("phone2",r.state.phone2)},required:je.includes("mobilePhoneNumber"),onKeyDown:c.qb,label:R(Pe.phone2),type:"tel",name:"mobile-".concat(this.props.reservationId),value:this.state.phone2,error:Ce.phone2&&xe(Ce.phone2),autocomplete:"tel",disabled:Re})),Ia(_e.a,{condition:Me.includes("emailAddress")},void 0,Ia("div",{className:Pa.a.emailAddressFieldGroup},void 0,Ia(ge.a,{className:Pa.a.emailAddressField,maxLength:be.Cb.EMAIL_ADDRESS_MAX_LENGTH,onChange:this.onChangeEmail,onBlur:function(){return r._update("emailAddress",r.state.emailAddress)},onFocus:this.showMarketingConsent,label:R(Pe.emailAddress),required:je.includes("emailAddress"),type:"email",placeholder:R(Pe.emailFormat),name:"EmailAddress-".concat(this.props.reservationId),value:this.state.emailAddress,error:Ce.emailAddress&&xe(Ce.emailAddress),autocomplete:"email",disabled:Re}),Ia("p",{className:Pa.a.emailConfirmationMessage},void 0,Ia(FormattedMessage,{id:"guestInfo.text.emailWeWillSendConfirmationTo"})))),Ia(_e.a,{condition:function(){var e=r.props,t=e.configData,n=e.isMarketingConsentAccepted,o=e.roomNumber,i=t.enableGuestDataCollectionConsent,a=r.state.isMarketingConsentVisible,s=1===o;return _.cond([[function(){return n},function(){return s&&!E}],[function(){return!n},function(){return i&&a&&!r._isLoggedIn()&&!E&&s}]])()}()},void 0,Ia(ba,{privacyPolicyLink:ye,privacyPolicyTitle:fe,subscribed:X,onSubscribeButtonClick:this.onSubscribeButtonClick,isMultiReservation:M,formatMessage:R})))),Ia(kr,{currentGuestProfile:Ve,activeProfileIdsForBookingViews:p,disabled:Re,isMultiReservation:M,isInModifyMode:E,roomNumber:z}),Ia(_e.a,{condition:J.length>0},void 0,Ia($r,{crsReferenceNumber:_.get(Ve,"CRS_referenceNumber"),guestDetails:_.get(Ve,"guestDetails"),disabled:Re,formatMessage:R,formattedErrorMessage:xe,isMultiReservation:M,setProfileInfo:u.setProfileInfo,supportedTravelDocuments:J,roomNumber:z})),Ia(_e.a,{condition:!_.size(x)&&1===z&&ee},void 0,Ia(Qt,{confirmPassword:this.props.confirmPassword,errors:this.props.errors,joinManagedProgram:this.props.joinManagedProgram,createAccount:_.get(he,"createAccount"),onChange:this.props.onPasswordChange,password:he.password,signUpTitle:pe,signUpLink:me,disabled:Re,isMultiReservation:M,shouldRenderPasswordSection:ce})),Ia(_e.a,{condition:K&&this.hasGuestCountMoreThanOne()},void 0,Ia("div",{className:Pa.a.addGuestSection},void 0,Ia("hr",{}),Ze,Ia(_e.a,{condition:o},void 0,Ia("div",{className:Pa.a.addAdditionalGuestDetails,id:We},void 0,Ia(_e.a,{condition:te},void 0,Ia("div",{className:Pa.a.additionalGuest},void 0,Ia(FormattedMessage,{id:"guestInfo.label.addAdditionalGuestDetails"}))),Ia(mt,{addNewGuest:function(e,t){return r.addNewGuest(e,t)},onFirstNameChange:function(e){return r.onFirstNameChange(e)},onLastNameChange:function(e){return r.onLastNameChange(e)},onEmailAddressChange:function(e){return r.onEmailAddressChange(e)},onRemoveGuest:function(e){return r.onRemoveGuest(e)},additionalGuestInfo:s,enableAdditionalGuestEmailAddresses:te,reservationId:G,disabled:Re}))))),Ia(_e.a,{condition:S||oe&&!!_.size(U)},void 0,Ia("div",{className:Pa.a.additionalDetails},void 0,Ia("hr",{}),tt,Ia(ur,{disabled:Re,displayCommentArea:S,onChangeCommentArea:this.onChangeCommentArea,reservation:this.props.reservations.find((function(e){return e.Id===r.props.reservationId})),reservationId:G,roomRequests:U,setReservationPreferences:this.props.actions.setReservationPreferences,showRoomRequests:oe,formatMessage:R}))),Ia(_e.a,{condition:at},void 0,Ia("div",{className:Pa.a.loyaltyProgram},void 0,Qe,Ia(_e.a,{condition:i},void 0,Ia(Lt,{addNewLoyalty:function(){return r.addNewLoyalty()},onLoyaltyProgramChange:function(e){return r.onLoyaltyProgramChange(e)},onLoyaltyNumberChange:function(e){return r.onLoyaltyNumberChange(e)},isInModifyMode:E,custLoyaltyList:Ee,authenticationDetails:b,loyaltyProgramListOptions:V,loyaltyProgramDetails:this.props.loyaltyProgramDetails,guestDetails:he,onRemoveLoyalty:function(e){return r.onRemoveLoyalty(e)},disabled:Re,enableLoyaltyProgramTypes:re,enableMultipleLoyaltyProgram:A,errors:Ce,update:this._update,defaultLoyaltyPrograms:I,roomNumber:z})))),Ia(_e.a,{condition:ne},void 0,Ia("div",{className:Pa.a.transportation},void 0,nt,Ia(_e.a,{condition:a&&!_.isEmpty(Ve)},void 0,Ia(ca,{arrivalTimeAlwaysRequired:y,arrivalTimeNotRequired:g,arrivalTimeRequiredIfEntered:v,arriveTerminalAirlineListOptions:h,displayLocale:N,departTerminalAirlineListOptions:w,errors:Ce,currentGuestProfile:Ve,isMultiReservation:M,setArrivalTimeNotRequired:function(e){return u.setArrivalTimeNotRequired(e,p)},terminalList:W,validateGuestProfile:function(){return u.validateGuestProfile(p)},disabled:Re,terminalTransportationListOptions:$,onArrivalTerminalSelected:L,activeProfileIdsForBookingViews:p,id:$e})))),Ia(_e.a,{condition:!Object(de.z)([Oe],!0)},void 0,Ia(Vi,{intl:this.props.intl,isOnHold:Oe.isOnHold,isPayNow:Oe.isPayNow,isPayMonthly:Oe.isPayMonthly,currencyCode:_.get(Oe,"CurrencyCode"),allowPay:Ne,arrive:ke,bookingDate:dt,dueType:De,payNowAmount:Ae,payNowDiscount:Fe,payDueDate:Te,onHoldTime:B,isOnHoldEnabled:ut,isInModifyMode:E,isDepositPolicy:Object($n.eb)(Oe),isAlwaysRedirect:this._isAlwaysRedirect(),isLoggedIn:this._isLoggedIn(),getGuestPaymentInfo:T,guestPaymentInfo:He,hasPayment:Ge,vendorFailure:Be,activeProfileIdsForBookingViews:p,getGuestPaymentInfoErrors:D,walletPaymentVerified:Q,reservationId:G,onOnHoldChange:function(e){return r.props.actions.setOnHoldStatus(e,G)},onPayNowChange:this.onPayNowChange,paymentMethodOptions:ze,supportedCreditCardCodes:Ue,disabled:Re,pathname:this.props.pathname,isMultiReservation:M,formatMessage:this.props.intl.formatMessage,updateReservationInProgress:this.props.updateReservationInProgress,timezone:Y,roomNumber:z,getIWMDataRequested:j},F?"guest-payment-has-profile":"guest-payment-no-profile")),Ia(_e.a,{condition:this._shouldBillingAddressComponentRender()&&!_.isEmpty(Ve)},void 0,Ia(On,{confirmationNumber:P,currentGuestProfile:Ve,addressType:be.h.BILLING_ADDRESS_DETAILS,activeProfileIdsForBookingViews:p,disabled:Re,isMultiReservation:M,roomNumber:z})),Ia(_e.a,{condition:this.displayApplyToAllRoomsButton()},void 0,Ia("div",{className:Pa.a.applyToAllRooms},void 0,Ia(l.a,{className:"link",iconClassName:"documentCheck",onClick:function(e){return r.applyInformationToRooms(e,He)}},void 0,Ia(FormattedMessage,{id:"guestInfo.button.applyToAllRooms"})))))}},{key:"getReservationsForApplyInformationToRooms",value:function(){var e=this.props,t=e.activeProfilesForBookingViews,r=e.activeReservationsForBookingViews,n=e.activeAddOnsForBookingViews,o=e.configData,i=e.isInModifyMode,a=e.loyaltyProgramDetails,s=e.loggedInUserProfile,l=e.reservationId,d=e.timezone,c=_.filter(r,(function(e){return e.Id!==l}));if(!i)return c;var u=_.get(o,"enableDayUse",!1),p=Object($n.U)({reservations:c,addOns:n,loyaltyProgramDetails:a,profiles:t,loggedInUserProfile:s,isSingleDayUse:u,hotelTimeZone:d});return _.filter(p,(function(e){return e.isModificationPermitted}))}},{key:"applyInformationToRooms",value:function(e,t){var r=this;e.preventDefault();var n=this.props,o=n.actions,i=o.copyProfileData,a=o.enablePaymentValidationAction,s=o.setReservationPreferences,l=o.setIsPaymentValid,d=o.setOnHoldStatus,c=o.setCopyingInfoFromOtherReservation,u=o.setReservationLoyalty,p=o.setSelectedPaymentMethod,m=n.activeReservationsForBookingViews,f=n.activeProfileIdsForBookingViews,y=n.configData,g=n.currentProfile,v=n.isInModifyMode,h=n.getGuestPaymentInfo,b=n.onHoldTime,C=n.reservationId,P=this.getReservationsForApplyInformationToRooms(),O=m.find((function(e){return e.Id===C})),I=t[C],w=_.map(P,(function(e){return e.Id})),S=_.get(g,"CRS_referenceNumber"),N=_.get(y,"onHoldEnabled",!1);_.size(w)&&i(S,v,w),a(!0,f);var A,T,D,k,F,R,E=be.Oc.ON_HOLD,M=be.Oc.PAY_NOW,j=be.Oc.PAY_LATER,x=be.Oc.PAY_MONTHLY,V=be.Oc.NO_TABS,L=function(e){var t=_.get(e,"Status",""),r=t===be.td.BOOKED||t===be.td.STORED;return _.get(e,"BookingPolicy.AllowPay")&&r},B=function(e){return Object($n.ub)(e,N,b)},H=(T=L(A=O),D=B(A),k=_.get(A,"isPayNow",!1),F=Object($n.eb)(A)&&!k,R=_.get(A,"isPaymentInstallmentsEnabled",!1),r.props.isInModifyMode&&A.Status===be.td.PENDING_MODIFY||!(D||T||R)?V:(k||F||!T&&R)&&!A.isPayMonthly?M:k||A.isPayMonthly||A.isOnHold?A.isOnHold&&!A.isPayMonthly?E:R&&A.isPayMonthly?x:void 0:j),G=_.get(I,"paymentType",be.Pc.CREDIT_CARD),z=_.get(I,"ProviderCode"),U=Object($n.r)(z),q=G===be.Pc.CREDIT_CARD?G:"".concat(U).concat(z),K=_.get(O,"PublicComment",""),W=_.get(O,"Status")===be.td.PENDING_MODIFY&&!!_.get(I,"PaymentToken"),$=Boolean(_.size(_.get(O,"paymentInstallmentOptions",[])));P.forEach((function(e){var t=L(e),n=B(e),o=_.get(e,"isPaymentInstallmentsEnabled",!1),i=r.props.isInModifyMode&&e.Status===be.td.PENDING_MODIFY,a=[];!i&&(n||t||o)?t||n?(t?(a.push(M,j),o&&a.push(x)):a.push(j),n&&a.push(E)):o?a.push(M,x):a.push(j):a.push(V);var m=_.keys(e.paymentMethodOptions).includes(q),f=_.includes(a,H);s(e.Id,_.get(O,"roomRequests",[])),l(!0,e.Id),d(O.isOnHold,e.Id),p(e.Id,_.get(O,"selectedPaymentMethod")),c(e.Id,!0),r.onChangeCommentArea({reservationId:e.Id,commentArea:K}),m&&f&&(!_.get(e,"BookingPolicy.AllowPay")&&!o||i||r.onPayNowChange(!!O.isPayNow,!!O.isPayMonthly,e),parseInt(_.get(e,"BookingPolicy.HoldTime",0))>0&&d(!!O.isOnHold,e.Id)),_.set(I,"isDataCopiedFromAnotherRes",!0),_.set(I,"isDataCopiedFromAnotherConfirmedRes",W),_.set(I,"isCurrentReservationHasPaymentInstallments",$),I&&!i&&m&&h(I,e.Id),O.CustLoyaltyList.forEach((function(t){var r=_.cloneDeep(t);u(e.Id,r)}))}))}},{key:"displayApplyToAllRoomsButton",value:function(){var e=this.props.activeReservationsForBookingViews;return 1===this.props.roomNumber&&e&&e.length>1}},{key:"getPlaceHolders",value:function(){return defineMessages({emailAddress:{id:"guestInfo.placeHolder.emailAddress",defaultMessage:"##guestInfo.placeHolder.emailAddress##"},emailFormat:{id:"checkout.placeholder.emailFormat",defaultMessage:"##checkout.placeholder.emailFormat##"},firstName:{id:"guestInfo.placeHolder.firstName",defaultMessage:"##guestInfo.placeHolder.firstName##"},middleName:{id:"guestInfo.placeHolder.middleName",defaultMessage:"##guestInfo.placeHolder.middleName##"},middleNameFull:{id:"guestInfo.placeHolder.middleNameAriaLabel",defaultMessage:"##guestInfo.placeHolder.middleNameAriaLabel##"},lastName:{id:"guestInfo.placeHolder.lastName",defaultMessage:"##guestInfo.placeHolder.lastName##"},phone1:{id:"guestInfo.placeHolder.phone1",defaultMessage:"##guestInfo.placeHolder.phone1##"},phone2:{id:"guestInfo.placeHolder.phone2",defaultMessage:"##guestInfo.placeHolder.phone2##"},prefix:{id:"guestInfo.placeHolder.prefix",defaultMessage:"##guestInfo.placeHolder.prefix##"},suffix:{id:"guestInfo.placeHolder.suffix",defaultMessage:"##guestInfo.placeHolder.suffix##"},phoneType:{id:"guestInfo.placeHolder.phoneType",defaultMessage:"##guestInfo.placeHolder.phoneType##"},phoneLocation:{id:"guestInfo.placeHolder.phoneLocation",defaultMessage:"##guestInfo.placeHolder.phoneLocation##"}})}}])&&Ta(t.prototype,r),n&&Ta(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||va)||va;ja.defaultProps={activeReservationsForBookingViews:[],activeProfilesForBookingViews:[],errors:{}};var xa,Va,La=injectIntl(ja),Ba=r(91),Ha=r(1785),Ga=r.n(Ha);function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(){return(Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function qa(e,t,r,n){Va||(Va="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:Va,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$a(n.key),n)}}function $a(e){var t=function(e,t){if("object"!==za(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==za(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===za(t)?t:String(t)}function Ya(e,t){return(Ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ja(e);if(t){var o=Ja(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Za(this,r)}}function Za(e,t){if(t&&("object"===za(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ja(e){return(Ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qa,es,ts=withStyles(Ga.a)(xa=bindRedux([re.a,Q.a],[{setProfileInfo:W.setProfileInfo,expandAllRoomsOnGuestDetails:$.expandAllRoomsOnGuestDetails}])(xa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ya(e,t)}(i,e);var t,r,n,o=Xa(i);function i(){var e;Ka(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={isExpanded:1===e.props.roomNumber},e.handleExpandButtonClick=function(){e.props.expandAllRoomsOnGuestDetails&&e.props.actions.expandAllRoomsOnGuestDetails(!1),e.setState({isExpanded:!e.state.isExpanded})},e.onProfileInfoChange=function(t){return e.props.actions.setProfileInfo(t,e.props.guestInfoProp.profileId)},e}return t=i,(r=[{key:"componentDidUpdate",value:function(e){this.props.activeProfileIdsForBookingViews.length!==e.activeProfileIdsForBookingViews.length&&1===this.props.activeProfileIdsForBookingViews.length&&this.setState({isExpanded:!0}),this.props.expandAllRoomsOnGuestDetails&&!this.state.isExpanded&&this.setState({isExpanded:!0})}},{key:"render",value:function(){var e,t,r,n,o=this.props,i=o.reservation,a=o.roomNumber,s=o.guestInfoProp,d=o.getGuestPaymentInfo,u=o.guestPaymentInfo,p=o.hasPayment,m=o.hotelDetails,f=o.identity,y=o.isSingleDayUse,g=o.confirmationNumber,v=o.getGuestPaymentInfoErrors,h=o.activeReservationsForBookingViews,b=o.activeProfilesForBookingViews,C=o.intl,P=o.pathname,O=o.showRoomSplitViewCategory,I=C.formatMessage,w=_.get(i,"extrasFromShopping.coverImage"),S=i.Id,N=b.find((function(e){return e.reservationId===S&&e.Role===be.ld.PRIMARY})),A=h.length>1,T=this.state.isExpanded?"checkout.button.collapse":"checkout.button.expand",D=_.get(i,'extrasFromShopping.imageUrls["0"].Caption')||(e=_.get(i,"RoomName"),I({id:"checkout.ariaLabel.image",defaultDesciption:"##checkout.ariaLabel.image##"},{name:e})),k=_.get(i,["extrasFromShopping","roomCategoryName"],""),F=O&&k?"".concat(k,": <br/>").concat(i.RoomName):i.RoomName,R=Object($n.y)(i),E="reservation".concat(a,"GuestInfo"),M=Object(c.m)(i.StartDate),j=Object(c.m)(i.EndDate),x=_.get(m,"timezone");return qa("section",{className:Ga.a.container},void 0,A&&qa("div",{className:"".concat(Ga.a.header," app_row")},void 0,qa("div",{className:"".concat(Ga.a.image," app_col-sm-4 app_col-md-2 app_col-lg-2")},void 0,qa(Ba.a,{src:w,alt:D,sourceComponent:be.Vb.CHECKOUT_ROOM_ACCORDION})),qa("div",{className:"".concat(Ga.a.roomInfo," app_col-sm-8 app_col-md-10 app_col-lg-10")},void 0,qa("h2",{className:"app_subheading1"},void 0,qa(FormattedMessage,{id:"checkout.header.room",values:{number:a}})),qa("div",{className:Ga.a.roomName,dangerouslySetInnerHTML:{__html:Object(c.O)(F)}}),qa("div",{className:Ga.a.rateName,dangerouslySetInnerHTML:{__html:Object(c.O)(R)}}),qa("div",{className:Ga.a.reservationDates},void 0,Be.a.createElement(FormattedDate,Ua({value:M,day:"numeric",month:"short"},y?{year:"numeric"}:{})),qa(_e.a,{condition:!y},void 0," - ",qa(FormattedDate,{value:j||"",day:"numeric",month:"short",year:"numeric"}))),A&&qa(l.a,{ariaLabel:I({id:T,defaultMessage:"##"+T+"##"}),ariaExpanded:this.state.isExpanded,ariaControls:E,className:"link",onClick:this.handleExpandButtonClick,iconClassName:this.state.isExpanded?"arrowUpAfter":"arrowDownAfter"}))),qa("div",{className:Nn()(Ga.a.body,(t={},r=Ga.a.hidden,n=!this.state.isExpanded,(r=$a(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)),id:E},void 0,Be.a.createElement(La,Ua({},s,{confirmationNumber:g,roomNumber:a,currentProfile:N,profileId:s.profileId,onChange:this.onProfileInfoChange,getGuestPaymentInfo:d,guestPaymentInfo:u,hasPayment:p,identity:f,getGuestPaymentInfoErrors:v,reservationId:i.Id,pathname:P,isMultiReservation:A,timezone:x}))))}}])&&Wa(t.prototype,r),n&&Wa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Le.Component))||xa)||xa,rs=Object(y.h)(ts),ns=r(1719);function os(e){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function is(e,t,r,n){es||(es="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:es,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function as(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==os(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===os(i)?i:String(i)),n)}var o,i}function ls(e,t){return(ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ds(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=us(e);if(t){var o=us(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return cs(this,r)}}function cs(e,t){if(t&&("object"===os(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function us(e){return(us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ps,ms,fs=bindRedux([ie.a],[])(Qa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ls(e,t)}(i,Component);var t,r,n,o=ds(i);function i(){return as(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.activeReservationsForBookingViews,n=t.guestInfoProp,o=t.getGuestPaymentInfo,i=t.guestPaymentInfo,a=t.hasPayment,s=t.identity,l=t.getGuestPaymentInfoErrors,d=t.isBookingWithoutPaymentPermitted,c=t.isSingleDayUse,u=t.pathname,p=t.showRoomSplitViewCategory;return is("div",{},void 0,is(ns.a,{activeReservationsForBookingViews:r}),r.map((function(t,m){return is(rs,{expandAllRoomsOnGuestDetails:e.props.expandAllRoomsOnGuestDetails,roomNumber:m+1,activeReservationsForBookingViews:r,confirmationNumber:t.CrsConfirmationNumber,reservation:t,guestInfoProp:n,getGuestPaymentInfo:o,guestPaymentInfo:i,hasPayment:a,identity:s,getGuestPaymentInfoErrors:l,isBookingWithoutPaymentPermitted:d,isSingleDayUse:c,pathname:u,showRoomSplitViewCategory:p},m)})))}}])&&ss(t.prototype,r),n&&ss(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}())||Qa,ys=r(65),gs=r(1683),vs=r(19),hs=r(26),bs=r(33),_s=r(903),Cs=r(13),Ps=r(1681),Os=r(95),Is=r(1795),ws=r.n(Is);function Ss(e){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ns(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function As(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(r),!0).forEach((function(t){Ts(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ns(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ts(e,t,r){return(t=Es(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ds(e){return function(e){if(Array.isArray(e))return ks(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ks(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ks(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fs(e,t,r,n){ms||(ms="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),s=0;s<i;s++)a[s]=arguments[s+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:ms,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function Rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Es(n.key),n)}}function Es(e){var t=function(e,t){if("object"!==Ss(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ss(t)?t:String(t)}function Ms(e,t){return(Ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ls(e);if(t){var o=Ls(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return xs(this,r)}}function xs(e,t){if(t&&("object"===Ss(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vs(e)}function Vs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ls(e){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"default",(function(){return Bs}));var Bs=withStyles(ws.a)(ps=bindRedux([J.a,u.a,Q.a,A.a,ee.a,m.a,re.a,oe.a,ie.a,se.a,ne.a,b.a,ae.a,le.a,te.a],[f,W,$,Y,X,Z,{setUserHasSearched:Cs.setUserHasSearched}])(ps=injectIntl(ps=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ms(e,t)}(a,Component);var t,r,n,o=js(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).toggleProActiveOptIn=function(){t.setState({proActiveOptInChecked:!t.state.proActiveOptInChecked})},t.getPolicyStatuses=function(e){var r=e.PrivacyPolicyChecked,n=e.PoliciesAcknowledged,o=e.EmailOptInChecked,i=e.PsdCompliancePolicyChecked,a=(!r||!t.state.displayPolicyError)&&t.state.displayPolicyError;t.setState({psdComplianceAccepted:i,privacyPolicyAccepted:r,EmailOptInChecked:o,policiesAccepted:n,displayPolicyError:a})},t.submitForm=function(){t.props.actions.setAriaErrorNotifications([]);var e=t.props,r=e.configData,n=(e.isProfileValid,e.isPaymentValid,e.activeProfileIdsForBookingViews),o=e.proActiveEnrollmentLoyaltyProgram,i=e.activeProfilesForBookingViews,a=!de.E(r,o);!t.state.displayPolicyError&&t.setState({displayPolicyError:!0});var s=_.some(i,(function(e){return!_.get(e,"guestDetails.privacyPolicy")}));t.state.privacyPolicyAccepted&&s&&t.props.actions.setProfileInfo({privacyPolicy:t.state.privacyPolicyAccepted},n),t.props.actions.enablePaymentValidationAction(!0,n,{isSubmitting:!0}),t.checkTransportationIsValid(),t.setState({createProfilerError:!1,submitForm:!0}),t.props.actions.validateGuestProfile(n,a),t.props.actions.changeProActiveEnrollmentChoice(t.state.proActiveOptInChecked),t._sendCheckoutDataTracking(),t.shouldDirectToReviewPage()&&t.props.actions.sendRetailInsightsTrackingEvent("review")},t.handleSignInClick=function(e){var r=t.props.configData,n=Object(Os.d)(_.get(r,"crm")),o=_.get(r,"crm.logInUrl"),i=_.get(r,"crm.logInPassCredentials"),a=_.get(r,"isLoyaltyProgramAssignedToProvider"),s=n&&!i&&o&&!a;if(window.scroll(0,0),e.target.disableClickout=!0,!s)return t.props.actions.showSignInWidgetRequested();window.open(o)};var r=e.guestDetails.additionalGuests,n=e.guestDetails,i=n.arrivingAirlineKey,s=n.arrivingFlight,l=n.arrivingCodeLocation,d=n.estimatedArrivalTimeKey,u=n.arrivingTransportationCode,p=n.departingAirlineKey,m=n.departingFlight,f=n.departingCodeLocation,y=n.estimatedDepartureTimeKey,g=n.departingTransportationCode,v={arrivingAirlineKey:i,arrivingFlight:s,arrivingCodeLocation:l,arrivingTerminalType:n.arrivingTerminalType,estimatedArrivalTimeKey:d,arrivingTransportationCode:u,departingAirlineKey:p,departingFlight:m,departingCodeLocation:f,departingTerminalType:n.departingTerminalType,estimatedDepartureTimeKey:y,departingTransportationCode:g};return t.state={displayPolicyError:!1,policyChecks:{},additionalGuests:r&&r.asMutable({deep:!0}),createCentralProfileError:!1,EmailOptInChecked:!1,hasPayment:!1,isPaymentMethodProcessed:!1,isValid:!0,policiesAccepted:!0,privacyPolicyAccepted:!1,psdComplianceAccepted:!1,paymentInfoValid:!1,transportationInfo:v,proActiveOptInChecked:!1,mobileReachBottom:!1,isArrivalTerminalSelected:!1},t.guestPaymentInfo={},t.formHasBeenSubmitted=!1,t.getGuestPaymentInfoErrors=t.getGuestPaymentInfoErrors.bind(Vs(t)),t.getGuestPaymentInfo=t.getGuestPaymentInfo.bind(Vs(t)),Object(c.wb)("checkout.title.browserTitle",{hotelAndChainLevelDetails:e.hotelAndChainLevelDetails,hotelDetails:e.hotelDetails,formatMessage:e.intl.formatMessage}),e.actions.resetValidationState(),e.actions.enablePaymentValidationAction(!1,e.activeProfileIdsForBookingViews),e.actions.resetPaymentValidation(!1,e.activeProfileIdsForBookingViews),e.actions.unsetSensitiveInformation(),e.actions.getWorkflowMessages(e.currentUrlParams.chain,e.currentUrlParams.hotel,[{Type:"ChildrenPolicy"}]),t}return t=a,n=[{key:"getDerivedStateFromProps",value:function(e,t){if(t.RequestedProfile&&e.createProfile.ErrorDescription){var r=de.l(e);return Object(c.tb)(0,0),{RequestedProfile:e.createProfile.Requested,createCentralProfileError:Fs(q.a,{messages:r,messageType:"error",needsBox:!0})}}return{RequestedProfile:e.createProfile.Requested}}}],(r=[{key:"componentDidMount",value:function(){this.initGuestPaymentInfo(),this.props.actions.onCheckout(),this._sendCheckoutDataTracking(!0),this._setReservationDataInProfile(),this.props.actions.setUserHasSearched(!1)}},{key:"componentDidUpdate",value:function(e,t){var r=this,n=!_.isEqual(this.props.confirmItineraryErrors,e.confirmItineraryErrors),o=Object(gr.b)(e.configData);if(t.submitForm){var i=o.includes("policyAcknowledgement")&&!t.policiesAccepted?Fs(FormattedMessage,{id:"checkoutPolicies.error.mustAcknowledgePolicy",defaultMessage:"##checkoutPolicies.error.mustAcknowledgePolicy##"}):void 0,a=_.keys(_.get(e,"guestDetails.errors")).map((function(t){return Fs(FormattedMessage,{id:"guestInfo.error.".concat(e.guestDetails.errors[t]),defaultMessage:"##guestInfo.error.".concat(e.guestDetails.errors[t],"##")},t)})),s=_.keys(this.paymentValidationError||{}).map((function(e){return(r.paymentValidationError||{})[e]})),l=[].concat(Ds(a),Ds(s),[i]);e.actions.setAriaErrorNotifications(l)}if(this.formHasBeenSubmitted&&n){this.formHasBeenSubmitted=!1;var d=_.get(e.barsHeight,"heroImageHeight",0),u=d?d+_.get(e.barsHeight,"userBarHeight",0):0;Object(c.tb)(0,u)}var p=this.props,m=p.currentUrlParams,f=p.confirmItineraryErrors,y=this.isPaymentValidationFinished();m.locale!==e.currentUrlParams.locale&&this.props.actions.getWorkflowMessages(m.chain,m.hotel,[{Type:"ChildrenPolicy"}]),this.props.isInModifyMode&&e.activeReservationId!==this.props.activeReservationId&&this._setReservationDataInProfile(),this.state.submitForm&&this.setState({submitForm:!1},(function(){if(y){var e=r.areAllPaymentsValid();r.checkFormisValid()&&e?(r.confirmItinerary(),r.formHasBeenSubmitted=!0):r.higlightFirstElementWithError()}else r.higlightFirstElementWithError()})),this.props.isInModifyMode&&e.activeReservationId!==this.props.activeReservationId&&this.initGuestPaymentInfo(),_.isEqual(f,e.confirmItineraryErrors)||this.higlightFirstElementWithError(),_.defer((function(){return r._updateFormAutocomplete()}))}},{key:"areAllPaymentsValid",value:function(){var e=this.props.activeReservationsForBookingViews,t=_.every(e,["isOnHold",!0]),r=_.get(this.props,"activeProfilesForBookingViews");return!!t||_.every(r,(function(t){var r=t.reservationId,n=t.reservationStatus,o=t.Role,i=t.isPaymentValid,a=o===be.ld.ADDITIONAL,s=n===be.td.CONFIRMED,l=e.find((function(e){return e.Id===r}));return!!(a||l.isOnHold||s)||i}))}},{key:"shouldDirectToReviewPage",value:function(){var e=this.props,t=e.loyaltyProgramDetails,r=e.configData;return Object(ce.n)(t,r)}},{key:"isPaymentValidationFinished",value:function(){var e=de.z(this.props.activeReservationsForBookingViews),t=_.every(this.guestPaymentInfo,["paymentType",be.Pc.UNDETERMINED]),r=this.props.isRedirectionType===be.v&&t;return!!(this.props.isInModifyMode||this.state.hasPayment||this.state.hasAltPayment||this.state.isPaymentMethodProcessed||r||e)||!this.props.enablePaymentValidation}},{key:"higlightFirstElementWithError",value:function(){this.props.actions.expandAllRoomsOnGuestDetails(!0),this.focusFirstFieldWithError(),this.bringFirstDisplayErrorIntoView()}},{key:"focusFirstFieldWithError",value:function(){var e=document.querySelector('input[data-error="true"], textarea[data-error="true"], select[data-error="true"], button[data-error="true"]');e&&e.focus()}},{key:"bringFirstDisplayErrorIntoView",value:function(){var e=document.querySelector("[data-error=true]")||document.querySelector(".app_displayError");e&&e.scrollIntoView&&(e.parentNode.scrollIntoView(),window.scrollBy(0,-100))}},{key:"checkFormisValid",value:function(){var e=this.props,t=e.activeProfilesForBookingViews,r=e.configData,n=t.some((function(e){return!e.isProfileValid&&e.reservationStatus!==be.td.CONFIRMED})),o=!Object(gr.b)(r).includes("policyAcknowledgement")||this.state.policiesAccepted;return!(n||!this.paymentSectionCheck())&&(this.shouldDirectToReviewPage()||o)}},{key:"checkTransportationIsValid",value:function(){var e=this.props.arrivalTimeAlwaysRequired||this.props.arrivalTimeRequiredIfEntered&&this.state.isArrivalTerminalSelected;this.props.actions.setArrivalTimeNotRequired(!e,this.props.activeProfileIdsForBookingViews)}},{key:"paymentSectionCheck",value:function(){var e=this.props,t=this.state;return!!de.z(e.activeReservationsForBookingViews)||!!(e.isInModifyMode||t.hasPayment||t.hasAltPayment)||this.areAllPaymentsValid()}},{key:"confirmItinerary",value:function(){var e=this,t=this.guestPaymentInfo,r=this.state,n=this.props,o=n.actions,i=n.activeProfileIdsForBookingViews,a=n.activeProfilesForBookingViews,s=n.activeReservationsForBookingViews,l=n.addOnsInCart,d=n.configData,c=n.currentUrlParams,u=n.displayLocale,p=n.enableGuestConsentToStoreCardData,m=n.ip,f=n.isSIPActivated,y=n.loggedInUserProfile,g=n.loyaltyEnrollmentChoice,v=n.loyaltyProgramDetails,h=n.originalProfileData,b=n.proActiveEnrollmentLoyaltyProgram,C=n.selectedLanguage,P=f?Object(ys.m)(s,this.props.sipPackagesById):l,O=a[0],I=_.get(O,"guestDetails",{}),w=I.address1,S=I.address2,N=I.city,A=I.countryCode,T=I.emailAddress,D=I.firstName,k=I.lastName,F=I.phoneType1,R=I.phoneType2,E=I.phoneLocation1,M=I.phoneLocation2,j=I.phone2,x=I.phone1,V=I.prefix,L=I.stateProvinceCode,B=I.suffix,H=I.zipPostalCode,G=I.password,z=I.middleName,U=I.identity,q=de.d({address:[w,S],chain:c.chain,city:N,countryCode:A,email:T,firstName:D,hotel:_.get(c,"hotel",this.props.selectedHotel),identity:U,language:C||u,lastName:k,middleName:z,password:G,phoneType1:F,phoneType2:R,phoneLocation1:E,phoneLocation2:M,phone1:x,phone2:j,prefix:V,optIn:r.EmailOptInChecked,stateCode:L,suffix:B,zipCode:H}),K=Object(gr.b)(d),W=a.filter((function(e){return e.Role===be.ld.PRIMARY})).reduce((function(e,t){return e[t.reservationId]=t.guestDetails,e}),{}),$=C||u,Y=!0,X=!0,Z=r.privacyPolicyAccepted;K.find((function(e){return"policyAcknowledgement"===e}))&&(Y=r.policiesAccepted),p&&(X=r.psdComplianceAccepted);var J=void 0!==this.props.modifyDetails;o.resetConfirmItineraryResults(),o.clearMessages("confirmItineraryError"),o.setSensitiveInformation({createCentralProfileRequest:q,transportationInfo:W,originalProfileData:h,_displayLocale:$,ip:m,isModifying:J,loyaltyEnrollmentChoice:g,proActiveEnrollmentLoyaltyProgram:b},t,i);var Q=Object(hs.h)({custLoyaltyList:_.get(y,"CustLoyaltyList"),loyaltyProgramDetails:v}),ee=s.filter((function(e){return e.Status!==be.td.CONFIRMED&&e.Status!==be.td.PAYMENT_PENDING})),te=_.some(ee,(function(e){return _.cond([[function(){return!e.isPointsOnly&&e.redeemLoyalty},function(){return!0}],[function(){return!0},function(){var t=Object(bs.j)(l,e.Id);return _.some(t,(function(e){return!e.isPointsOnly&&e.redeemLoyalty}))}]])()})),re=Object(_s.a)({previousSelections:{reservations:this.props.originalReservationPointSelections,addOns:this.props.originalAddOnPointSelections},newSelections:{reservations:s,addOns:l}});_.cond([[function(){return Q&&(te||re)},function(){o.confirmItinerary(P,q,t,s,a,W,h,$,m,J,g,b,void 0,{actionType:be.f.UPDATE,navigationRoute:be.B.REVIEW},re)}],[function(){return e.shouldDirectToReviewPage()},function(){return fe.a.push("/review"+window.location.search)}],[function(){return!0},function(){o.updateCurrentUrlParams({sbe_pl:Object(vs.c)(s)}),Y&&Z&&X&&o.confirmItinerary(P,q,t,s,a,W,h,$,m,J,g,b)}]])()}},{key:"_sendCheckoutDataTracking",value:function(e){var t=window._globalTracking;t.ViewName="checkout",this.props.reservations&&e&&dataStream.send("checkout",JSON.parse(JSON.stringify(t)))}},{key:"getGuestPaymentInfo",value:function(e,t){this.guestPaymentInfo[t]=e,this.props.actions.setSelectedPaymentMethod(t,_.get(e,"CardCode",_.get(e,"ProviderCode",""))),this.setState({hasAltPayment:e.paymentType&&(e.paymentType!==be.Pc.CREDIT_CARD||e.paymentType!==be.Pc.UNDETERMINED),isPaymentMethodProcessed:_.get(e,"isPaymentMethodProcessed",!1)})}},{key:"initGuestPaymentInfo",value:function(){var e=this;if(!this.state.hasPayment&&this.props.isInModifyMode)this.guestPaymentInfo=this.props.activeProfilesForBookingViews.reduce((function(e,t){var r=de.m({profile:t}),n=de.q(r);return t.Role===be.ld.ADDITIONAL?As({},e):As(As({},e),{},Ts({},t.reservationId,de.g(n,r)))}),{}),this.setState({hasPayment:!0});else{var t=de.m({profile:this.props.loggedInUserProfile,paymentPath:"paymentCardList"}),r=this.props.activeProfilesForBookingViews.find((function(t){return t.reservationId===e.props.activeReservationId}));(de.m({profile:r})||t)&&(this.guestPaymentInfo=this.props.activeProfilesForBookingViews.reduce((function(r,n){var o=de.m({profile:n})||t||{};if(_.get(n,"Role")===be.ld.ADDITIONAL)return r;if(_.size(o))if(o.asMutable&&(o=o.asMutable({deep:!0})),o.PaymentCard){_.get(o.PaymentCard,"paymentType")||(o.PaymentCard.paymentType=o.Type),_.get(o.PaymentCard,"CardExpirationDate")||(o.PaymentCard.CardExpirationDate=o.PaymentCard.ExpireDate);var i=_.get(o,"PaymentCard.CardCode"),a=e.props.activeReservationsForBookingViews.find((function(e){return e.Id===n.reservationId})),s=de.z([a],!0);i&&!s&&e.props.actions.setSelectedPaymentMethod(n.reservationId,i)}else o[o.Type]&&(o[o.Type].paymentType=o.Type);var l=Object($n.G)(_.get(o,"Type")?o:_.get(o,"PaymentCard"));return As(As({},r),{},Ts({},n.reservationId,o[l]))}),{}),this.setState({hasPayment:!0}))}}},{key:"setAdditionalGuests",value:function(e){return this.setState({additionalGuests:e})}},{key:"getGuestPaymentInfoErrors",value:function(e){this.paymentValidationError=e}},{key:"setIsArrivalTerminalSelected",value:function(e){this.setState({isArrivalTerminalSelected:e})}},{key:"onFormSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,r=this.props,n=r.actions,o=n.setPassword,a=n.setProfileInfo,s=n.setPublicComment,d=r.activeProfileIdsForBookingViews,u=r.arrivalTimeAlwaysRequired,p=r.arrivalTimeNotRequired,m=r.arrivalTimeRequiredIfEntered,f=r.associatedStates,y=r.configData,g=r.confirmItineraryErrors,v=r.confirmItineraryRequested,h=r.countryList,b=r.countryDetailList,C=r.currentUrlParams,P=r.displayCommentArea,I=r.enableLoyaltyProgramTypes,w=r.enableMultipleLoyaltyProgram,S=r.expandAllRoomsOnGuestDetails,N=r.guestDetails,A=r.intl,T=r.loggedInUserProfile,D=r.loyaltyProgramDetails,k=r.loyaltyProgramListOptions,F=r.pathname,R=r.prefixList,E=r.profileType,M=r.reservations,j=r.showAdditionalGuests,x=r.terminalAirlineListOptions,V=r.terminalList,L=r.unavailableReservations,B=void 0===L?[]:L,H=r.workflowMessage,G=_.get(y,"showRoomCategories"),W=_.get(H,"ChildrenPolicy"),$=_.get(y,"coupons.enabled"),Y=B.map((function(e,t){return Fs(q.a,{messageType:"warning",isInline:!0,messages:[_.get(e,"RoomName","")]},"unavailable-reservations-"+t)})),X=de.t(T.CustLoyaltyList,D),Z=E===be.md.BOOKER,J=Object($n.Z)(M,Z,T),Q=""!==_.get(C,"agencyId")&&!_.isEmpty(J),ee=Z||Q,te=Fs(FormattedMessage,!Z&&Q?{id:"agentInformationPanel.header.travelAgent.welcomeMessage"}:{id:"agentInformationPanel.header.booker.welcomeMessage",values:{name:T.firstName}}),re=function(e){if(_.result(e,"length"))return Fs("div",{className:ws.a.notAvailable},void 0,Fs("h2",{className:"app_subheading1"},void 0,Fs(FormattedMessage,{id:"checkout.text.theFollowingRoomsAreNotAvailable"})),e)}(Y);this.state.hasPayment||this.initGuestPaymentInfo();var ne=_.some(M,(function(e){return e.Status===be.td.STORED})),oe=_.get(g,"[0].messageIdForDisplay"),ie=_.get(g,"[0].errorShortText")===be.de.NO_AVAILABILITY,ae={activeProfileIdsForBookingViews:d,arrivalTimeAlwaysRequired:u,arrivalTimeNotRequired:p,arrivalTimeRequiredIfEntered:m,arriveTerminalAirlineListOptions:x,associatedStates:f,confirmPassword:N.confirmPassword,countryList:h,countryDetailList:b,departTerminalAirlineListOptions:x,displayCommentArea:P,enableLoyaltyProgramTypes:I,enableMultipleLoyaltyProgram:w,errors:N.errors,key:N.identity?"guest-info-has-profile":"guest-info-no-profile",joinManagedProgram:N.joinManagedProgram,loyaltyProgramListOptions:k,onChangeMainGuest:function(e,t){return a(e,[t],be.ld.PRIMARY)},onChangeAdditionalGuest:function(e,t){return a(e,[t],be.ld.ADDITIONAL)},onPasswordChange:function(e){return o(e,d)},onPublicCommentChange:function(e,t){return s(e,t)},password:N.password,prefixList:R,reservations:M,setAdditionalGuests:function(t){return e.setAdditionalGuests(t)},showAdditionalGuests:j,terminalList:V,transportationInfo:t.transportationInfo,redeemablePrograms:X,onArrivalTerminalSelected:function(t){return e.setIsArrivalTerminalSelected(t)}},se=Fs(Ps.a,{},void 0,(function(t,r){return Fs(_e.a,{condition:t||r},void 0,Fs(l.a,{className:"link",onClick:function(){return e.props.actions.toggleCart(!0)}},void 0,Fs(FormattedMessage,{id:"cart.text.editCart"})))})),le=_.get(y,"travelAgencyDisplayName",be.Ud.COMPANY_NAME)===be.Ud.BUSINESS_NAME;return Fs("div",{className:ws.a.section},void 0,Fs("div",{className:"app_container"},void 0,Fs("div",{className:"app_row"},void 0,Fs("main",{id:"mainContent",className:"app_col-sm-12 app_col-md-12 app_col-lg-8"},void 0,Fs("header",{},void 0,Fs(pe.a,{currentStep:"guestDetails",header:A.formatMessage({id:"checkout.header.checkout",defaultMessage:"##checkout.header.checkout##"}),pathname:F})),Fs("div",{"aria-live":"assertive","aria-relevant":"all"},void 0,Fs(_e.a,{condition:Object(O.d)(g,M)},void 0,Fs(q.a,ne&&ie?{messageType:"warning",needsBox:!0,messages:[Fs(FormattedMessage,{id:"confirmReservations.error.selectionNotAvailable"},"selectionNotAvailable"),Fs(FormattedMessage,{id:"confirmReservations.error.pleaseRevise",values:{edit:se}},"pleaseRevise")],withFocusableElements:!0}:{messageType:"error",needsBox:!0,messages:Fs(FormattedMessage,{id:"confirmReservations.error.".concat(oe),values:{numberOfReservations:g.length}})}),re),Fs(ue.a,{activeReservations:M}),t.createCentralProfileError),y.allowLogin&&!_.size(T)&&Fs("div",{className:ws.a.signInButtonWrapper},void 0,Fs(l.a,{className:"btn",colorClassName:"secondary",sizeClassName:"sm",onClick:this.handleSignInClick},void 0,Fs(FormattedMessage,{id:"checkout.text.signInForAFasterBooking"}))),ee&&Fs(gs.a,{profileInformation:T,travelAgentProfileInformation:J,headerMessage:te,displayTravelAgencyBusinessName:le,displayHorizontalRule:!0}),Fs("form",{onSubmit:this.onFormSubmit},void 0,Fs(fs,{expandAllRoomsOnGuestDetails:S,guestInfoProp:ae,getGuestPaymentInfo:this.getGuestPaymentInfo,guestPaymentInfo:this.guestPaymentInfo,hasPayment:this.state.hasPayment,identity:N.identity,getGuestPaymentInfoErrors:this.getGuestPaymentInfoErrors,isBookingWithoutPaymentPermitted:de.z(M,!0),isSingleDayUse:_.get(y,"enableDayUse"),pathname:this.props.pathname,showRoomSplitViewCategory:G}),$&&Fs(Ve,{}),Fs(z,{getPolicyStatuses:this.getPolicyStatuses,optIn:N.optIn,policiesAccepted:t.policiesAccepted,reservations:M,childrenPolicy:W}),!this.shouldDirectToReviewPage()&&Fs(U.a,{getPolicyStatuses:this.getPolicyStatuses,policiesAccepted:t.policiesAccepted,privacyPolicyAccepted:t.privacyPolicyAccepted,psdComplianceAccepted:t.psdComplianceAccepted,optIn:N.optIn,proActiveOptInChecked:t.proActiveOptInChecked,displayPolicyError:t.displayPolicyError,toggleProActiveOptIn:this.toggleProActiveOptIn,activeProfileIdsForBookingViews:d})),Fs("div",{className:Nn()(ws.a.bottomContinue,"button_group")},void 0,Fs(l.a,{className:"btn",colorClassName:"primary",sizeClassName:"md",enableSpinner:v,onClick:this.submitForm.bind(this),processing:v},void 0,this.shouldDirectToReviewPage()?Fs("span",{},void 0,Fs(FormattedMessage,{id:"checkout.button.continue"})):Fs("span",{},void 0,Fs(FormattedMessage,{id:"checkout.button.completeBooking"}),Fs("span",{className:"button_lock"})))),Fs(K.a,{onBottom:!0,onBottomCallBack:function(){return e.setState({mobileReachBottom:!0})},oneButton:!0,fullWidth:this.shouldDirectToReviewPage(),buttonRight:Fs(l.a,{className:"btn",colorClassName:"primary",sizeClassName:"sm",enableSpinner:v,onClick:this.submitForm,processing:v},void 0,this.shouldDirectToReviewPage()?Fs(FormattedMessage,{id:"checkout.button.mobileContinue",defaultMessage:"checkout.button.mobileContinue"}):Fs(FormattedMessage,{id:"checkout.button.mobileCompleteBooking",defaultMessage:"##checkout.button.mobileCompleteBooking##"}))})),Fs(i.a,{domElementThatShouldNotOverlap:Object(c.F)(),hideActiveStyles:!0,isCheckoutPage:!0}))))}},{key:"_setReservationDataInProfile",value:function(){var e=this,t=this.props.reservations,r={};_.forEach(t,(function(t){var n=e.props.activeProfilesForBookingViews.find((function(e){var r=_.get(e,"reservationId"),n=_.get(t,"Id"),o=_.get(e,"Role");return _.isEqual(r,n)&&_.isEqual(o,be.ld.PRIMARY)})),o=_.get(n,"CRS_referenceNumber");if(_.get(t,"PublicComment")&&(r.additionalGuests=Ts({},_.get(t,"Id"),{commentArea:_.get(t,"PublicComment")}),e.props.actions.setProfileInfo(r,[o])),_.size(t,"TransportationInfo")){var i={};_.get(t,"TransportationInfo",[]).forEach((function(e){"Arrival"===e.ArrivalDeparture?(i.arrivingAirlineKey=_.get(e,"Airline.Code")===be.Td?"":_.get(e,"Airline.Code"),i.arrivingFlight=_.get(e,"Airline.FlightNumber"),i.arrivingTransportationNumber=_.get(e,"Details.Number"),i.arrivingTerminalCode=_.get(e,"Location.Code"),i.arrivingTerminalType=_.get(e,"Location.Type"),i.estimatedArrivalTimeKey=s()(e.Time).format("HH:mm"),i.arrivingTransportationCode=_.get(e,"TransportationCode")):(i.departingAirlineKey=_.get(e,"Airline.Code")===be.Td?"":_.get(e,"Airline.Code"),i.departingFlight=_.get(e,"Airline.FlightNumber"),i.departingTransportationNumber=_.get(e,"Details.Number"),i.departingTerminalCode=_.get(e,"Location.Code"),i.departingTerminalType=_.get(e,"Location.Type"),i.estimatedDepartureTimeKey=s()(e.Time).format("HH:mm"),i.departingTransportationCode=_.get(e,"TransportationCode"))})),e.props.actions.setProfileInfo(i,[o])}})),this.setState({additionalProfileData:r})}},{key:"_updateFormAutocomplete",value:function(){var e=Math.random().toString(36).substr(2),t=document.querySelectorAll("input[type=text], input[type=email], input[type=tel]");_.forEach(t,(function(t){var r=t.getAttribute("autocomplete-data");if(r)return t.setAttribute("autocomplete","section-sbe-".concat(e," ").concat(r));var n=t.getAttribute("autocomplete");n&&(t.setAttribute("autocomplete-data",n),t.setAttribute("autocomplete","section-sbe-".concat(e," ").concat(n)))}))}}])&&Rs(t.prototype,r),n&&Rs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}())||ps)||ps)||ps}}]);